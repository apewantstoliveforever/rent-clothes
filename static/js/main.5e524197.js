/*! For license information please see main.5e524197.js.LICENSE.txt */
(()=>{var e={618:(e,t,n)=>{var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),s={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},71:(e,t,n)=>{"use strict";var r=n(791);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=Object.prototype.hasOwnProperty,o=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a={},l={};function c(e){return!!s.call(l,e)||!s.call(a,e)&&(o.test(e)?l[e]=!0:(a[e]=!0,!1))}function u(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){h[e]=new u(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];h[t]=new u(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){h[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){h[e]=new u(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){h[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){h[e]=new u(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){h[e]=new u(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){h[e]=new u(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){h[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)}));var d=/[\-:]([a-z])/g;function f(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(d,f);h[t]=new u(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(d,f);h[t]=new u(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(d,f);h[t]=new u(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){h[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)})),h.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){h[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)}));var p={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g=["Webkit","ms","Moz","O"];Object.keys(p).forEach((function(e){g.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),p[t]=p[e]}))}));var m=/["'&<>]/;function y(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=m.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var v=/([A-Z])/g,_=/^ms-/,b=Array.isArray;function w(e,t){return{insertionMode:e,selectedValue:t}}var S=new Map;function C(e,t,n){if("object"!==typeof n)throw Error(i(62));for(var r in t=!0,n)if(s.call(n,r)){var o=n[r];if(null!=o&&"boolean"!==typeof o&&""!==o){if(0===r.indexOf("--")){var a=y(r);o=y((""+o).trim())}else{a=r;var l=S.get(a);void 0!==l||(l=y(a.replace(v,"-$1").toLowerCase().replace(_,"-ms-")),S.set(a,l)),a=l,o="number"===typeof o?0===o||s.call(p,r)?""+o:o+"px":y((""+o).trim())}t?(t=!1,e.push(' style="',a,":",o)):e.push(";",a,":",o)}}t||e.push('"')}function E(e,t,n,r){switch(n){case"style":return void C(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=h.hasOwnProperty(n)?h[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:r&&e.push(" ",n,'=""');break;case 4:!0===r?e.push(" ",n,'=""'):!1!==r&&e.push(" ",n,'="',y(r),'"');break;case 5:isNaN(r)||e.push(" ",n,'="',y(r),'"');break;case 6:!isNaN(r)&&1<=r&&e.push(" ",n,'="',y(r),'"');break;default:t.sanitizeURL&&(r=""+r),e.push(" ",n,'="',y(r),'"')}}else if(c(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",n,'="',y(r),'"')}}function k(e,t,n){if(null!=t){if(null!=n)throw Error(i(60));if("object"!==typeof t||!("__html"in t))throw Error(i(61));null!==(t=t.__html)&&void 0!==t&&e.push(""+t)}}function T(e,t,n,r){e.push(R(n));var i,o=n=null;for(i in t)if(s.call(t,i)){var a=t[i];if(null!=a)switch(i){case"children":n=a;break;case"dangerouslySetInnerHTML":o=a;break;default:E(e,r,i,a)}}return e.push(">"),k(e,o,n),"string"===typeof n?(e.push(y(n)),null):n}var x=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,I=new Map;function R(e){var t=I.get(e);if(void 0===t){if(!x.test(e))throw Error(i(65,e));t="<"+e,I.set(e,t)}return t}function N(e,t,n,o,a){switch(t){case"select":e.push(R("select"));var l=null,u=null;for(p in n)if(s.call(n,p)){var h=n[p];if(null!=h)switch(p){case"children":l=h;break;case"dangerouslySetInnerHTML":u=h;break;case"defaultValue":case"value":break;default:E(e,o,p,h)}}return e.push(">"),k(e,u,l),l;case"option":u=a.selectedValue,e.push(R("option"));var d=h=null,f=null,p=null;for(l in n)if(s.call(n,l)){var g=n[l];if(null!=g)switch(l){case"children":h=g;break;case"selected":f=g;break;case"dangerouslySetInnerHTML":p=g;break;case"value":d=g;default:E(e,o,l,g)}}if(null!=u)if(n=null!==d?""+d:function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(h),b(u)){for(o=0;o<u.length;o++)if(""+u[o]===n){e.push(' selected=""');break}}else""+u===n&&e.push(' selected=""');else f&&e.push(' selected=""');return e.push(">"),k(e,p,h),h;case"textarea":for(h in e.push(R("textarea")),p=u=l=null,n)if(s.call(n,h)&&null!=(d=n[h]))switch(h){case"children":p=d;break;case"value":l=d;break;case"defaultValue":u=d;break;case"dangerouslySetInnerHTML":throw Error(i(91));default:E(e,o,h,d)}if(null===l&&null!==u&&(l=u),e.push(">"),null!=p){if(null!=l)throw Error(i(92));if(b(p)&&1<p.length)throw Error(i(93));l=""+p}return"string"===typeof l&&"\n"===l[0]&&e.push("\n"),null!==l&&e.push(y(""+l)),null;case"input":for(u in e.push(R("input")),d=p=h=l=null,n)if(s.call(n,u)&&null!=(f=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"input"));case"defaultChecked":d=f;break;case"defaultValue":h=f;break;case"checked":p=f;break;case"value":l=f;break;default:E(e,o,u,f)}return null!==p?E(e,o,"checked",p):null!==d&&E(e,o,"checked",d),null!==l?E(e,o,"value",l):null!==h&&E(e,o,"value",h),e.push("/>"),null;case"menuitem":for(var m in e.push(R("menuitem")),n)if(s.call(n,m)&&null!=(l=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(i(400));default:E(e,o,m,l)}return e.push(">"),null;case"title":for(g in e.push(R("title")),l=null,n)if(s.call(n,g)&&null!=(u=n[g]))switch(g){case"children":l=u;break;case"dangerouslySetInnerHTML":throw Error(i(434));default:E(e,o,g,u)}return e.push(">"),l;case"listing":case"pre":for(d in e.push(R(t)),u=l=null,n)if(s.call(n,d)&&null!=(h=n[d]))switch(d){case"children":l=h;break;case"dangerouslySetInnerHTML":u=h;break;default:E(e,o,d,h)}if(e.push(">"),null!=u){if(null!=l)throw Error(i(60));if("object"!==typeof u||!("__html"in u))throw Error(i(61));null!==(n=u.__html)&&void 0!==n&&("string"===typeof n&&0<n.length&&"\n"===n[0]?e.push("\n",n):e.push(""+n))}return"string"===typeof l&&"\n"===l[0]&&e.push("\n"),l;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var v in e.push(R(t)),n)if(s.call(n,v)&&null!=(l=n[v]))switch(v){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,t));default:E(e,o,v,l)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return T(e,n,t,o);case"html":return 0===a.insertionMode&&e.push("<!DOCTYPE html>"),T(e,n,t,o);default:if(-1===t.indexOf("-")&&"string"!==typeof n.is)return T(e,n,t,o);for(f in e.push(R(t)),u=l=null,n)if(s.call(n,f)&&null!=(h=n[f]))switch(f){case"children":l=h;break;case"dangerouslySetInnerHTML":u=h;break;case"style":C(e,o,h);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:c(f)&&"function"!==typeof h&&"symbol"!==typeof h&&e.push(" ",f,'="',y(h),'"')}return e.push(">"),k(e,u,l),l}}function P(e,t,n){if(e.push('\x3c!--$?--\x3e<template id="'),null===n)throw Error(i(395));return e.push(n),e.push('"></template>')}var A=/[<\u2028\u2029]/g;function O(e){return JSON.stringify(e).replace(A,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}function D(e,t,n,r){return n.generateStaticMarkup?(e.push(y(t)),!1):(""===t?e=r:(r&&e.push("\x3c!-- --\x3e"),e.push(y(t)),e=!0),e)}var L=Object.assign,M=Symbol.for("react.element"),F=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Q=Symbol.for("react.scope"),$=Symbol.for("react.debug_trace_mode"),Y=Symbol.for("react.legacy_hidden"),X=Symbol.for("react.default_value"),J=Symbol.iterator;function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case U:return"Fragment";case F:return"Portal";case V:return"Profiler";case j:return"StrictMode";case W:return"Suspense";case H:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case z:return(e._context.displayName||"Context")+".Provider";case q:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case K:return null!==(t=e.displayName||null)?t:Z(e.type)||"Memo";case G:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}var ee={};function te(e,t){if(!(e=e.contextTypes))return ee;var n,r={};for(n in e)r[n]=t[n];return r}var ne=null;function re(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(i(401))}else{if(null===n)throw Error(i(401));re(e,n)}t.context._currentValue2=t.value}}function ie(e){e.context._currentValue2=e.parentValue,null!==(e=e.parent)&&ie(e)}function se(e){var t=e.parent;null!==t&&se(t),e.context._currentValue2=e.value}function oe(e,t){if(e.context._currentValue2=e.parentValue,null===(e=e.parent))throw Error(i(402));e.depth===t.depth?re(e,t):oe(e,t)}function ae(e,t){var n=t.parent;if(null===n)throw Error(i(402));e.depth===n.depth?re(e,n):ae(e,n),t.context._currentValue2=t.value}function le(e){var t=ne;t!==e&&(null===t?se(e):null===e?ie(t):t.depth===e.depth?re(t,e):t.depth>e.depth?oe(t,e):ae(t,e),ne=e)}var ce={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function ue(e,t,n,r){var i=void 0!==e.state?e.state:null;e.updater=ce,e.props=n,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context="object"===typeof o&&null!==o?o._currentValue2:r,"function"===typeof(o=t.getDerivedStateFromProps)&&(i=null===(o=o(n,i))||void 0===o?i:L({},i,o),e.state=i),"function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate&&("function"===typeof e.UNSAFE_componentWillMount||"function"===typeof e.componentWillMount))if(t=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&ce.enqueueReplaceState(e,e.state,null),null!==s.queue&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&1===t.length)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];null!=(a="function"===typeof a?a.call(e,s,n,r):a)&&(i?(i=!1,s=L({},s,a)):L(s,a))}e.state=s}else s.queue=null}var he={id:1,overflow:""};function de(e,t,n){var r=e.id;e=e.overflow;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-fe(t)+i|n<<i|r,overflow:s+e}}return{id:1<<s|n<<i|r,overflow:e}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ye=null,ve=null,_e=null,be=null,we=!1,Se=!1,Ce=0,Ee=null,ke=0;function Te(){if(null===ye)throw Error(i(321));return ye}function xe(){if(0<ke)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function Ie(){return null===be?null===_e?(we=!1,_e=be=xe()):(we=!0,be=_e):null===be.next?(we=!1,be=be.next=xe()):(we=!0,be=be.next),be}function Re(){ve=ye=null,Se=!1,_e=null,ke=0,be=Ee=null}function Ne(e,t){return"function"===typeof t?t(e):t}function Pe(e,t,n){if(ye=Te(),be=Ie(),we){var r=be.queue;if(t=r.dispatch,null!==Ee&&void 0!==(n=Ee.get(r))){Ee.delete(r),r=be.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return be.memoizedState=r,[r,t]}return[be.memoizedState,t]}return e=e===Ne?"function"===typeof t?t():t:void 0!==n?n(t):t,be.memoizedState=e,e=(e=be.queue={last:null,dispatch:null}).dispatch=Oe.bind(null,ye,e),[be.memoizedState,e]}function Ae(e,t){if(ye=Te(),t=void 0===t?null:t,null!==(be=Ie())){var n=be.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!me(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),be.memoizedState=[e,t],e}function Oe(e,t,n){if(25<=ke)throw Error(i(301));if(e===ye)if(Se=!0,e={action:n,next:null},null===Ee&&(Ee=new Map),void 0===(n=Ee.get(t)))Ee.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function De(){throw Error(i(394))}function Le(){}var Me={readContext:function(e){return e._currentValue2},useContext:function(e){return Te(),e._currentValue2},useMemo:Ae,useReducer:Pe,useRef:function(e){ye=Te();var t=(be=Ie()).memoizedState;return null===t?(e={current:e},be.memoizedState=e):t},useState:function(e){return Pe(Ne,e)},useInsertionEffect:Le,useLayoutEffect:function(){},useCallback:function(e,t){return Ae((function(){return e}),t)},useImperativeHandle:Le,useEffect:Le,useDebugValue:Le,useDeferredValue:function(e){return Te(),e},useTransition:function(){return Te(),[!1,De]},useId:function(){var e=ve.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-fe(e)-1)).toString(32)+t;var n=Fe;if(null===n)throw Error(i(404));return t=Ce++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Te(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(i(407));return n()}},Fe=null,Ue=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function je(e){return console.error(e),null}function Ve(){}function ze(e,t,n,r,i,s,o,a){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&nt(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function Be(e,t,n,r,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function qe(e,t){if(null!=(e=e.onError(t))&&"string"!==typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function We(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function He(e,t,n,r,i){for(ye={},ve=t,Ce=0,e=n(r,i);Se;)Se=!1,Ce=0,ke+=1,be=null,e=n(r,i);return Re(),e}function Ke(e,t,n,r){var s=n.render(),o=r.childContextTypes;if(null!==o&&void 0!==o){var a=t.legacyContext;if("function"!==typeof n.getChildContext)r=a;else{for(var l in n=n.getChildContext())if(!(l in o))throw Error(i(108,Z(r)||"Unknown",l));r=L({},a,n)}t.legacyContext=r,$e(e,t,s),t.legacyContext=a}else $e(e,t,s)}function Ge(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function Qe(e,t,n,r,s){if("function"===typeof n)if(n.prototype&&n.prototype.isReactComponent){s=te(n,t.legacyContext);var o=n.contextType;ue(o=new n(r,"object"===typeof o&&null!==o?o._currentValue2:s),n,r,s),Ke(e,t,o,n)}else{s=He(e,t,n,r,o=te(n,t.legacyContext));var a=0!==Ce;if("object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof)ue(s,n,r,o),Ke(e,t,s,n);else if(a){r=t.treeContext,t.treeContext=de(r,1,0);try{$e(e,t,s)}finally{t.treeContext=r}}else $e(e,t,s)}else{if("string"!==typeof n){switch(n){case Y:case $:case j:case V:case U:case H:return void $e(e,t,r.children);case Q:throw Error(i(343));case W:e:{n=t.blockedBoundary,s=t.blockedSegment,o=r.fallback,r=r.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:a=new Set,errorDigest:null},c=Be(0,s.chunks.length,l,s.formatContext,!1,!1);s.children.push(c),s.lastPushedText=!1;var u=Be(0,0,null,s.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=u;try{if(Xe(e,t,r),e.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("\x3c!-- --\x3e"),u.status=1,et(l,u),0===l.pendingTasks)break e}catch(h){u.status=4,l.forceClientRender=!0,l.errorDigest=qe(e,h)}finally{t.blockedBoundary=n,t.blockedSegment=s}t=ze(e,o,n,c,a,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"===typeof n&&null!==n)switch(n.$$typeof){case q:if(r=He(e,t,n.render,r,s),0!==Ce){n=t.treeContext,t.treeContext=de(n,1,0);try{$e(e,t,r)}finally{t.treeContext=n}}else $e(e,t,r);return;case K:return void Qe(e,t,n=n.type,r=Ge(n,r),s);case z:if(s=r.children,n=n._context,r=r.value,o=n._currentValue2,n._currentValue2=r,ne=r={parent:a=ne,depth:null===a?0:a.depth+1,context:n,parentValue:o,value:r},t.context=r,$e(e,t,s),null===(e=ne))throw Error(i(403));return r=e.parentValue,e.context._currentValue2=r===X?e.context._defaultValue:r,e=ne=e.parent,void(t.context=e);case B:return void $e(e,t,r=(r=r.children)(n._currentValue2));case G:return void Qe(e,t,n=(s=n._init)(n._payload),r=Ge(n,r),void 0)}throw Error(i(130,null==n?n:typeof n,""))}switch(o=N((s=t.blockedSegment).chunks,n,r,e.responseState,s.formatContext),s.lastPushedText=!1,a=s.formatContext,s.formatContext=function(e,t,n){switch(t){case"select":return w(1,null!=n.value?n.value:n.defaultValue);case"svg":return w(2,null);case"math":return w(3,null);case"foreignObject":return w(1,null);case"table":return w(4,null);case"thead":case"tbody":case"tfoot":return w(5,null);case"colgroup":return w(7,null);case"tr":return w(6,null)}return 4<=e.insertionMode||0===e.insertionMode?w(1,null):e}(a,n,r),Xe(e,t,o),s.formatContext=a,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:s.chunks.push("</",n,">")}s.lastPushedText=!1}}function $e(e,t,n){if(t.node=n,"object"===typeof n&&null!==n){switch(n.$$typeof){case M:return void Qe(e,t,n.type,n.props,n.ref);case F:throw Error(i(257));case G:var r=n._init;return void $e(e,t,n=r(n._payload))}if(b(n))return void Ye(e,t,n);if(null===n||"object"!==typeof n?r=null:r="function"===typeof(r=J&&n[J]||n["@@iterator"])?r:null,r&&(r=r.call(n))){if(!(n=r.next()).done){var s=[];do{s.push(n.value),n=r.next()}while(!n.done);Ye(e,t,s)}return}throw e=Object.prototype.toString.call(n),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"===typeof n?(r=t.blockedSegment).lastPushedText=D(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText):"number"===typeof n&&((r=t.blockedSegment).lastPushedText=D(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function Ye(e,t,n){for(var r=n.length,i=0;i<r;i++){var s=t.treeContext;t.treeContext=de(s,r,i);try{Xe(e,t,n[i])}finally{t.treeContext=s}}}function Xe(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return $e(e,t,n)}catch(l){if(Re(),"object"!==typeof l||null===l||"function"!==typeof l.then)throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,le(s),l;n=l;var o=t.blockedSegment,a=Be(0,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=ze(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,le(s)}}function Je(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,tt(this,t,e)}function Ze(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===n?Error(i(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach((function(e){return Ze(e,t,n)})),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(r=t.onAllReady)())}function et(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&et(e,n)}else e.completedSegments.push(t)}function tt(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(i(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=Ve,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&et(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Je,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(et(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function nt(e){if(2!==e.status){var t=ne,n=Ue.current;Ue.current=Me;var r=Fe;Fe=e.responseState;try{var i,s=e.pingedTasks;for(i=0;i<s.length;i++){var o=s[i],a=e,l=o.blockedSegment;if(0===l.status){le(o.context);try{$e(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("\x3c!-- --\x3e"),o.abortSet.delete(o),l.status=1,tt(a,o.blockedBoundary,l)}catch(f){if(Re(),"object"===typeof f&&null!==f&&"function"===typeof f.then){var c=o.ping;f.then(c,c)}else{o.abortSet.delete(o),l.status=4;var u=o.blockedBoundary,h=f,d=qe(a,h);if(null===u?We(a,h):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=d,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,0===a.allPendingTasks)(0,a.onAllReady)()}}}}s.splice(0,i),null!==e.destination&&lt(e,e.destination)}catch(f){qe(e,f),We(e,f)}finally{Fe=r,Ue.current=n,n===Me&&le(t)}}}function rt(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=r.toString(16),t.push(e),t.push('"></template>');case 1:n.status=2;var s=!0;r=n.chunks;var o=0;n=n.children;for(var a=0;a<n.length;a++){for(s=n[a];o<s.index;o++)t.push(r[o]);s=it(e,t,s)}for(;o<r.length-1;o++)t.push(r[o]);return o<r.length&&(s=t.push(r[o])),s;default:throw Error(i(390))}}function it(e,t,n){var r=n.boundary;if(null===r)return rt(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)return e.responseState.generateStaticMarkup||(r=r.errorDigest,t.push("\x3c!--$!--\x3e"),t.push("<template"),r&&(t.push(' data-dgst="'),r=y(r),t.push(r),t.push('"')),t.push("></template>")),rt(e,t,n),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e");if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var s=e.responseState,o=s.nextSuspenseID++;return s=s.boundaryPrefix+o.toString(16),r=r.id=s,P(t,e.responseState,r),rt(e,t,n),t.push("\x3c!--/$--\x3e")}if(r.byteSize>e.progressiveChunkSize)return r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),P(t,e.responseState,r.id),rt(e,t,n),t.push("\x3c!--/$--\x3e");if(e.responseState.generateStaticMarkup||t.push("\x3c!--$--\x3e"),1!==(n=r.completedSegments).length)throw Error(i(391));return it(e,t,n[0]),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e")}function st(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');default:throw Error(i(397))}}(t,e.responseState,n.formatContext,n.id),it(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(i(397))}}(t,n.formatContext)}function ot(e,t,n){for(var r=n.completedSegments,s=0;s<r.length;s++)at(e,t,n,r[s]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===r)throw Error(i(395));return n=n.toString(16),t.push(r),t.push('","'),t.push(e.segmentPrefix),t.push(n),t.push('")<\/script>')}function at(e,t,n,r){if(2===r.status)return!0;var s=r.id;if(-1===s){if(-1===(r.id=n.rootSegmentID))throw Error(i(392));return st(e,t,r)}return st(e,t,r),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),s=s.toString(16),t.push(s),t.push('","'),t.push(e.placeholderPrefix),t.push(s),t.push('")<\/script>')}function lt(e,t){try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){it(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)t.push(r[n]);n<r.length&&t.push(r[n])}var s,o=e.clientRenderedBoundaries;for(s=0;s<o.length;s++){var a=o[s];r=t;var l=e.responseState,c=a.id,u=a.errorDigest,h=a.errorMessage,d=a.errorComponentStack;if(r.push(l.startInlineScript),l.sentClientRenderFunction?r.push('$RX("'):(l.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),null===c)throw Error(i(395));if(r.push(c),r.push('"'),u||h||d){r.push(",");var f=O(u||"");r.push(f)}if(h||d){r.push(",");var p=O(h||"");r.push(p)}if(d){r.push(",");var g=O(d);r.push(g)}if(!r.push(")<\/script>"))return e.destination=null,s++,void o.splice(0,s)}o.splice(0,s);var m=e.completedBoundaries;for(s=0;s<m.length;s++)if(!ot(e,t,m[s]))return e.destination=null,s++,void m.splice(0,s);m.splice(0,s);var y=e.partialBoundaries;for(s=0;s<y.length;s++){var v=y[s];e:{o=e,a=t;var _=v.completedSegments;for(l=0;l<_.length;l++)if(!at(o,a,v,_[l])){l++,_.splice(0,l);var b=!1;break e}_.splice(0,l),b=!0}if(!b)return e.destination=null,s++,void y.splice(0,s)}y.splice(0,s);var w=e.completedBoundaries;for(s=0;s<w.length;s++)if(!ot(e,t,w[s]))return e.destination=null,s++,void w.splice(0,s);w.splice(0,s)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.push(null)}}function ct(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return Ze(n,e,t)})),n.clear(),null!==e.destination&&lt(e,e.destination)}catch(r){qe(e,r),We(e,r)}}function ut(){}function ht(e,t,n,r){var s=!1,o=null,a="",l={push:function(e){return null!==e&&(a+=e),!0},destroy:function(e){s=!0,o=e}},c=!1;if(e=function(e,t,n,r,i,s,o,a,l){var c=[],u=new Set;return(n=Be(t={destination:null,responseState:t,progressiveChunkSize:void 0===r?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===i?je:i,onAllReady:void 0===s?Ve:s,onShellReady:void 0===o?Ve:o,onShellError:void 0===a?Ve:a,onFatalError:void 0===l?Ve:l},0,null,n,!1,!1)).parentFlushed=!0,e=ze(t,e,null,n,u,ee,null,he),c.push(e),t}(e,function(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,ut,void 0,(function(){c=!0}),void 0,void 0),nt(e),ct(e,r),1===e.status)e.status=2,l.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=l;try{lt(e,l)}catch(u){qe(e,u),We(e,u)}}if(s)throw o;if(!c)throw Error(i(426));return a}t.renderToNodeStream=function(){throw Error(i(207))},t.renderToStaticMarkup=function(e,t){return ht(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.renderToStaticNodeStream=function(){throw Error(i(208))},t.renderToString=function(e,t){return ht(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.version="18.2.0"},424:(e,t,n)=>{"use strict";var r=n(791);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=null,o=0;function a(e,t){if(0!==t.length)if(512<t.length)0<o&&(e.enqueue(new Uint8Array(s.buffer,0,o)),s=new Uint8Array(512),o=0),e.enqueue(t);else{var n=s.length-o;n<t.length&&(0===n?e.enqueue(s):(s.set(t.subarray(0,n),o),e.enqueue(s),t=t.subarray(n)),s=new Uint8Array(512),o=0),s.set(t,o),o+=t.length}}function l(e,t){return a(e,t),!0}function c(e){s&&0<o&&(e.enqueue(new Uint8Array(s.buffer,0,o)),s=null,o=0)}var u=new TextEncoder;function h(e){return u.encode(e)}function d(e){return u.encode(e)}function f(e,t){"function"===typeof e.error?e.error(t):e.close()}var p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(e){return!!p.call(y,e)||!p.call(m,e)&&(g.test(e)?y[e]=!0:(m[e]=!0,!1))}function _(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){b[e]=new _(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];b[t]=new _(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){b[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){b[e]=new _(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){b[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){b[e]=new _(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){b[e]=new _(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){b[e]=new _(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){b[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)}));var w=/[\-:]([a-z])/g;function S(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(w,S);b[t]=new _(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(w,S);b[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(w,S);b[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){b[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)})),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){b[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)}));var C={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E=["Webkit","ms","Moz","O"];Object.keys(C).forEach((function(e){E.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),C[t]=C[e]}))}));var k=/["'&<>]/;function T(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=k.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=t}e=i!==n?r+e.substring(i,n):r}return e}var x=/([A-Z])/g,I=/^ms-/,R=Array.isArray,N=d("<script>"),P=d("<\/script>"),A=d('<script src="'),O=d('<script type="module" src="'),D=d('" async=""><\/script>'),L=/(<\/|<)(s)(cript)/gi;function M(e,t,n,r){return t+("s"===n?"\\u0073":"\\u0053")+r}function F(e,t){return{insertionMode:e,selectedValue:t}}var U=d("\x3c!-- --\x3e");function j(e,t,n,r){return""===t?r:(r&&e.push(U),e.push(h(T(t))),!0)}var V=new Map,z=d(' style="'),B=d(":"),q=d(";");function W(e,t,n){if("object"!==typeof n)throw Error(i(62));for(var r in t=!0,n)if(p.call(n,r)){var s=n[r];if(null!=s&&"boolean"!==typeof s&&""!==s){if(0===r.indexOf("--")){var o=h(T(r));s=h(T((""+s).trim()))}else{o=r;var a=V.get(o);void 0!==a||(a=d(T(o.replace(x,"-$1").toLowerCase().replace(I,"-ms-"))),V.set(o,a)),o=a,s="number"===typeof s?0===s||p.call(C,r)?h(""+s):h(s+"px"):h(T((""+s).trim()))}t?(t=!1,e.push(z,o,B,s)):e.push(q,o,B,s)}}t||e.push(G)}var H=d(" "),K=d('="'),G=d('"'),Q=d('=""');function $(e,t,n,r){switch(n){case"style":return void W(e,t,r);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])if(null!==(t=b.hasOwnProperty(n)?b[n]:null)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=h(t.attributeName),t.type){case 3:r&&e.push(H,n,Q);break;case 4:!0===r?e.push(H,n,Q):!1!==r&&e.push(H,n,K,h(T(r)),G);break;case 5:isNaN(r)||e.push(H,n,K,h(T(r)),G);break;case 6:!isNaN(r)&&1<=r&&e.push(H,n,K,h(T(r)),G);break;default:t.sanitizeURL&&(r=""+r),e.push(H,n,K,h(T(r)),G)}}else if(v(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if("data-"!==(t=n.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(H,h(n),K,h(T(r)),G)}}var Y=d(">"),X=d("/>");function J(e,t,n){if(null!=t){if(null!=n)throw Error(i(60));if("object"!==typeof t||!("__html"in t))throw Error(i(61));null!==(t=t.__html)&&void 0!==t&&e.push(h(""+t))}}var Z=d(' selected=""');function ee(e,t,n,r){e.push(ie(n));var i,s=n=null;for(i in t)if(p.call(t,i)){var o=t[i];if(null!=o)switch(i){case"children":n=o;break;case"dangerouslySetInnerHTML":s=o;break;default:$(e,r,i,o)}}return e.push(Y),J(e,s,n),"string"===typeof n?(e.push(h(T(n))),null):n}var te=d("\n"),ne=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,re=new Map;function ie(e){var t=re.get(e);if(void 0===t){if(!ne.test(e))throw Error(i(65,e));t=d("<"+e),re.set(e,t)}return t}var se=d("<!DOCTYPE html>");function oe(e,t,n,s,o){switch(t){case"select":e.push(ie("select"));var a=null,l=null;for(f in n)if(p.call(n,f)){var c=n[f];if(null!=c)switch(f){case"children":a=c;break;case"dangerouslySetInnerHTML":l=c;break;case"defaultValue":case"value":break;default:$(e,s,f,c)}}return e.push(Y),J(e,l,a),a;case"option":l=o.selectedValue,e.push(ie("option"));var u=c=null,d=null,f=null;for(a in n)if(p.call(n,a)){var g=n[a];if(null!=g)switch(a){case"children":c=g;break;case"selected":d=g;break;case"dangerouslySetInnerHTML":f=g;break;case"value":u=g;default:$(e,s,a,g)}}if(null!=l)if(n=null!==u?""+u:function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(c),R(l)){for(s=0;s<l.length;s++)if(""+l[s]===n){e.push(Z);break}}else""+l===n&&e.push(Z);else d&&e.push(Z);return e.push(Y),J(e,f,c),c;case"textarea":for(c in e.push(ie("textarea")),f=l=a=null,n)if(p.call(n,c)&&null!=(u=n[c]))switch(c){case"children":f=u;break;case"value":a=u;break;case"defaultValue":l=u;break;case"dangerouslySetInnerHTML":throw Error(i(91));default:$(e,s,c,u)}if(null===a&&null!==l&&(a=l),e.push(Y),null!=f){if(null!=a)throw Error(i(92));if(R(f)&&1<f.length)throw Error(i(93));a=""+f}return"string"===typeof a&&"\n"===a[0]&&e.push(te),null!==a&&e.push(h(T(""+a))),null;case"input":for(l in e.push(ie("input")),u=f=c=a=null,n)if(p.call(n,l)&&null!=(d=n[l]))switch(l){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,"input"));case"defaultChecked":u=d;break;case"defaultValue":c=d;break;case"checked":f=d;break;case"value":a=d;break;default:$(e,s,l,d)}return null!==f?$(e,s,"checked",f):null!==u&&$(e,s,"checked",u),null!==a?$(e,s,"value",a):null!==c&&$(e,s,"value",c),e.push(X),null;case"menuitem":for(var m in e.push(ie("menuitem")),n)if(p.call(n,m)&&null!=(a=n[m]))switch(m){case"children":case"dangerouslySetInnerHTML":throw Error(i(400));default:$(e,s,m,a)}return e.push(Y),null;case"title":for(g in e.push(ie("title")),a=null,n)if(p.call(n,g)&&null!=(l=n[g]))switch(g){case"children":a=l;break;case"dangerouslySetInnerHTML":throw Error(i(434));default:$(e,s,g,l)}return e.push(Y),a;case"listing":case"pre":for(u in e.push(ie(t)),l=a=null,n)if(p.call(n,u)&&null!=(c=n[u]))switch(u){case"children":a=c;break;case"dangerouslySetInnerHTML":l=c;break;default:$(e,s,u,c)}if(e.push(Y),null!=l){if(null!=a)throw Error(i(60));if("object"!==typeof l||!("__html"in l))throw Error(i(61));null!==(n=l.__html)&&void 0!==n&&("string"===typeof n&&0<n.length&&"\n"===n[0]?e.push(te,h(n)):e.push(h(""+n)))}return"string"===typeof a&&"\n"===a[0]&&e.push(te),a;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var y in e.push(ie(t)),n)if(p.call(n,y)&&null!=(a=n[y]))switch(y){case"children":case"dangerouslySetInnerHTML":throw Error(i(399,t));default:$(e,s,y,a)}return e.push(X),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return ee(e,n,t,s);case"html":return 0===o.insertionMode&&e.push(se),ee(e,n,t,s);default:if(-1===t.indexOf("-")&&"string"!==typeof n.is)return ee(e,n,t,s);for(d in e.push(ie(t)),l=a=null,n)if(p.call(n,d)&&null!=(c=n[d]))switch(d){case"children":a=c;break;case"dangerouslySetInnerHTML":l=c;break;case"style":W(e,s,c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:v(d)&&"function"!==typeof c&&"symbol"!==typeof c&&e.push(H,h(d),K,h(T(c)),G)}return e.push(Y),J(e,l,a),a}}var ae=d("</"),le=d(">"),ce=d('<template id="'),ue=d('"></template>'),he=d("\x3c!--$--\x3e"),de=d('\x3c!--$?--\x3e<template id="'),fe=d('"></template>'),pe=d("\x3c!--$!--\x3e"),ge=d("\x3c!--/$--\x3e"),me=d("<template"),ye=d('"'),ve=d(' data-dgst="');d(' data-msg="'),d(' data-stck="');var _e=d("></template>");function be(e,t,n){if(a(e,de),null===n)throw Error(i(395));return a(e,n),l(e,fe)}var we=d('<div hidden id="'),Se=d('">'),Ce=d("</div>"),Ee=d('<svg aria-hidden="true" style="display:none" id="'),ke=d('">'),Te=d("</svg>"),xe=d('<math aria-hidden="true" style="display:none" id="'),Ie=d('">'),Re=d("</math>"),Ne=d('<table hidden id="'),Pe=d('">'),Ae=d("</table>"),Oe=d('<table hidden><tbody id="'),De=d('">'),Le=d("</tbody></table>"),Me=d('<table hidden><tr id="'),Fe=d('">'),Ue=d("</tr></table>"),je=d('<table hidden><colgroup id="'),Ve=d('">'),ze=d("</colgroup></table>");var Be=d('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),qe=d('$RS("'),We=d('","'),He=d('")<\/script>'),Ke=d('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),Ge=d('$RC("'),Qe=d('","'),$e=d('")<\/script>'),Ye=d('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Xe=d('$RX("'),Je=d('"'),Ze=d(")<\/script>"),et=d(","),tt=/[<\u2028\u2029]/g;function nt(e){return JSON.stringify(e).replace(tt,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}var rt=Object.assign,it=Symbol.for("react.element"),st=Symbol.for("react.portal"),ot=Symbol.for("react.fragment"),at=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),ct=Symbol.for("react.provider"),ut=Symbol.for("react.context"),ht=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),mt=Symbol.for("react.scope"),yt=Symbol.for("react.debug_trace_mode"),vt=Symbol.for("react.legacy_hidden"),_t=Symbol.for("react.default_value"),bt=Symbol.iterator;function wt(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ot:return"Fragment";case st:return"Portal";case lt:return"Profiler";case at:return"StrictMode";case dt:return"Suspense";case ft:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ut:return(e.displayName||"Context")+".Consumer";case ct:return(e._context.displayName||"Context")+".Provider";case ht:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case pt:return null!==(t=e.displayName||null)?t:wt(e.type)||"Memo";case gt:t=e._payload,e=e._init;try{return wt(e(t))}catch(n){}}return null}var St={};function Ct(e,t){if(!(e=e.contextTypes))return St;var n,r={};for(n in e)r[n]=t[n];return r}var Et=null;function kt(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(i(401))}else{if(null===n)throw Error(i(401));kt(e,n)}t.context._currentValue=t.value}}function Tt(e){e.context._currentValue=e.parentValue,null!==(e=e.parent)&&Tt(e)}function xt(e){var t=e.parent;null!==t&&xt(t),e.context._currentValue=e.value}function It(e,t){if(e.context._currentValue=e.parentValue,null===(e=e.parent))throw Error(i(402));e.depth===t.depth?kt(e,t):It(e,t)}function Rt(e,t){var n=t.parent;if(null===n)throw Error(i(402));e.depth===n.depth?kt(e,n):Rt(e,n),t.context._currentValue=t.value}function Nt(e){var t=Et;t!==e&&(null===t?xt(e):null===e?Tt(t):t.depth===e.depth?kt(t,e):t.depth>e.depth?It(t,e):Rt(t,e),Et=e)}var Pt={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function At(e,t,n,r){var i=void 0!==e.state?e.state:null;e.updater=Pt,e.props=n,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context="object"===typeof o&&null!==o?o._currentValue:r,"function"===typeof(o=t.getDerivedStateFromProps)&&(i=null===(o=o(n,i))||void 0===o?i:rt({},i,o),e.state=i),"function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate&&("function"===typeof e.UNSAFE_componentWillMount||"function"===typeof e.componentWillMount))if(t=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&Pt.enqueueReplaceState(e,e.state,null),null!==s.queue&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&1===t.length)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];null!=(a="function"===typeof a?a.call(e,s,n,r):a)&&(i?(i=!1,s=rt({},s,a)):rt(s,a))}e.state=s}else s.queue=null}var Ot={id:1,overflow:""};function Dt(e,t,n){var r=e.id;e=e.overflow;var i=32-Lt(r)-1;r&=~(1<<i),n+=1;var s=32-Lt(t)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-Lt(t)+i|n<<i|r,overflow:s+e}}return{id:1<<s|n<<i|r,overflow:e}}var Lt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Mt(e)/Ft|0)|0},Mt=Math.log,Ft=Math.LN2;var Ut="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},jt=null,Vt=null,zt=null,Bt=null,qt=!1,Wt=!1,Ht=0,Kt=null,Gt=0;function Qt(){if(null===jt)throw Error(i(321));return jt}function $t(){if(0<Gt)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function Yt(){return null===Bt?null===zt?(qt=!1,zt=Bt=$t()):(qt=!0,Bt=zt):null===Bt.next?(qt=!1,Bt=Bt.next=$t()):(qt=!0,Bt=Bt.next),Bt}function Xt(){Vt=jt=null,Wt=!1,zt=null,Gt=0,Bt=Kt=null}function Jt(e,t){return"function"===typeof t?t(e):t}function Zt(e,t,n){if(jt=Qt(),Bt=Yt(),qt){var r=Bt.queue;if(t=r.dispatch,null!==Kt&&void 0!==(n=Kt.get(r))){Kt.delete(r),r=Bt.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return Bt.memoizedState=r,[r,t]}return[Bt.memoizedState,t]}return e=e===Jt?"function"===typeof t?t():t:void 0!==n?n(t):t,Bt.memoizedState=e,e=(e=Bt.queue={last:null,dispatch:null}).dispatch=tn.bind(null,jt,e),[Bt.memoizedState,e]}function en(e,t){if(jt=Qt(),t=void 0===t?null:t,null!==(Bt=Yt())){var n=Bt.memoizedState;if(null!==n&&null!==t){var r=n[1];e:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!Ut(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),Bt.memoizedState=[e,t],e}function tn(e,t,n){if(25<=Gt)throw Error(i(301));if(e===jt)if(Wt=!0,e={action:n,next:null},null===Kt&&(Kt=new Map),void 0===(n=Kt.get(t)))Kt.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function nn(){throw Error(i(394))}function rn(){}var sn={readContext:function(e){return e._currentValue},useContext:function(e){return Qt(),e._currentValue},useMemo:en,useReducer:Zt,useRef:function(e){jt=Qt();var t=(Bt=Yt()).memoizedState;return null===t?(e={current:e},Bt.memoizedState=e):t},useState:function(e){return Zt(Jt,e)},useInsertionEffect:rn,useLayoutEffect:function(){},useCallback:function(e,t){return en((function(){return e}),t)},useImperativeHandle:rn,useEffect:rn,useDebugValue:rn,useDeferredValue:function(e){return Qt(),e},useTransition:function(){return Qt(),[!1,nn]},useId:function(){var e=Vt.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-Lt(e)-1)).toString(32)+t;var n=on;if(null===n)throw Error(i(404));return t=Ht++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Qt(),t(e._source)},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(i(407));return n()}},on=null,an=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function ln(e){return console.error(e),null}function cn(){}function un(e,t,n,r,i,s,o,a){e.allPendingTasks++,null===n?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var t=e.pingedTasks;t.push(l),1===t.length&&kn(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function hn(e,t,n,r,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function dn(e,t){if(null!=(e=e.onError(t))&&"string"!==typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function fn(e,t){var n=e.onShellError;n(t),(n=e.onFatalError)(t),null!==e.destination?(e.status=2,f(e.destination,t)):(e.status=1,e.fatalError=t)}function pn(e,t,n,r,i){for(jt={},Vt=t,Ht=0,e=n(r,i);Wt;)Wt=!1,Ht=0,Gt+=1,Bt=null,e=n(r,i);return Xt(),e}function gn(e,t,n,r){var s=n.render(),o=r.childContextTypes;if(null!==o&&void 0!==o){var a=t.legacyContext;if("function"!==typeof n.getChildContext)r=a;else{for(var l in n=n.getChildContext())if(!(l in o))throw Error(i(108,wt(r)||"Unknown",l));r=rt({},a,n)}t.legacyContext=r,vn(e,t,s),t.legacyContext=a}else vn(e,t,s)}function mn(e,t){if(e&&e.defaultProps){for(var n in t=rt({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function yn(e,t,n,r,s){if("function"===typeof n)if(n.prototype&&n.prototype.isReactComponent){s=Ct(n,t.legacyContext);var o=n.contextType;At(o=new n(r,"object"===typeof o&&null!==o?o._currentValue:s),n,r,s),gn(e,t,o,n)}else{s=pn(e,t,n,r,o=Ct(n,t.legacyContext));var a=0!==Ht;if("object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof)At(s,n,r,o),gn(e,t,s,n);else if(a){r=t.treeContext,t.treeContext=Dt(r,1,0);try{vn(e,t,s)}finally{t.treeContext=r}}else vn(e,t,s)}else{if("string"!==typeof n){switch(n){case vt:case yt:case at:case lt:case ot:case ft:return void vn(e,t,r.children);case mt:throw Error(i(343));case dt:e:{n=t.blockedBoundary,s=t.blockedSegment,o=r.fallback,r=r.children;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:a=new Set,errorDigest:null},c=hn(0,s.chunks.length,l,s.formatContext,!1,!1);s.children.push(c),s.lastPushedText=!1;var u=hn(0,0,null,s.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=u;try{if(bn(e,t,r),u.lastPushedText&&u.textEmbedded&&u.chunks.push(U),u.status=1,Cn(l,u),0===l.pendingTasks)break e}catch(d){u.status=4,l.forceClientRender=!0,l.errorDigest=dn(e,d)}finally{t.blockedBoundary=n,t.blockedSegment=s}t=un(e,o,n,c,a,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"===typeof n&&null!==n)switch(n.$$typeof){case ht:if(r=pn(e,t,n.render,r,s),0!==Ht){n=t.treeContext,t.treeContext=Dt(n,1,0);try{vn(e,t,r)}finally{t.treeContext=n}}else vn(e,t,r);return;case pt:return void yn(e,t,n=n.type,r=mn(n,r),s);case ct:if(s=r.children,n=n._context,r=r.value,o=n._currentValue,n._currentValue=r,Et=r={parent:a=Et,depth:null===a?0:a.depth+1,context:n,parentValue:o,value:r},t.context=r,vn(e,t,s),null===(e=Et))throw Error(i(403));return r=e.parentValue,e.context._currentValue=r===_t?e.context._defaultValue:r,e=Et=e.parent,void(t.context=e);case ut:return void vn(e,t,r=(r=r.children)(n._currentValue));case gt:return void yn(e,t,n=(s=n._init)(n._payload),r=mn(n,r),void 0)}throw Error(i(130,null==n?n:typeof n,""))}switch(o=oe((s=t.blockedSegment).chunks,n,r,e.responseState,s.formatContext),s.lastPushedText=!1,a=s.formatContext,s.formatContext=function(e,t,n){switch(t){case"select":return F(1,null!=n.value?n.value:n.defaultValue);case"svg":return F(2,null);case"math":return F(3,null);case"foreignObject":return F(1,null);case"table":return F(4,null);case"thead":case"tbody":case"tfoot":return F(5,null);case"colgroup":return F(7,null);case"tr":return F(6,null)}return 4<=e.insertionMode||0===e.insertionMode?F(1,null):e}(a,n,r),bn(e,t,o),s.formatContext=a,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:s.chunks.push(ae,h(n),le)}s.lastPushedText=!1}}function vn(e,t,n){if(t.node=n,"object"===typeof n&&null!==n){switch(n.$$typeof){case it:return void yn(e,t,n.type,n.props,n.ref);case st:throw Error(i(257));case gt:var r=n._init;return void vn(e,t,n=r(n._payload))}if(R(n))return void _n(e,t,n);if(null===n||"object"!==typeof n?r=null:r="function"===typeof(r=bt&&n[bt]||n["@@iterator"])?r:null,r&&(r=r.call(n))){if(!(n=r.next()).done){var s=[];do{s.push(n.value),n=r.next()}while(!n.done);_n(e,t,s)}return}throw e=Object.prototype.toString.call(n),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}"string"===typeof n?(r=t.blockedSegment).lastPushedText=j(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText):"number"===typeof n&&((r=t.blockedSegment).lastPushedText=j(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function _n(e,t,n){for(var r=n.length,i=0;i<r;i++){var s=t.treeContext;t.treeContext=Dt(s,r,i);try{bn(e,t,n[i])}finally{t.treeContext=s}}}function bn(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return vn(e,t,n)}catch(l){if(Xt(),"object"!==typeof l||null===l||"function"!==typeof l.then)throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,Nt(s),l;n=l;var o=t.blockedSegment,a=hn(0,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=un(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,Nt(s)}}function wn(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,En(this,t,e)}function Sn(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,null===r?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=void 0===n?Error(i(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach((function(e){return Sn(e,t,n)})),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(r=t.onAllReady)())}function Cn(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1===n.status&&Cn(e,n)}else e.completedSegments.push(t)}function En(e,t,n){if(null===t){if(n.parentFlushed){if(null!==e.completedRootSegment)throw Error(i(389));e.completedRootSegment=n}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=cn,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(n.parentFlushed&&1===n.status&&Cn(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(wn,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&1===n.status&&(Cn(t,n),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function kn(e){if(2!==e.status){var t=Et,n=an.current;an.current=sn;var r=on;on=e.responseState;try{var i,s=e.pingedTasks;for(i=0;i<s.length;i++){var o=s[i],a=e,l=o.blockedSegment;if(0===l.status){Nt(o.context);try{vn(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(U),o.abortSet.delete(o),l.status=1,En(a,o.blockedBoundary,l)}catch(f){if(Xt(),"object"===typeof f&&null!==f&&"function"===typeof f.then){var c=o.ping;f.then(c,c)}else{o.abortSet.delete(o),l.status=4;var u=o.blockedBoundary,h=f,d=dn(a,h);if(null===u?fn(a,h):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=d,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,0===a.allPendingTasks)(0,a.onAllReady)()}}}}s.splice(0,i),null!==e.destination&&Pn(e,e.destination)}catch(f){dn(e,f),fn(e,f)}finally{on=r,an.current=n,n===sn&&Nt(t)}}}function Tn(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,a(t,ce),a(t,e.placeholderPrefix),a(t,e=h(r.toString(16))),l(t,ue);case 1:n.status=2;var s=!0;r=n.chunks;var o=0;n=n.children;for(var c=0;c<n.length;c++){for(s=n[c];o<s.index;o++)a(t,r[o]);s=xn(e,t,s)}for(;o<r.length-1;o++)a(t,r[o]);return o<r.length&&(s=l(t,r[o])),s;default:throw Error(i(390))}}function xn(e,t,n){var r=n.boundary;if(null===r)return Tn(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,l(t,pe),a(t,me),r&&(a(t,ve),a(t,h(T(r))),a(t,ye)),l(t,_e),Tn(e,t,n);else if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var s=e.responseState,o=s.nextSuspenseID++;s=d(s.boundaryPrefix+o.toString(16)),r=r.id=s,be(t,e.responseState,r),Tn(e,t,n)}else if(r.byteSize>e.progressiveChunkSize)r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),be(t,e.responseState,r.id),Tn(e,t,n);else{if(l(t,he),1!==(n=r.completedSegments).length)throw Error(i(391));xn(e,t,n[0])}return l(t,ge)}function In(e,t,n){return function(e,t,n,r){switch(n.insertionMode){case 0:case 1:return a(e,we),a(e,t.segmentPrefix),a(e,h(r.toString(16))),l(e,Se);case 2:return a(e,Ee),a(e,t.segmentPrefix),a(e,h(r.toString(16))),l(e,ke);case 3:return a(e,xe),a(e,t.segmentPrefix),a(e,h(r.toString(16))),l(e,Ie);case 4:return a(e,Ne),a(e,t.segmentPrefix),a(e,h(r.toString(16))),l(e,Pe);case 5:return a(e,Oe),a(e,t.segmentPrefix),a(e,h(r.toString(16))),l(e,De);case 6:return a(e,Me),a(e,t.segmentPrefix),a(e,h(r.toString(16))),l(e,Fe);case 7:return a(e,je),a(e,t.segmentPrefix),a(e,h(r.toString(16))),l(e,Ve);default:throw Error(i(397))}}(t,e.responseState,n.formatContext,n.id),xn(e,t,n),function(e,t){switch(t.insertionMode){case 0:case 1:return l(e,Ce);case 2:return l(e,Te);case 3:return l(e,Re);case 4:return l(e,Ae);case 5:return l(e,Le);case 6:return l(e,Ue);case 7:return l(e,ze);default:throw Error(i(397))}}(t,n.formatContext)}function Rn(e,t,n){for(var r=n.completedSegments,s=0;s<r.length;s++)Nn(e,t,n,r[s]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,a(t,e.startInlineScript),e.sentCompleteBoundaryFunction?a(t,Ge):(e.sentCompleteBoundaryFunction=!0,a(t,Ke)),null===r)throw Error(i(395));return n=h(n.toString(16)),a(t,r),a(t,Qe),a(t,e.segmentPrefix),a(t,n),l(t,$e)}function Nn(e,t,n,r){if(2===r.status)return!0;var s=r.id;if(-1===s){if(-1===(r.id=n.rootSegmentID))throw Error(i(392));return In(e,t,r)}return In(e,t,r),a(t,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?a(t,qe):(e.sentCompleteSegmentFunction=!0,a(t,Be)),a(t,e.segmentPrefix),a(t,s=h(s.toString(16))),a(t,We),a(t,e.placeholderPrefix),a(t,s),l(t,He)}function Pn(e,t){s=new Uint8Array(512),o=0;try{var n=e.completedRootSegment;if(null!==n&&0===e.pendingRootTasks){xn(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)a(t,r[n]);n<r.length&&l(t,r[n])}var u,d=e.clientRenderedBoundaries;for(u=0;u<d.length;u++){var f=d[u];r=t;var p=e.responseState,g=f.id,m=f.errorDigest,y=f.errorMessage,v=f.errorComponentStack;if(a(r,p.startInlineScript),p.sentClientRenderFunction?a(r,Xe):(p.sentClientRenderFunction=!0,a(r,Ye)),null===g)throw Error(i(395));if(a(r,g),a(r,Je),(m||y||v)&&(a(r,et),a(r,h(nt(m||"")))),(y||v)&&(a(r,et),a(r,h(nt(y||"")))),v&&(a(r,et),a(r,h(nt(v)))),!l(r,Ze))return e.destination=null,u++,void d.splice(0,u)}d.splice(0,u);var _=e.completedBoundaries;for(u=0;u<_.length;u++)if(!Rn(e,t,_[u]))return e.destination=null,u++,void _.splice(0,u);_.splice(0,u),c(t),s=new Uint8Array(512),o=0;var b=e.partialBoundaries;for(u=0;u<b.length;u++){var w=b[u];e:{d=e,f=t;var S=w.completedSegments;for(p=0;p<S.length;p++)if(!Nn(d,f,w,S[p])){p++,S.splice(0,p);var C=!1;break e}S.splice(0,p),C=!0}if(!C)return e.destination=null,u++,void b.splice(0,u)}b.splice(0,u);var E=e.completedBoundaries;for(u=0;u<E.length;u++)if(!Rn(e,t,E[u]))return e.destination=null,u++,void E.splice(0,u);E.splice(0,u)}finally{c(t),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.close()}}function An(e,t){try{var n=e.abortableTasks;n.forEach((function(n){return Sn(n,e,t)})),n.clear(),null!==e.destination&&Pn(e,e.destination)}catch(r){dn(e,r),fn(e,r)}}t.renderToReadableStream=function(e,t){return new Promise((function(n,r){var i,s,o=new Promise((function(e,t){s=e,i=t})),a=function(e,t,n,r,i,s,o,a,l){var c=[],u=new Set;return(n=hn(t={destination:null,responseState:t,progressiveChunkSize:void 0===r?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===i?ln:i,onAllReady:void 0===s?cn:s,onShellReady:void 0===o?cn:o,onShellError:void 0===a?cn:a,onFatalError:void 0===l?cn:l},0,null,n,!1,!1)).parentFlushed=!0,e=un(t,e,null,n,u,St,null,Ot),c.push(e),t}(e,function(e,t,n,r,i){e=void 0===e?"":e,t=void 0===t?N:d('<script nonce="'+T(t)+'">');var s=[];if(void 0!==n&&s.push(t,h((""+n).replace(L,M)),P),void 0!==r)for(n=0;n<r.length;n++)s.push(A,h(T(r[n])),D);if(void 0!==i)for(r=0;r<i.length;r++)s.push(O,h(T(i[r])),D);return{bootstrapChunks:s,startInlineScript:t,placeholderPrefix:d(e+"P:"),segmentPrefix:d(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),function(e){return F("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,s,(function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===a.status)a.status=2,f(e,a.fatalError);else if(2!==a.status&&null===a.destination){a.destination=e;try{Pn(a,e)}catch(t){dn(a,t),fn(a,t)}}},cancel:function(){An(a)}},{highWaterMark:0});e.allReady=o,n(e)}),(function(e){o.catch((function(){})),r(e)}),i);if(t&&t.signal){var l=t.signal,c=function(){An(a,l.reason),l.removeEventListener("abort",c)};l.addEventListener("abort",c)}kn(a)}))},t.version="18.2.0"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),x=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case k:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ee=null;function ke(e){if(e=_i(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Te(e){Ce?Ee?Ee.push(e):Ee=[e]:Ce=e}function xe(){if(Ce){var e=Ce,t=Ee;if(Ee=Ce=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Re(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==Ce||null!==Ee)&&(Re(),xe())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,Ct,Et,kt,Tt=!1,xt=[],It=null,Rt=null,Nt=null,Pt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(jt),At.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Rt&&zt(Rt,e),null!==Nt&&zt(Nt,e),Pt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Kt(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Rt=Mt(Rt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&wt(s),null===(s=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=vi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),bn=sn(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function kn(){return En}var Tn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(Tn),In=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Pn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Hn(t,Gn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function sr(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Cr={},Er={};function kr(e){if(Cr[e])return Cr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Cr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=kr("animationend"),xr=kr("animationiteration"),Ir=kr("animationstart"),Rr=kr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Nr.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Tr,"onAnimationEnd"),Ar(xr,"onAnimationIteration"),Ar(Ir,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=we(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Tr:case xr:case Ir:l=yn;break;case Rr:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ae(p,d))&&u.push(Hr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=d;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Wn(a))if(Xn)m=or;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,_)).length&&(_=new bn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=zn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Ae(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ae(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Ae(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var Si=[],Ci=-1;function Ei(e){return{current:e}}function ki(e){0>Ci||(e.current=Si[Ci],Si[Ci]=null,Ci--)}function Ti(e,t){Ci++,Si[Ci]=e.current,e.current=t}var xi={},Ii=Ei(xi),Ri=Ei(!1),Ni=xi;function Pi(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){ki(Ri),ki(Ii)}function Di(e,t,n){if(Ii.current!==xi)throw Error(s(168));Ti(Ii,t),Ti(Ri,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ni=Ii.current,Ti(Ii,e),Ti(Ri,Ri.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,ki(Ri),ki(Ii),Ti(Ii,e)):ki(Ri),Ti(Ri,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{_t=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ei(null),vs=null,_s=null,bs=null;function ws(){bs=_s=vs=null}function Ss(e){var t=ys.current;ki(ys),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){vs=e,bs=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===vs)throw Error(s(308));_s=e,vs.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Ts=null;function xs(e){null===Ts?Ts=[e]:Ts.push(e)}function Is(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function As(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,xs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Os(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Os(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Os(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=ks(s):(i=Ai(t)?Ni:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ks(s):(s=Ai(t)?Ni:Ii.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function $s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===C?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ks(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ks(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case S:return(t=jc(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case A:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(i,h),is&&Ji(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var _=f(i,g,v.value,c);if(null===_){null===g&&(g=y);break}e&&g&&null===_.alternate&&t(i,g),a=o(_,a,m),null===h?u=_:h.sibling=_,h=_,g=y}if(v.done)return n(i,g),is&&Ji(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(i,e)})),is&&Ji(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===C&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===C){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===C?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Ks(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case A:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(L(o))return m(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ys=$s(!0),Xs=$s(!1),Js={},Zs=Ei(Js),eo=Ei(Js),to=Ei(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Zs),Ti(Zs,t)}function io(){ki(Zs),ki(eo),ki(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Ti(eo,e),Ti(Zs,n))}function oo(e){eo.current===e&&(ki(Zs),ki(eo))}var ao=Ei(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,go=null,mo=null,yo=null,vo=!1,_o=!1,bo=0,wo=0;function So(){throw Error(s(321))}function Co(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_o){o=0;do{if(_o=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(_o)}if(ho.current=oa,t=null!==mo&&null!==mo.next,po=0,yo=mo=go=null,vo=!1,t)throw Error(s(300));return e}function ko(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?go.memoizedState=yo=e:yo=yo.next=e,yo}function xo(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?go.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?go.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function Ro(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,go.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,go.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ao(e,t){var n=go,r=xo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Rs(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return xo().memoizedState}function zo(e,t,n,r){var i=To();go.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=xo();r=void 0===r?null:r;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==r&&Co(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}go.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Co(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),go.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function ea(){return xo().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Is(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,xs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Is(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===go||null!==t&&t===go}function ia(e,t){_o=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:ks,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:ks,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=go,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Nl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:ks,useCallback:Yo,useContext:ks,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(xo(),mo.memoizedState,e)},useTransition:function(){return[Ro(Io)[0],xo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:ea,unstable_isNewReconciler:!1},ca={readContext:ks,useCallback:Yo,useContext:ks,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=xo();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[No(Io)[0],xo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,t)},n}function ga(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=b.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?Xs(t,null,n,r):Ys(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=Eo(e,t,n,r,s,i),n=ko(),null===e||ba?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ca(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return xa(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Dl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Ol),Ol|=r;return wa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var s=Ai(n)?Ni:Ii.current;return s=Pi(t,s),Es(t,i),n=Eo(e,t,n,r,s,i),r=ko(),null===e||ba?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(Ai(n)){var s=!0;Mi(t)}else s=!1;if(Es(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Hs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ks(c):c=Pi(t,c=Ai(n)?Ni:Ii.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ri.current||Ns?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=Ns||Bs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,As(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ms(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ks(l):l=Pi(t,l=Ai(n)?Ni:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ri.current||Ns?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=Ns||Bs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,s,i)}function Ra(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ha(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Aa,Oa,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Rs(e,i),rc(r,e,i,-1))}return mc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Ga(t),null;case 3:return r=t.stateNode,io(),ki(Ri),ki(Ii),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Oa(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(ki(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Ss(t.type._context),Ga(t),null;case 19:if(ki(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>ql&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Xe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $a(e,t){switch(ts(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),ki(Ri),ki(Ii),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(ki(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){kc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){kc(e,e.return,m)}try{rl(5,e,e.return)}catch(m){kc(e,e.return,m)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){kc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){kc(e,e.return,m)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){kc(e,e.return,m)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){kc(e,e.return,m)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Xe())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,ml(t,e),Xa=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){kc(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){kc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){kc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=o,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Cl(i):null!==l?(l.return=o,Za=l):Cl(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Ya=a,Xa=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):wl(e)}}function wl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Cl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){kc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,kl=Math.ceil,Tl=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,Rl=0,Nl=null,Pl=null,Al=0,Ol=0,Dl=Ei(0),Ll=0,Ml=null,Fl=0,Ul=0,jl=0,Vl=null,zl=null,Bl=0,ql=1/0,Wl=null,Hl=!1,Kl=null,Gl=null,Ql=!1,$l=null,Yl=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Rl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Al?Al&-Al:null!==gs.transition?(0===ec&&(ec=gt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Rl)&&e===Nl||(e===Nl&&(0===(2&Rl)&&(Ul|=n),4===Ll&&lc(e,Al)),ic(e,r),1===n&&0===Rl&&0===(1&t.mode)&&(ql=Xe()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Al:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Rl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Rl))throw Error(s(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Rl;Rl|=2;var o=gc();for(Nl===e&&Al===t||(Wl=null,ql=Xe()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}ws(),Tl.current=o,Rl=i,null!==Pl?t=0:(Nl=null,Al=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Xe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,zl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,zl,Wl),t);break}Sc(e,zl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,zl,Wl),r);break}Sc(e,zl,Wl);break;default:throw Error(s(329))}}}return ic(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~jl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Rl))throw Error(s(327));Cc();var t=dt(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,zl,Wl),ic(e,Xe()),null}function uc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(ql=Xe()+500,ji&&Bi())}}function hc(e){null!==$l&&0===$l.tag&&0===(6&Rl)&&Cc();var t=Rl;Rl|=1;var n=Il.transition,r=_t;try{if(Il.transition=null,_t=1,e)return e()}finally{_t=r,Il.transition=n,0===(6&(Rl=t))&&Bi()}}function dc(){Ol=Dl.current,ki(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),ki(Ri),ki(Ii),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:ki(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Pl=e=Dc(e.current,null),Al=Ol=t,Ll=0,Ml=null,jl=Ul=Fl=0,zl=Vl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(ws(),ho.current=oa,vo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=mo=go=null,_o=!1,bo=0,xl.current=null,null===n||null===n.return){Ll=1,Ml=t,Pl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function gc(){var e=Tl.current;return Tl.current=oa,null===e?oa:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Nl,Al)}function yc(e,t){var n=Rl;Rl|=2;var r=gc();for(Nl===e&&Al===t||(Wl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(ws(),Rl=n,Tl.current=r,null!==Pl)throw Error(s(261));return Nl=null,Al=0,Ll}function vc(){for(;null!==Pl;)bc(Pl)}function _c(){for(;null!==Pl&&!$e();)bc(Pl)}function bc(e){var t=El(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):Pl=t,xl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ll=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Sc(e,t,n){var r=_t,i=Il.transition;try{Il.transition=null,_t=1,function(e,t,n,r){do{Cc()}while(null!==$l);if(0!==(6&Rl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Pl=Nl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Nc(tt,(function(){return Cc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=_t;_t=1;var l=Rl;Rl|=4,xl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),yl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Ye(),Rl=l,_t=a,Il.transition=o}else e.current=n;if(Ql&&(Ql=!1,$l=e,Yl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&Cc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Bi()}(e,t,n,r)}finally{Il.transition=i,_t=r}return null}function Cc(){if(null!==$l){var e=bt(Yl),t=Il.transition,n=_t;try{if(Il.transition=null,_t=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Yl=0,0!==(6&Rl))throw Error(s(331));var i=Rl;for(Rl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var _=e.current;for(Za=_;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=_;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){kc(l,l.return,S)}if(l===a){Za=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break e}Za=l.return}}if(Rl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{_t=n,Il.transition=t}}return!1}function Ec(e,t,n){e=Ds(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function kc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ds(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Al&n)===n&&(4===Ll||3===Ll&&(130023424&Al)===Al&&500>Xe()-Bl?fc(e,0):jl|=n),ic(e,t)}function xc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Rs(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),xc(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return Mc(n.children,i,o,t);case E:a=8,i|=8;break;case k:return(e=Ac(12,n,t,2|i)).elementType=k,e.lanes=o,e;case R:return(e=Ac(13,n,t,i)).elementType=R,e.lanes=o,e;case N:return(e=Ac(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case x:a=9;break e;case I:a=11;break e;case P:a=14;break e;case A:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Bc(e){if(!e)return xi;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Os(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ti(ao,1&ao.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);Es(t,n),i=Eo(null,t,r,e,i,n);var o=ko();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Hs(t,r,e,n),t=Ra(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=ms(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ca(null,t,r,ms(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,As(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ri.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Os(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Cs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=ks(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=ms(r=t.type,t.pendingProps),Ca(e,t,r,i=ms(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ms(r,i),Wa(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Es(t,n),qs(t,r,i),Hs(t,r,i,n),Ra(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Xe()),0===(6&Rl)&&(ql=Xe()+500,Bi()))}break;case 13:hc((function(){var t=Rs(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},St=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=nc(e),n=Rs(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Et=function(){return _t},kt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=uc,Re=hc;var tu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Te,xe,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},340:(e,t,n)=>{"use strict";var r,i;r=n(71),i=n(424),t.version=r.version,t.renderToString=r.renderToString,t.renderToStaticMarkup=r.renderToStaticMarkup,t.renderToNodeStream=r.renderToNodeStream,t.renderToStaticNodeStream=r.renderToStaticNodeStream,t.renderToReadableStream=i.renderToReadableStream},688:(e,t,n)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function s(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,a=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?a="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(a="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==a){var l=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==a?"\n  "+a:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=s;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:()=>o}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,s.__suppressDeprecationWarning=!0},240:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(791),o=p(s),a=p(n(164)),l=p(n(7)),c=p(n(334)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(858)),h=n(663),d=p(h),f=n(688);function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=t.portalClassName="ReactModalPortal",y=t.bodyOpenClassName="ReactModal__Body--open",v=h.canUseDOM&&void 0!==a.default.createPortal,_=function(e){return document.createElement(e)},b=function(){return v?a.default.createPortal:a.default.unstable_renderSubtreeIntoContainer};function w(e){return e()}var S=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=i=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.removePortal=function(){!v&&a.default.unmountComponentAtNode(i.node);var e=w(i.props.parentSelector);e&&e.contains(i.node)?e.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(e){i.portal=e},i.renderPortal=function(e){var n=b()(i,o.default.createElement(c.default,r({defaultStyles:t.defaultStyles},e)),i.node);i.portalRef(n)},g(i,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){h.canUseDOM&&(v||(this.node=_("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!v&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:w(e.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(h.canUseDOM){var r=this.props,i=r.isOpen,s=r.portalClassName;e.portalClassName!==s&&(this.node.className=s);var o=n.prevParent,a=n.nextParent;a!==o&&(o.removeChild(this.node),a.appendChild(this.node)),(e.isOpen||i)&&!v&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(h.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return h.canUseDOM&&v?(!this.node&&v&&(this.node=_("div")),b()(o.default.createElement(c.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){u.setElement(e)}}]),t}(s.Component);S.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.oneOfType([l.default.instanceOf(d.default),l.default.instanceOf(h.SafeHTMLCollection),l.default.instanceOf(h.SafeNodeList),l.default.arrayOf(l.default.instanceOf(d.default))]),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func},S.defaultProps={isOpen:!1,portalClassName:m,bodyOpenClassName:y,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return o.default.createElement("div",e,t)},contentElement:function(e,t){return o.default.createElement("div",e,t)}},S.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,f.polyfill)(S),t.default=S},334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(791),a=m(n(7)),l=g(n(844)),c=m(n(870)),u=g(n(858)),h=g(n(942)),d=n(663),f=m(d),p=m(n(484));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}n(670);var y={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},v=0,_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,i=e.htmlOpenClassName,s=e.bodyOpenClassName,o=e.parentSelector,a=o&&o().ownerDocument||document;s&&h.remove(a.body,s),i&&h.remove(a.getElementsByTagName("html")[0],i),r&&v>0&&0===(v-=1)&&u.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(l.returnFocus(n.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),p.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(l.setupScopedFocus(n.node),l.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,c.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===("undefined"===typeof t?"undefined":i(t))?t:{base:y[e],afterOpen:y[e]+"--after-open",beforeClose:y[e]+"--before-close"},s=r.base;return n.state.afterOpen&&(s=s+" "+r.afterOpen),n.state.beforeClose&&(s=s+" "+r.beforeClose),"string"===typeof t&&t?s+" "+t:s},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,i=e.bodyOpenClassName,s=e.parentSelector,o=s&&s().ownerDocument||document;i&&h.add(o.body,i),r&&h.add(o.getElementsByTagName("html")[0],r),n&&(v+=1,u.hide(t)),p.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,i=e.overlayClassName,s=e.defaultStyles,o=e.children,a=n?{}:s.content,l=i?{}:s.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",i),style:r({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},u=r({id:t,ref:this.setContentRef,style:r({},a,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),h=this.props.contentElement(u,o);return this.props.overlayElement(c,h)}}]),t}(o.Component);_.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},_.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(f.default),a.default.instanceOf(d.SafeHTMLCollection),a.default.instanceOf(d.SafeNodeList),a.default.arrayOf(a.default.instanceOf(f.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},t.default=_,e.exports=t.default},858:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){a&&(a.removeAttribute?a.removeAttribute("aria-hidden"):null!=a.length?a.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(a).forEach((function(e){return e.removeAttribute("aria-hidden")})));a=null},t.log=function(){0},t.assertNodeList=l,t.setElement=function(e){var t=e;if("string"===typeof t&&o.canUseDOM){var n=document.querySelectorAll(t);l(n,t),t=n}return a=t||a},t.validateElement=c,t.hide=function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=c(e)[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.setAttribute("aria-hidden","true")}}catch(o){n=!0,r=o}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}},t.show=function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=c(e)[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){i.value.removeAttribute("aria-hidden")}}catch(o){n=!0,r=o}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}},t.documentNotReadyOrSSRTesting=function(){a=null};var r,i=n(391),s=(r=i)&&r.__esModule?r:{default:r},o=n(663);var a=null;function l(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){var t=e||a;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,s.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[o,a],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}o=a=null,l=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(l.length);for(var e=[o,a],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var r,i=n(484),s=(r=i)&&r.__esModule?r:{default:r};var o=void 0,a=void 0,l=[];function c(){0!==l.length&&l[l.length-1].focusContent()}s.default.subscribe((function(e,t){o||a||((o=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),o.style.position="absolute",o.style.opacity="0",o.setAttribute("tabindex","0"),o.addEventListener("focus",c),(a=o.cloneNode()).addEventListener("focus",c)),(l=t).length>0?(document.body.firstChild!==o&&document.body.insertBefore(o,document.body.firstChild),document.body.lastChild!==a&&document.body.appendChild(a)):(o.parentElement&&o.parentElement.removeChild(o),a.parentElement&&a.parentElement.removeChild(a))}))},942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)i(e,n[t]);var s=document.body;for(var o in r)i(s,r[o]);n={},r={}},t.log=function(){0};var n={},r={};function i(e,t){e.classList.remove(t)}t.add=function(e,t){return i=e.classList,s="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(s,e),i.add(e)}));var i,s},t.remove=function(e,t){return i=e.classList,s="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(s,e),0===s[e]&&i.remove(e)}));var i,s}},844:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){o=[]},t.log=function(){0},t.handleBlur=c,t.handleFocus=u,t.markForFocusLater=function(){o.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==o.length&&(t=o.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){o.length>0&&o.pop()},t.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",u,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",u))},t.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",u)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",u))};var r,i=n(750),s=(r=i)&&r.__esModule?r:{default:r};var o=[],a=null,l=!1;function c(){l=!0}function u(){if(l){if(l=!1,!a)return;setTimeout((function(){a.contains(document.activeElement)||((0,s.default)(a)[0]||a).focus()}),0)}}},484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){r=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},r=new n;t.default=r},663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var r,i=n(618);var s=((r=i)&&r.__esModule?r:{default:r}).default,o=s.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=s.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=s.canUseDOM?window.NodeList:{},t.canUseDOM=s.canUseDOM;t.default=o},870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,s.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,i=t.shiftKey,a=n[0],l=n[n.length-1],c=o();if(e===c){if(!i)return;r=l}l!==c||i||(r=a);a===c&&i&&(r=l);if(r)return t.preventDefault(),void r.focus();var u=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==u||"Chrome"==u[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var h=n.indexOf(c);h>-1&&(h+=i?-1:1);if("undefined"===typeof(r=n[h]))return t.preventDefault(),void(r=i?l:a).focus();t.preventDefault(),r.focus()};var r,i=n(750),s=(r=i)&&r.__esModule?r:{default:r};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?o(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]);return n.filter(a)};var n="none",r="contents",i=/input|select|textarea|button|object|iframe/;function s(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var i=window.getComputedStyle(e),s=i.getPropertyValue("display");return t?s!==r&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,i):s===n}catch(o){return console.warn("Failed to inspect element style"),!1}}function o(e,t){var n=e.nodeName.toLowerCase();return(i.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),s(t))return!1;t=t.parentNode}return!0}(e)}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&o(e,!n)}e.exports=t.default},948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(240),s=(r=i)&&r.__esModule?r:{default:r};t.default=s.default,e.exports=t.default},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=_.prototype=new v;b.constructor=_,g(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:C.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),R(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(a=e[c],c);l+=R(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=R(a=a.value,t,i,u=s+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:C};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=C.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,b(e),!g)if(null!==r(c))g=!0,O(S);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!R());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,E=!1,k=null,T=-1,x=5,I=-1;function R(){return!(t.unstable_now()-I<x)}function N(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?C():(E=!1,k=null)}}else E=!1}if("function"===typeof _)C=function(){_(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=N,C=function(){A.postMessage(null)}}else C=function(){y(N,0)};function O(e){k=e,E||(E=!0,C())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(T),T=-1):m=!0,D(w,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,O(S))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},391:e=>{"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".8157f0ed.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="rent-clothes-client:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkrent_clothes_client=self.webpackChunkrent_clothes_client||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(791),t=n.t(e,2),r=n(250);const i=!1,s=!1,o="${JSCORE_VERSION}",a=function(e,t){if(!e)throw l(t)},l=function(e){return new Error("Firebase Database ("+o+") INTERNAL ASSERT FAILED: "+e)},c=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new h;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d=function(e){const t=c(e);return u.encodeByteArray(t,!0)},f=function(e){return d(e).replace(/\./g,"")},p=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function g(e){return m(void 0,e)}function m(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=m(e[n],t[n]));return e}const y=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,v=()=>{try{return y()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},_=e=>{var t,n;return null===(n=null===(t=v())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},b=e=>{const t=_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},w=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config},S=e=>{var t;return null===(t=v())||void 0===t?void 0:t["_".concat(e)]};class C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function E(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function T(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function x(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){return!0===i||!0===s}function R(){return!function(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N(){try{return"object"===typeof indexedDB}catch(e){return!1}}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(O,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new P(n,s,t)}}const O=/\{\$([^}]+)}/g;function D(e){return JSON.parse(e)}function L(e){return JSON.stringify(e)}const M=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=D(p(s[0])||""),n=D(p(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function j(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function V(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function z(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(B(n)&&B(s)){if(!z(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function B(e){return null!==e&&"object"===typeof e}function q(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function W(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function H(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class K{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class G{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Q),void 0===r.error&&(r.error=Q),void 0===r.complete&&(r.complete=Q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Q(){}function $(e,t){return"".concat(e," failed: ").concat(t," argument ")}const Y=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function X(e){return e&&e._delegate?e._delegate:e}class J{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Z="[DEFAULT]";class ee{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new C;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Z?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.component?this.component.multipleInstances?e:Z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ee(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ne=[];var re;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(re||(re={}));const ie={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},se=re.INFO,oe={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},ae=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=oe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class le{constructor(e){this.name=e,this._logLevel=se,this._logHandler=ae,this._userLogHandler=null,ne.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...t),this._logHandler(this,re.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...t),this._logHandler(this,re.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.INFO,...t),this._logHandler(this,re.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.WARN,...t),this._logHandler(this,re.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,re.ERROR,...t),this._logHandler(this,re.ERROR,...t)}}const ce=(e,t)=>t.some((t=>e instanceof t));let ue,he;const de=new WeakMap,fe=new WeakMap,pe=new WeakMap,ge=new WeakMap,me=new WeakMap;let ye={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return fe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return be(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ve(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(we(this),n),be(de.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return be(e.apply(we(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(we(this),t,...r);return pe.set(s,t.sort?t.sort():[t]),be(s)}}function _e(e){return"function"===typeof e?ve(e):(e instanceof IDBTransaction&&function(e){if(fe.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));fe.set(e,t)}(e),ce(e,ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ye):e)}function be(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(be(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&de.set(t,e)})).catch((()=>{})),me.set(t,e),t}(e);if(ge.has(e))return ge.get(e);const t=_e(e);return t!==e&&(ge.set(e,t),me.set(t,e)),t}const we=e=>me.get(e);const Se=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ee=new Map;function ke(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ee.get(t))return Ee.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ce.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Se.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Ee.set(t,s),s}ye=(e=>({...e,get:(t,n,r)=>ke(t,n)||e.get(t,n,r),has:(t,n)=>!!ke(t,n)||e.has(t,n)}))(ye);class Te{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const xe="@firebase/app",Ie="0.9.27",Re=new le("@firebase/app"),Ne="[DEFAULT]",Pe={[xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ae=new Map,Oe=new Map;function De(e,t){try{e.container.addComponent(t)}catch(n){Re.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Le(e){const t=e.name;if(Oe.has(t))return Re.debug("There were multiple attempts to register component ".concat(t,".")),!1;Oe.set(t,e);for(const n of Ae.values())De(n,e);return!0}function Me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Fe=new A("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ue{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new J("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fe.create("app-deleted",{appName:this._name})}}const je="10.8.0";function Ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ne,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Fe.create("bad-app-name",{appName:String(i)});if(n||(n=w()),!n)throw Fe.create("no-options");const s=Ae.get(i);if(s){if(z(n,s.options)&&z(r,s.config))return s;throw Fe.create("duplicate-app",{appName:i})}const o=new te(i);for(const l of Oe.values())o.addComponent(l);const a=new Ue(n,r,o);return Ae.set(i,a),a}function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;const t=Ae.get(e);if(!t&&e===Ne&&w())return Ve();if(!t)throw Fe.create("no-app",{appName:e});return t}function Be(e,t,n){var r;let i=null!==(r=Pe[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Re.warn(e.join(" "))}Le(new J("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const qe="firebase-heartbeat-database",We=1,He="firebase-heartbeat-store";let Ke=null;function Ge(){return Ke||(Ke=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=be(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(be(o.result),e.oldVersion,e.newVersion,be(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(qe,We,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(He)}catch(n){console.warn(n)}}}).catch((e=>{throw Fe.create("idb-open",{originalErrorMessage:e.message})}))),Ke}async function Qe(e,t){try{const n=(await Ge()).transaction(He,"readwrite"),r=n.objectStore(He);await r.put(t,$e(e)),await n.done}catch(n){if(n instanceof P)Re.warn(n.message);else{const e=Fe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Re.warn(e.message)}}}function $e(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ye{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Je(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Xe();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Xe(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ze(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ze(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=f(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Xe(){return(new Date).toISOString().substring(0,10)}class Je{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!N()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Cy){t(Cy)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ge()).transaction(He),n=await t.objectStore(He).get($e(e));return await t.done,n}catch(t){if(t instanceof P)Re.warn(t.message);else{const e=Fe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Re.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Qe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ze(e){return f(JSON.stringify({version:2,heartbeats:e})).length}var et;et="",Le(new J("platform-logger",(e=>new Te(e)),"PRIVATE")),Le(new J("heartbeat",(e=>new Ye(e)),"PRIVATE")),Be(xe,Ie,et),Be(xe,Ie,"esm2017"),Be("fire-js","");Be("firebase","10.8.0","app");function tt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rt=nt,it=new A("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new le("@firebase/auth");function ot(e){if(st.logLevel<=re.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];st.error("Auth (".concat(je,"): ").concat(e),...n)}}function at(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ut(e,...n)}function lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ut(e,...n)}function ct(e,t,n){const r=Object.assign(Object.assign({},rt()),{[t]:n});return new A("auth","Firebase",r).create(t,{appName:e.name})}function ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return it.create(e,...n)}function ht(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ut(t,...r)}}function dt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ot(t),new Error(t)}function ft(e,t){e||dt(t)}function pt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function gt(){return"http:"===mt()||"https:"===mt()}function mt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function yt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(gt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class vt{constructor(e,t){this.shortDelay=e,this.longDelay=t,ft(t>e,"Short delay should be less than long delay!"),this.isMobile=T()||x()}get(){return yt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _t(e,t){ft(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class bt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},St=new vt(3e4,6e4);function Ct(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Et(e,t,n,r){return kt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=q(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),bt.fetch()(xt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function kt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},wt),t);try{const t=new Rt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Nt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Nt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Nt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Nt(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ct(e,a,o);at(e,a)}}catch(i){if(i instanceof P)throw i;at(e,"network-request-failed",{message:String(i)})}}async function Tt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Et(e,t,n,r,i);return"mfaPendingCredential"in s&&at(e,"multi-factor-auth-required",{_serverResponse:s}),s}function xt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_t(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function It(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Rt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(lt(this.auth,"network-request-failed"))),St.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=lt(e,t,r);return i.customData._tokenResponse=n,i}function Pt(e){return void 0!==e&&void 0!==e.enterprise}class At{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return It(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ot(e,t){return Et(e,"GET","/v2/recaptchaConfig",Ct(e,t))}function Dt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Lt(e){return 1e3*Number(e)}function Mt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ot("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(ot("Failed to decode base64 JWT payload"),null)}catch(i){return ot("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Ft(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof P&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ut{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class jt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dt(this.lastLoginAt),this.creationTime=Dt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ft(e,async function(e,t){return Et(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ht(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=tt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ht(e.idToken,"internal-error"),ht("undefined"!==typeof e.idToken,"internal-error"),ht("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Mt(e);return ht(t,"internal-error"),ht("undefined"!==typeof t.exp,"internal-error"),ht("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ht(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await kt(e,{},(async()=>{const n=q({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=xt(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",bt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new zt;return n&&(ht("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ht("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ht("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return dt("not implemented")}}function Bt(e,t){ht("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class qt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=tt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ut(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ft(this,this.stsTokenManager.getToken(this.auth,e));return ht(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=X(e),r=await n.getIdToken(t),i=Mt(r);ht(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dt(Lt(i.auth_time)),issuedAtTime:Dt(Lt(i.iat)),expirationTime:Dt(Lt(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=X(e);await Vt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Vt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ft(this,async function(e,t){return Et(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:S}=t;ht(v&&S,e,"internal-error");const C=zt.fromJSON(this.name,S);ht("string"===typeof v,e,"internal-error"),Bt(u,e.name),Bt(h,e.name),ht("boolean"===typeof _,e,"internal-error"),ht("boolean"===typeof b,e,"internal-error"),Bt(d,e.name),Bt(f,e.name),Bt(p,e.name),Bt(g,e.name),Bt(m,e.name),Bt(y,e.name);const E=new qt({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:C,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new zt;r.updateFromServerResponse(t);const i=new qt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Vt(i),i}}const Wt=new Map;function Ht(e){ft(e instanceof Function,"Expected a class definition");let t=Wt.get(e);return t?(ft(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Wt.set(e,t),t)}class Kt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kt.type="NONE";const Gt=Kt;function Qt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class $t{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Qt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Qt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new $t(Ht(Gt),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ht(Gt);const s=Qt(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=qt._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new $t(i,e,n)):new $t(i,e,n)}}function Yt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(en(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nn(t))return"Blackberry";if(rn(t))return"Webos";if(Jt(t))return"Safari";if((t.includes("chrome/")||Zt(t))&&!t.includes("edge/"))return"Chrome";if(tn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/firefox\//i.test(e)}function Jt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:k()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/crios\//i.test(e)}function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/iemobile/i.test(e)}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/android/i.test(e)}function nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/blackberry/i.test(e)}function rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/webos/i.test(e)}function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function on(){return function(){const e=k();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return sn(e)||tn(e)||rn(e)||nn(e)||/windows phone/i.test(e)||en(e)}function ln(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Yt(k());break;case"Worker":t="".concat(Yt(k()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(je,"/").concat(r)}class cn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class un{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class hn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fn(this),this.idTokenSubscription=new fn(this),this.beforeStateQueue=new cn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ht(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await $t.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?X(e):null;return t&&ht(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Ht(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Et(e,"GET","/v2/passwordPolicy",Ct(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new un(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new A("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Et(e,"POST","/v2/accounts:revokeToken",Ct(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ht(e)||this._popupRedirectResolver;ht(t,this,"argument-error"),this.redirectPersistenceManager=await $t.create(this,[Ht(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ht(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ln(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(st.logLevel<=re.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];st.warn("Auth (".concat(je,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function dn(e){return X(e)}class fn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new G(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gn(e){return pn.loadJS(e)}function mn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class yn{constructor(e){this.type="recaptcha-enterprise",this.auth=dn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Pt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ot(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new At(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Pt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=pn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),gn(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function vn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new yn(e);let s;try{s=await i.verify(n)}catch(Cy){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _n(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await vn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await vn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function bn(e,t,n){const r=dn(e);ht(r._canInitEmulator,r,"emulator-config-failed"),ht(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=wn(t),{host:o,port:a}=function(e){const t=wn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Sn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Sn(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function wn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Cn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dt("not implemented")}_getIdTokenResponse(e){return dt("not implemented")}_linkToIdToken(e,t){return dt("not implemented")}_getReauthenticationResolver(e){return dt("not implemented")}}async function En(e,t){return Et(e,"POST","/v1/accounts:signUp",t)}async function kn(e,t){return Tt(e,"POST","/v1/accounts:signInWithPassword",Ct(e,t))}class Tn extends Cn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Tn(e,t,"password")}static _fromEmailAndCode(e,t){return new Tn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return _n(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",kn);case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",Ct(e,t))}(e,{email:this._email,oobCode:this._password});default:at(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return _n(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",En);case"emailLink":return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithEmailLink",Ct(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:at(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xn(e,t){return Tt(e,"POST","/v1/accounts:signInWithIdp",Ct(e,t))}class In extends Cn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new In(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):at("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=tt(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new In(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return xn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=q(t)}return e}}const Rn={USER_NOT_FOUND:"user-not-found"};class Nn extends Cn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Nn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Nn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ct(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ct(e,t));if(n.temporaryProof)throw Nt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Tt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ct(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Rn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Nn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Pn{constructor(e){var t,n,r,i,s,o;const a=W(H(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ht(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=W(H(e)).link,n=t?W(H(t)).deep_link_id:null,r=W(H(e)).deep_link_id;return(r?W(H(r)).link:null)||r||n||t||e}(e);try{return new Pn(t)}catch(n){return null}}}class An{constructor(){this.providerId=An.PROVIDER_ID}static credential(e,t){return Tn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Pn.parseLink(t);return ht(n,"argument-error"),Tn._fromEmailAndCode(e,n.code,n.tenantId)}}An.PROVIDER_ID="password",An.EMAIL_PASSWORD_SIGN_IN_METHOD="password",An.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class On{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Dn extends On{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ln extends Dn{constructor(){super("facebook.com")}static credential(e){return In._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ln.credential(t.oauthAccessToken)}catch(n){return null}}}Ln.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ln.PROVIDER_ID="facebook.com";class Mn extends Dn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return In._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Mn.credential(n,r)}catch(i){return null}}}Mn.GOOGLE_SIGN_IN_METHOD="google.com",Mn.PROVIDER_ID="google.com";class Fn extends Dn{constructor(){super("github.com")}static credential(e){return In._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fn.credential(t.oauthAccessToken)}catch(n){return null}}}Fn.GITHUB_SIGN_IN_METHOD="github.com",Fn.PROVIDER_ID="github.com";class Un extends Dn{constructor(){super("twitter.com")}static credential(e,t){return In._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Un.credential(n,r)}catch(i){return null}}}async function jn(e,t){return Tt(e,"POST","/v1/accounts:signUp",Ct(e,t))}Un.TWITTER_SIGN_IN_METHOD="twitter.com",Un.PROVIDER_ID="twitter.com";class Vn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await qt._fromIdTokenResponse(e,n,r),s=zn(n);return new Vn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=zn(n);return new Vn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function zn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Bn extends P{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Bn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Bn(e,t,n,r)}}function qn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Bn._fromErrorAndOperation(e,n,t,r);throw n}))}async function Wn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ft(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Vn._forOperation(e,"link",r)}async function Hn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Ft(e,qn(r,i,t,e),n);ht(s.idToken,r,"internal-error");const o=Mt(s.idToken);ht(o,r,"internal-error");const{sub:a}=o;return ht(e.uid===a,r,"user-mismatch"),Vn._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&at(r,"user-mismatch"),s}}async function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await qn(e,r,t),s=await Vn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Gn(e,t){return Kn(dn(e),t)}async function Qn(e){const t=dn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const $n="__sak";class Yn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($n,"1"),this.storage.removeItem($n),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Xn extends Yn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=k();return Jt(e)||sn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=an(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);on()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xn.type="LOCAL";const Jn=Xn;class Zn extends Yn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Zn.type="SESSION";const er=Zn;class tr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new tr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}tr.receivers=[];class rr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=nr("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function ir(){return window}function sr(){return"undefined"!==typeof ir().WorkerGlobalScope&&"function"===typeof ir().importScripts}const or="firebaseLocalStorageDb",ar="firebaseLocalStorage",lr="fbase_key";class cr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ur(e,t){return e.transaction([ar],t?"readwrite":"readonly").objectStore(ar)}function hr(){const e=indexedDB.open(or,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ar,{keyPath:lr})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ar)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(or);return new cr(e).toPromise()}(),t(await hr()))}))}))}async function dr(e,t,n){const r=ur(e,!0).put({[lr]:t,value:n});return new cr(r).toPromise()}function fr(e,t){const n=ur(e,!0).delete(t);return new cr(n).toPromise()}class pr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await hr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tr._getInstance(sr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new rr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hr();return await dr(e,$n,"1"),await fr(e,$n),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>dr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ur(e,!1).get(t),r=await new cr(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>fr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ur(e,!1).getAll();return new cr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pr.type="LOCAL";const gr=pr;mn("rcb"),new vt(3e4,6e4);const mr="recaptcha";async function yr(e,t,n){var r;const i=await n.verify();try{let s;if(ht("string"===typeof i,e,"argument-error"),ht(n.type===mr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ht("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Et(e,"POST","/v2/accounts/mfaEnrollment:start",Ct(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ht("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ht(n,e,"missing-multi-factor-info");const o=await function(e,t){return Et(e,"POST","/v2/accounts/mfaSignIn:start",Ct(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Et(e,"POST","/v1/accounts:sendVerificationCode",Ct(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class vr{constructor(e){this.providerId=vr.PROVIDER_ID,this.auth=dn(e)}verifyPhoneNumber(e,t){return yr(this.auth,e,X(t))}static credential(e,t){return Nn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return vr.credentialFromTaggedObject(t)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Nn._fromTokenResponse(n,r):null}}function _r(e,t){return t?Ht(t):(ht(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vr.PROVIDER_ID="phone",vr.PHONE_SIGN_IN_METHOD="phone";class br extends Cn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wr(e){return Kn(e.auth,new br(e),e.bypassAuthState)}function Sr(e){const{auth:t,user:n}=e;return ht(n,t,"internal-error"),Hn(n,new br(e),e.bypassAuthState)}async function Cr(e){const{auth:t,user:n}=e;return ht(n,t,"internal-error"),Wn(n,new br(e),e.bypassAuthState)}class Er{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wr;case"linkViaPopup":case"linkViaRedirect":return Cr;case"reauthViaPopup":case"reauthViaRedirect":return Sr;default:at(this.auth,"internal-error")}}resolve(e){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kr=new vt(2e3,1e4);class Tr extends Er{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ht(e,this.auth,"internal-error"),e}async onExecution(){ft(1===this.filter.length,"Popup operations only handle one event");const e=nr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(lt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(lt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,kr.get())};e()}}Tr.currentPopupAction=null;const xr="pendingRedirect",Ir=new Map;class Rr extends Er{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ir.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ar(t),r=Pr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ir.set(this.auth._key(),e)}return this.bypassAuthState||Ir.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Nr(e,t){Ir.set(e._key(),t)}function Pr(e){return Ht(e._redirectPersistence)}function Ar(e){return Qt(xr,e.config.apiKey,e.name)}async function Or(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=dn(e),i=_r(r,t),s=new Rr(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Dr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Mr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(lt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lr(e))}saveEventToCache(e){this.cachedEventUids.add(Lr(e)),this.lastProcessedEventTime=Date.now()}}function Lr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Mr(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ur=/^https?/;async function jr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Et(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Vr(r))return}catch(n){}at(e,"unauthorized-domain")}function Vr(e){const t=pt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ur.test(n))return!1;if(Fr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const zr=new vt(3e4,6e4);function Br(){const e=ir().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function qr(e){return new Promise(((t,n)=>{var r,i,s;function o(){Br(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Br(),n(lt(e,"network-request-failed"))},timeout:zr.get()})}if(null===(i=null===(r=ir().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ir().gapi)||void 0===s?void 0:s.load)){const t=mn("iframefcb");return ir()[t]=()=>{gapi.load?o():n(lt(e,"network-request-failed"))},gn("".concat(pn.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Wr=null,e}))}let Wr=null;const Hr=new vt(5e3,15e3),Kr="__/auth/iframe",Gr="emulator/auth/iframe",Qr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$r=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yr(e){const t=e.config;ht(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_t(t,Gr):"https://".concat(e.config.authDomain,"/").concat(Kr),r={apiKey:t.apiKey,appName:e.name,v:je},i=$r.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(q(r).slice(1))}async function Xr(e){const t=await function(e){return Wr=Wr||qr(e),Wr}(e),n=ir().gapi;return ht(n,e,"internal-error"),t.open({where:document.body,url:Yr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qr,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=lt(e,"network-request-failed"),s=ir().setTimeout((()=>{r(i)}),Hr.get());function o(){ir().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Jr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ei(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Jr),{width:r.toString(),height:i.toString(),top:s,left:o}),c=k().toLowerCase();n&&(a=Zt(c)?"_blank":n),Xt(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return sn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:k())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Zr(null);const h=window.open(t||"",a,u);ht(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Zr(h)}const ti="__/auth/handler",ni="emulator/auth/handler",ri=encodeURIComponent("fac");async function ii(e,t,n,r,i,s){ht(e.config.authDomain,e,"auth-domain-config-required"),ht(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:je,eventId:i};if(t instanceof On){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",j(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Dn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ri,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ti);return _t(t,ni)}(e),"?").concat(q(a).slice(1)).concat(c)}const si="webStorageSupport";const oi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=er,this._completeRedirectFn=Or,this._overrideRedirectResult=Nr}async _openPopup(e,t,n,r){var i;ft(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ei(e,await ii(e,t,n,pt(),r),nr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ir().location.href=e}(await ii(e,t,n,pt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ft(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Xr(e),n=new Dr(e);return t.register("authEvent",(t=>{ht(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(si,{type:si},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[si];void 0!==i&&t(!!i),at(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return an()||Jt()||sn()}};var ai="@firebase/auth",li="1.6.0";class ci{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ui=S("authIdTokenMaxAge")||300;let hi=null;var di;!function(e){pn=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=lt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),di="Browser",Le(new J("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ht(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:di,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ln(di)},c=new hn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ht);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Le(new J("auth-internal",(e=>(e=>new ci(e))(dn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Be(ai,li,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(di)),Be(ai,li,"esm2017");var fi,pi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},gi={},mi=mi||{},yi=pi||self;function vi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function _i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var bi="closure_uid_"+(1e9*Math.random()>>>0),wi=0;function Si(e,t,n){return e.call.apply(e.bind,arguments)}function Ci(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ei(e,t,n){return(Ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Si:Ci).apply(null,arguments)}function ki(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ti(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function xi(){this.s=this.s,this.o=this.o}xi.prototype.s=!1,xi.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,bi)&&e[bi]||(e[bi]=++wi))},xi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ii=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ri(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ni(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(vi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Pi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Pi.prototype.h=function(){this.defaultPrevented=!0};var Ai=function(){if(!yi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};yi.addEventListener("test",e,t),yi.removeEventListener("test",e,t)}catch(n){}return e}();function Oi(e){return/^[\s\xa0]*$/.test(e)}function Di(){var e=yi.navigator;return e&&(e=e.userAgent)?e:""}function Li(e){return-1!=Di().indexOf(e)}function Mi(e){return Mi[" "](e),e}Mi[" "]=function(){};var Fi,Ui,ji=Li("Opera"),Vi=Li("Trident")||Li("MSIE"),zi=Li("Edge"),Bi=zi||Vi,qi=Li("Gecko")&&!(-1!=Di().toLowerCase().indexOf("webkit")&&!Li("Edge"))&&!(Li("Trident")||Li("MSIE"))&&!Li("Edge"),Wi=-1!=Di().toLowerCase().indexOf("webkit")&&!Li("Edge");function Hi(){var e=yi.document;return e?e.documentMode:void 0}e:{var Ki="",Gi=function(){var e=Di();return qi?/rv:([^\);]+)(\)|;)/.exec(e):zi?/Edge\/([\d\.]+)/.exec(e):Vi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Wi?/WebKit\/(\S+)/.exec(e):ji?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Gi&&(Ki=Gi?Gi[1]:""),Vi){var Qi=Hi();if(null!=Qi&&Qi>parseFloat(Ki)){Fi=String(Qi);break e}}Fi=Ki}if(yi.document&&Vi){var $i=Hi();Ui=$i||(parseInt(Fi,10)||void 0)}else Ui=void 0;var Yi=Ui;function Xi(e,t){if(Pi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(qi){e:{try{Mi(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ji[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Xi.$.h.call(this)}}Ti(Xi,Pi);var Ji={2:"touch",3:"pen",4:"mouse"};Xi.prototype.h=function(){Xi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Zi="closure_listenable_"+(1e6*Math.random()|0),es=0;function ts(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++es,this.fa=this.ia=!1}function ns(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function rs(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function is(e){const t={};for(const n in e)t[n]=e[n];return t}const ss="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function os(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<ss.length;t++)n=ss[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function as(e){this.src=e,this.g={},this.h=0}function ls(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Ii(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ns(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function cs(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}as.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=cs(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ts(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var us="closure_lm_"+(1e6*Math.random()|0),hs={};function ds(e,t,n,r,i){if(r&&r.once)return ps(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ds(e,t[s],n,r,i);return null}return n=ws(n),e&&e[Zi]?e.O(t,n,_i(r)?!!r.capture:!!r,i):fs(e,t,n,!1,r,i)}function fs(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=_i(i)?!!i.capture:!!i,a=_s(e);if(a||(e[us]=a=new as(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=vs;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ai||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ys(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ps(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ps(e,t[s],n,r,i);return null}return n=ws(n),e&&e[Zi]?e.P(t,n,_i(r)?!!r.capture:!!r,i):fs(e,t,n,!0,r,i)}function gs(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)gs(e,t[s],n,r,i);else r=_i(r)?!!r.capture:!!r,n=ws(n),e&&e[Zi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=cs(s=e.g[t],n,r,i))&&(ns(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=_s(e))&&(t=e.g[t.toString()],e=-1,t&&(e=cs(t,n,r,i)),(n=-1<e?t[e]:null)&&ms(n))}function ms(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Zi])ls(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ys(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_s(t))?(ls(n,e),0==n.h&&(n.src=null,t[us]=null)):ns(e)}}}function ys(e){return e in hs?hs[e]:hs[e]="on"+e}function vs(e,t){if(e.fa)e=!0;else{t=new Xi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ms(e),e=n.call(r,t)}return e}function _s(e){return(e=e[us])instanceof as?e:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(e){return"function"===typeof e?e:(e[bs]||(e[bs]=function(t){return e.handleEvent(t)}),e[bs])}function Ss(){xi.call(this),this.i=new as(this),this.S=this,this.J=null}function Cs(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Pi(t,e);else if(t instanceof Pi)t.target=t.target||e;else{var i=t;os(t=new Pi(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Es(o,r,!0,t)&&i}if(i=Es(o=t.g=e,r,!0,t)&&i,i=Es(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Es(o=t.g=n[s],r,!1,t)&&i}function Es(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ls(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Ti(Ss,xi),Ss.prototype[Zi]=!0,Ss.prototype.removeEventListener=function(e,t,n,r){gs(this,e,t,n,r)},Ss.prototype.N=function(){if(Ss.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ns(n[r]);delete t.g[e],t.h--}}this.J=null},Ss.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ss.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ks=yi.JSON.stringify;function Ts(){var e=Os;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var xs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Is),(e=>e.reset()));class Is{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rs(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ns(e){yi.setTimeout((()=>{throw e}),0)}let Ps,As=!1,Os=new class{constructor(){this.h=this.g=null}add(e,t){const n=xs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ds=()=>{const e=yi.Promise.resolve(void 0);Ps=()=>{e.then(Ls)}};var Ls=()=>{for(var e;e=Ts();){try{e.h.call(e.g)}catch(n){Ns(n)}var t=xs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}As=!1};function Ms(e,t){Ss.call(this),this.h=e||1,this.g=t||yi,this.j=Ei(this.qb,this),this.l=Date.now()}function Fs(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Us(e,t,n){if("function"===typeof e)n&&(e=Ei(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ei(e.handleEvent,e)}return 2147483647<Number(t)?-1:yi.setTimeout(e,t||0)}function js(e){e.g=Us((()=>{e.g=null,e.i&&(e.i=!1,js(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ti(Ms,Ss),(fi=Ms.prototype).ga=!1,fi.T=null,fi.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Cs(this,"tick"),this.ga&&(Fs(this),this.start()))}},fi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fi.N=function(){Ms.$.N.call(this),Fs(this),delete this.g};class Vs extends xi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:js(this)}N(){super.N(),this.g&&(yi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(e){xi.call(this),this.h=e,this.g={}}Ti(zs,xi);var Bs=[];function qs(e,t,n,r){Array.isArray(n)||(n&&(Bs[0]=n.toString()),n=Bs);for(var i=0;i<n.length;i++){var s=ds(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ws(e){rs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ms(e)}),e),e.g={}}function Hs(){this.g=!0}function Ks(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ks(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}zs.prototype.N=function(){zs.$.N.call(this),Ws(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hs.prototype.Ea=function(){this.g=!1},Hs.prototype.info=function(){};var Gs={},Qs=null;function $s(){return Qs=Qs||new Ss}function Ys(e){Pi.call(this,Gs.Ta,e)}function Xs(e){const t=$s();Cs(t,new Ys(t))}function Js(e,t){Pi.call(this,Gs.STAT_EVENT,e),this.stat=t}function Zs(e){const t=$s();Cs(t,new Js(t,e))}function eo(e,t){Pi.call(this,Gs.Ua,e),this.size=t}function to(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return yi.setTimeout((function(){e()}),t)}Gs.Ta="serverreachability",Ti(Ys,Pi),Gs.STAT_EVENT="statevent",Ti(Js,Pi),Gs.Ua="timingevent",Ti(eo,Pi);var no={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ro={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function io(){}function so(e){return e.h||(e.h=e.i())}function oo(){}io.prototype.h=null;var ao,lo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function co(){Pi.call(this,"d")}function uo(){Pi.call(this,"c")}function ho(){}function fo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new zs(this),this.P=go,e=Bi?125:void 0,this.V=new Ms(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new po}function po(){this.i=null,this.g="",this.h=!1}Ti(co,Pi),Ti(uo,Pi),Ti(ho,io),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},ao=new ho;var go=45e3,mo={},yo={};function vo(e,t,n){e.L=1,e.A=Fo(Ao(t)),e.u=n,e.S=!0,_o(e,null)}function _o(e,t){e.G=Date.now(),Co(e),e.B=Ao(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Yo(n.i,"t",r),e.o=0,n=e.l.J,e.h=new po,e.g=Xa(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Vs(Ei(e.Pa,e,e.g),e.O)),qs(e.U,e.g,"readystatechange",e.nb),t=e.I?is(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Xs(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function bo(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function wo(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=So(e,n),r==yo){4==t&&(e.s=4,Zs(14),i=!1),Ks(e.j,e.m,null,"[Incomplete Response]");break}if(r==mo){e.s=4,Zs(15),Ks(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ks(e.j,e.m,r,null),Io(e,r)}bo(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Zs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),qa(t),t.M=!0,Zs(11))):(Ks(e.j,e.m,n,"[Invalid Chunked Response]"),xo(e),To(e))}function So(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?yo:(n=Number(t.substring(n,r)),isNaN(n)?mo:(r+=1)+n>t.length?yo:(t=t.slice(r,r+n),e.o=r+n,t))}function Co(e){e.Y=Date.now()+e.P,Eo(e,e.P)}function Eo(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=to(Ei(e.lb,e),t)}function ko(e){e.C&&(yi.clearTimeout(e.C),e.C=null)}function To(e){0==e.l.H||e.J||Ka(e.l,e)}function xo(e){ko(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Fs(e.V),Ws(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Io(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ra(n.i,e)))if(!e.K&&ra(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ha(n),La(n)}Ba(n),Zs(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=to(Ei(n.ib,n),6e3));if(1>=na(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Qa(n,11)}else if((e.K||n.g==e)&&Ha(n),!Oi(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ia(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Mo(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ya(r,r.J?r.pa:null,r.Y),o.K){sa(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ko(a),Co(a)),r.g=o}else za(r);0<n.j.length&&Fa(n)}else"stop"!=c[0]&&"close"!=c[0]||Qa(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Qa(n,7):Da(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Xs()}catch(c){}}function Ro(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(vi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(vi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(vi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(fi=fo.prototype).setTimeout=function(e){this.P=e},fi.nb=function(e){e=e.target;const t=this.M;t&&3==Ia(e)?t.l():this.Pa(e)},fi.Pa=function(e){try{if(e==this.g)e:{const u=Ia(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Bi||this.g&&(this.h.h||this.g.ja()||Ra(this.g)))){this.J||4!=u||7==t||Xs(),ko(this);var n=this.g.da();this.ca=n;t:if(bo(this)){var r=Ra(this.g);e="";var i=r.length,s=4==Ia(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){xo(this),To(this);var o="";break t}this.h.i=new yi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oi(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Zs(12),xo(this),To(this);break e}Ks(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Io(this,n)}this.S?(wo(this,u,o),Bi&&this.i&&3==u&&(qs(this.U,this.V,"tick",this.mb),this.V.start())):(Ks(this.j,this.m,o,null),Io(this,o)),4==u&&xo(this),this.i&&!this.J&&(4==u?Ka(this.l,this):(this.i=!1,Co(this)))}else(function(e){const t={};e=(e.g&&2<=Ia(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Oi(e[r]))continue;var n=Rs(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Zs(12)):(this.s=0,Zs(13)),xo(this),To(this)}}}catch(u){}},fi.mb=function(){if(this.g){var e=Ia(this.g),t=this.g.ja();this.o<t.length&&(ko(this),wo(this,e,t),this.i&&4!=e&&Co(this))}},fi.cancel=function(){this.J=!0,xo(this)},fi.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Xs(),Zs(17)),xo(this),this.s=2,To(this)):Eo(this,this.Y-e)};var No=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Po(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Po){this.h=e.h,Oo(this,e.j),this.s=e.s,this.g=e.g,Do(this,e.m),this.l=e.l;var t=e.i,n=new Ko;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Lo(this,n),this.o=e.o}else e&&(t=String(e).match(No))?(this.h=!1,Oo(this,t[1]||"",!0),this.s=Uo(t[2]||""),this.g=Uo(t[3]||"",!0),Do(this,t[4]),this.l=Uo(t[5]||"",!0),Lo(this,t[6]||"",!0),this.o=Uo(t[7]||"")):(this.h=!1,this.i=new Ko(null,this.h))}function Ao(e){return new Po(e)}function Oo(e,t,n){e.j=n?Uo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Do(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Lo(e,t,n){t instanceof Ko?(e.i=t,function(e,t){t&&!e.j&&(Go(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Qo(this,t),Yo(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=jo(t,Wo)),e.i=new Ko(t,e.h))}function Mo(e,t,n){e.i.set(t,n)}function Fo(e){return Mo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Uo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Vo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Vo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Po.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jo(t,zo,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jo(t,zo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(jo(n,"/"==n.charAt(0)?qo:Bo,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jo(n,Ho)),e.join("")};var zo=/[#\/\?@]/g,Bo=/[#\?:]/g,qo=/[#\?]/g,Wo=/[#\?@]/g,Ho=/#/g;function Ko(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Go(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Qo(e,t){Go(e),t=Xo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function $o(e,t){return Go(e),t=Xo(e,t),e.g.has(t)}function Yo(e,t,n){Qo(e,t),0<n.length&&(e.i=null,e.g.set(Xo(e,t),Ri(n)),e.h+=n.length)}function Xo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(fi=Ko.prototype).add=function(e,t){Go(this),this.i=null,e=Xo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},fi.forEach=function(e,t){Go(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},fi.ta=function(){Go(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},fi.Z=function(e){Go(this);let t=[];if("string"===typeof e)$o(this,e)&&(t=t.concat(this.g.get(Xo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},fi.set=function(e,t){return Go(this),this.i=null,$o(this,e=Xo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},fi.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},fi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Jo=class{constructor(e,t){this.g=e,this.map=t}};function Zo(e){this.l=e||ea,yi.PerformanceNavigationTiming?e=0<(e=yi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(yi.g&&yi.g.Ka&&yi.g.Ka()&&yi.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ea=10;function ta(e){return!!e.h||!!e.g&&e.g.size>=e.j}function na(e){return e.h?1:e.g?e.g.size:0}function ra(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ia(e,t){e.g?e.g.add(t):e.h=t}function sa(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function oa(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ri(e.i)}Zo.prototype.cancel=function(){if(this.i=oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var aa,la=class{stringify(e){return yi.JSON.stringify(e,void 0)}parse(e){return yi.JSON.parse(e,void 0)}};function ca(){this.g=new la}function ua(e,t,n){const r=n||"";try{Ro(e,(function(e,n){let i=e;_i(e)&&(i=ks(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ha(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function da(e){this.l=e.ec||null,this.j=e.ob||!1}function fa(e,t){Ss.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=pa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ti(da,io),da.prototype.g=function(){return new fa(this.l,this.j)},da.prototype.i=(aa={},function(){return aa}),Ti(fa,Ss);var pa=0;function ga(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ma(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ya(e)}function ya(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(fi=fa.prototype).open=function(e,t){if(this.readyState!=pa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ya(this)},fi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||yi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},fi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ma(this)),this.readyState=pa},fi.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ya(this)),this.g&&(this.readyState=3,ya(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof yi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ga(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},fi.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ma(this):ya(this),3==this.readyState&&ga(this)}},fi.Za=function(e){this.g&&(this.response=this.responseText=e,ma(this))},fi.Ya=function(e){this.g&&(this.response=e,ma(this))},fi.ka=function(){this.g&&ma(this)},fi.setRequestHeader=function(e,t){this.v.append(e,t)},fi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},fi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var va=yi.JSON.parse;function _a(e){Ss.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ba,this.L=this.M=!1}Ti(_a,Ss);var ba="",wa=/^https?$/i,Sa=["POST","PUT"];function Ca(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ea(e),Ta(e)}function Ea(e){e.F||(e.F=!0,Cs(e,"complete"),Cs(e,"error"))}function ka(e){if(e.h&&"undefined"!=typeof mi&&(!e.C[1]||4!=Ia(e)||2!=e.da()))if(e.v&&4==Ia(e))Us(e.La,0,e);else if(Cs(e,"readystatechange"),4==Ia(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(No)[1]||null;!i&&yi.self&&yi.self.location&&(i=yi.self.location.protocol.slice(0,-1)),r=!wa.test(i?i.toLowerCase():"")}n=r}if(n)Cs(e,"complete"),Cs(e,"success");else{e.m=6;try{var s=2<Ia(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Ea(e)}}finally{Ta(e)}}}function Ta(e,t){if(e.g){xa(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Cs(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function xa(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(yi.clearTimeout(e.A),e.A=null)}function Ia(e){return e.g?e.g.readyState:0}function Ra(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ba:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ml){return null}}function Na(e){let t="";return rs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Pa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Na(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Mo(e,t,n))}function Aa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Oa(e){this.Ga=0,this.j=[],this.l=new Hs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Aa("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Aa("baseRetryDelayMs",5e3,e),this.hb=Aa("retryDelaySeedMs",1e4,e),this.eb=Aa("forwardChannelMaxRetries",2,e),this.xa=Aa("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Zo(e&&e.concurrentRequestLimit),this.Ja=new ca,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Da(e){if(Ma(e),3==e.H){var t=e.W++,n=Ao(e.I);if(Mo(n,"SID",e.K),Mo(n,"RID",t),Mo(n,"TYPE","terminate"),ja(e,n),(t=new fo(e,e.l,t)).L=2,t.A=Fo(Ao(n)),n=!1,yi.navigator&&yi.navigator.sendBeacon)try{n=yi.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&yi.Image&&((new Image).src=t.A,n=!0),n||(t.g=Xa(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Co(t)}$a(e)}function La(e){e.g&&(qa(e),e.g.cancel(),e.g=null)}function Ma(e){La(e),e.u&&(yi.clearTimeout(e.u),e.u=null),Ha(e),e.i.cancel(),e.m&&("number"===typeof e.m&&yi.clearTimeout(e.m),e.m=null)}function Fa(e){if(!ta(e.i)&&!e.m){e.m=!0;var t=e.Na;Ps||Ds(),As||(Ps(),As=!0),Os.add(t,e),e.C=0}}function Ua(e,t){var n;n=t?t.m:e.W++;const r=Ao(e.I);Mo(r,"SID",e.K),Mo(r,"RID",n),Mo(r,"AID",e.V),ja(e,r),e.o&&e.s&&Pa(r,e.o,e.s),n=new fo(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Va(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ia(e.i,n),vo(n,r,t)}function ja(e,t){e.na&&rs(e.na,(function(e,n){Mo(t,n,e)})),e.h&&Ro({},(function(e,n){Mo(t,n,e)}))}function Va(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ei(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{ua(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function za(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ps||Ds(),As||(Ps(),As=!0),Os.add(t,e),e.A=0}}function Ba(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=to(Ei(e.Ma,e),Ga(e,e.A)),e.A++,!0)}function qa(e){null!=e.B&&(yi.clearTimeout(e.B),e.B=null)}function Wa(e){e.g=new fo(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ao(e.wa);Mo(t,"RID","rpc"),Mo(t,"SID",e.K),Mo(t,"AID",e.V),Mo(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Mo(t,"TO",e.qa),Mo(t,"TYPE","xmlhttp"),ja(e,t),e.o&&e.s&&Pa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Fo(Ao(t)),n.u=null,n.S=!0,_o(n,e)}function Ha(e){null!=e.v&&(yi.clearTimeout(e.v),e.v=null)}function Ka(e,t){var n=null;if(e.g==t){Ha(e),qa(e),e.g=null;var r=2}else{if(!ra(e.i,t))return;n=t.F,sa(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Cs(r=$s(),new eo(r,n)),Fa(e)}else za(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(na(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=to(Ei(e.Na,e,t),Ga(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ba(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qa(e,5);break;case 4:Qa(e,10);break;case 3:Qa(e,6);break;default:Qa(e,2)}}function Ga(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Qa(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ei(e.pb,e);n||(n=new Po("//www.google.com/images/cleardot.gif"),yi.location&&"http"==yi.location.protocol||Oo(n,"https"),Fo(n)),function(e,t){const n=new Hs;if(yi.Image){const r=new Image;r.onload=ki(ha,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ki(ha,n,r,"TestLoadImage: error",!1,t),r.onabort=ki(ha,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ki(ha,n,r,"TestLoadImage: timeout",!1,t),yi.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Zs(2);e.H=0,e.h&&e.h.za(t),$a(e),Ma(e)}function $a(e){if(e.H=0,e.ma=[],e.h){const t=oa(e.i);0==t.length&&0==e.j.length||(Ni(e.ma,t),Ni(e.ma,e.j),e.i.i.length=0,Ri(e.j),e.j.length=0),e.h.ya()}}function Ya(e,t,n){var r=n instanceof Po?Ao(n):new Po(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Do(r,r.m);else{var i=yi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Po(null);r&&Oo(s,r),t&&(s.g=t),i&&Do(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Mo(r,n,t),Mo(r,"VER",e.ra),ja(e,r),r}function Xa(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new _a(new da({ob:n})):new _a(e.va)).Oa(e.J),t}function Ja(){}function Za(){if(Vi&&!(10<=Number(Yi)))throw Error("Environmental error: no available transport.")}function el(e,t){Ss.call(this),this.g=new Oa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Oi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Oi(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new rl(this)}function tl(e){co.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function nl(){uo.call(this),this.status=1}function rl(e){this.g=e}function il(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function sl(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function ol(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(fi=_a.prototype).Oa=function(e){this.M=e},fi.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ao.g(),this.C=this.u?so(this.u):so(ao),this.g.onreadystatechange=Ei(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Ca(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=yi.FormData&&e instanceof yi.FormData,!(0<=Ii(Sa,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xa(this),0<this.B&&((this.L=function(e){return Vi&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ei(this.ua,this)):this.A=Us(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Ca(this,s)}},fi.ua=function(){"undefined"!=typeof mi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cs(this,"timeout"),this.abort(8))},fi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Cs(this,"complete"),Cs(this,"abort"),Ta(this))},fi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ta(this,!0)),_a.$.N.call(this)},fi.La=function(){this.s||(this.G||this.v||this.l?ka(this):this.kb())},fi.kb=function(){ka(this)},fi.isActive=function(){return!!this.g},fi.da=function(){try{return 2<Ia(this)?this.g.status:-1}catch(aa){return-1}},fi.ja=function(){try{return this.g?this.g.responseText:""}catch(aa){return""}},fi.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),va(t)}},fi.Ia=function(){return this.m},fi.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(fi=Oa.prototype).ra=8,fi.H=1,fi.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new fo(this,this.l,e);let s=this.s;if(this.U&&(s?(s=is(s),os(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Va(this,i,t),Mo(n=Ao(this.I),"RID",e),Mo(n,"CVER",22),this.F&&Mo(n,"X-HTTP-Session-Id",this.F),ja(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Na(s)))+"&"+t:this.o&&Pa(n,this.o,s)),ia(this.i,i),this.bb&&Mo(n,"TYPE","init"),this.P?(Mo(n,"$req",t),Mo(n,"SID","null"),i.aa=!0,vo(i,n,null)):vo(i,n,t),this.H=2}}else 3==this.H&&(e?Ua(this,e):0==this.j.length||ta(this.i)||Ua(this))},fi.Ma=function(){if(this.u=null,Wa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=to(Ei(this.jb,this),e)}},fi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zs(10),La(this),Wa(this))},fi.ib=function(){null!=this.v&&(this.v=null,La(this),Ba(this),Zs(19))},fi.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Zs(2)):(this.l.info("Failed to ping google.com"),Zs(1))},fi.isActive=function(){return!!this.h&&this.h.isActive(this)},(fi=Ja.prototype).Ba=function(){},fi.Aa=function(){},fi.za=function(){},fi.ya=function(){},fi.isActive=function(){return!0},fi.Va=function(){},Za.prototype.g=function(e,t){return new el(e,t)},Ti(el,Ss),el.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Zs(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ya(e,null,e.Y),Fa(e)},el.prototype.close=function(){Da(this.g)},el.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ks(e),e=n);t.j.push(new Jo(t.fb++,e)),3==t.H&&Fa(t)},el.prototype.N=function(){this.g.h=null,delete this.j,Da(this.g),delete this.g,el.$.N.call(this)},Ti(tl,co),Ti(nl,uo),Ti(rl,Ja),rl.prototype.Ba=function(){Cs(this.g,"a")},rl.prototype.Aa=function(e){Cs(this.g,new tl(e))},rl.prototype.za=function(e){Cs(this.g,new nl)},rl.prototype.ya=function(){Cs(this.g,"b")},Ti(il,(function(){this.blockSize=-1})),il.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},il.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)sl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){sl(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){sl(this,r),i=0;break}}this.h=i,this.i+=t},il.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var al={};function ll(e){return-128<=e&&128>e?function(e,t){var n=al;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new ol([0|e],0>e?-1:0)})):new ol([0|e],0>e?-1:0)}function cl(e){if(isNaN(e)||!isFinite(e))return hl;if(0>e)return ml(cl(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ul;return new ol(t,0)}var ul=4294967296,hl=ll(0),dl=ll(1),fl=ll(16777216);function pl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function gl(e){return-1==e.h}function ml(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new ol(n,~e.h).add(dl)}function yl(e,t){return e.add(ml(t))}function vl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function _l(e,t){this.g=e,this.h=t}function bl(e,t){if(pl(t))throw Error("division by zero");if(pl(e))return new _l(hl,hl);if(gl(e))return t=bl(ml(e),t),new _l(ml(t.g),ml(t.h));if(gl(t))return t=bl(e,ml(t)),new _l(ml(t.g),t.h);if(30<e.g.length){if(gl(e)||gl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=dl,r=t;0>=r.X(e);)n=wl(n),r=wl(r);var i=Sl(n,1),s=Sl(r,1);for(r=Sl(r,2),n=Sl(n,2);!pl(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Sl(r,1),n=Sl(n,1)}return t=yl(e,i.R(t)),new _l(i,t)}for(i=hl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=cl(n)).R(t);gl(o)||0<o.X(e);)o=(s=cl(n-=r)).R(t);pl(s)&&(s=dl),i=i.add(s),e=yl(e,o)}return new _l(i,e)}function wl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new ol(n,e.h)}function Sl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new ol(i,e.h)}(fi=ol.prototype).ea=function(){if(gl(this))return-ml(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ul+r)*t,t*=ul}return e},fi.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(pl(this))return"0";if(gl(this))return"-"+ml(this).toString(e);for(var t=cl(Math.pow(e,6)),n=this,r="";;){var i=bl(n,t).g,s=((0<(n=yl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(pl(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},fi.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},fi.X=function(e){return gl(e=yl(this,e))?-1:pl(e)?0:1},fi.abs=function(){return gl(this)?ml(this):this},fi.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ol(n,-2147483648&n[n.length-1]?-1:0)},fi.R=function(e){if(pl(this)||pl(e))return hl;if(gl(this))return gl(e)?ml(this).R(ml(e)):ml(ml(this).R(e));if(gl(e))return ml(this.R(ml(e)));if(0>this.X(fl)&&0>e.X(fl))return cl(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,vl(n,2*r+2*i),n[2*r+2*i+1]+=s*l,vl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,vl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,vl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new ol(n,0)},fi.gb=function(e){return bl(this,e).h},fi.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new ol(n,this.h&e.h)},fi.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new ol(n,this.h|e.h)},fi.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new ol(n,this.h^e.h)},Za.prototype.createWebChannel=Za.prototype.g,el.prototype.send=el.prototype.u,el.prototype.open=el.prototype.m,el.prototype.close=el.prototype.close,no.NO_ERROR=0,no.TIMEOUT=8,no.HTTP_ERROR=6,ro.COMPLETE="complete",oo.EventType=lo,lo.OPEN="a",lo.CLOSE="b",lo.ERROR="c",lo.MESSAGE="d",Ss.prototype.listen=Ss.prototype.O,_a.prototype.listenOnce=_a.prototype.P,_a.prototype.getLastError=_a.prototype.Sa,_a.prototype.getLastErrorCode=_a.prototype.Ia,_a.prototype.getStatus=_a.prototype.da,_a.prototype.getResponseJson=_a.prototype.Wa,_a.prototype.getResponseText=_a.prototype.ja,_a.prototype.send=_a.prototype.ha,_a.prototype.setWithCredentials=_a.prototype.Oa,il.prototype.digest=il.prototype.l,il.prototype.reset=il.prototype.reset,il.prototype.update=il.prototype.j,ol.prototype.add=ol.prototype.add,ol.prototype.multiply=ol.prototype.R,ol.prototype.modulo=ol.prototype.gb,ol.prototype.compare=ol.prototype.X,ol.prototype.toNumber=ol.prototype.ea,ol.prototype.toString=ol.prototype.toString,ol.prototype.getBits=ol.prototype.D,ol.fromNumber=cl,ol.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ml(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=cl(Math.pow(n,8)),i=hl,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=cl(Math.pow(n,o)),i=i.R(o).add(cl(a))):i=(i=i.R(r)).add(cl(a))}return i};var Cl=gi.createWebChannelTransport=function(){return new Za},El=gi.getStatEventTarget=function(){return $s()},kl=gi.ErrorCode=no,Tl=gi.EventType=ro,xl=gi.Event=Gs,Il=gi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Rl=(gi.FetchXmlHttpFactory=da,gi.WebChannel=oo),Nl=gi.XhrIo=_a,Pl=gi.Md5=il,Al=gi.Integer=ol;const Ol="@firebase/firestore";class Dl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dl.UNAUTHENTICATED=new Dl(null),Dl.GOOGLE_CREDENTIALS=new Dl("google-credentials-uid"),Dl.FIRST_PARTY=new Dl("first-party-uid"),Dl.MOCK_USER=new Dl("mock-user");let Ll="10.8.0";const Ml=new le("@firebase/firestore");function Fl(){return Ml.logLevel}function Ul(e){if(Ml.logLevel<=re.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zl);Ml.debug("Firestore (".concat(Ll,"): ").concat(e),...i)}}function jl(e){if(Ml.logLevel<=re.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zl);Ml.error("Firestore (".concat(Ll,"): ").concat(e),...i)}}function Vl(e){if(Ml.logLevel<=re.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zl);Ml.warn("Firestore (".concat(Ll,"): ").concat(e),...i)}}function zl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Bl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ll,") INTERNAL ASSERTION FAILED: ")+e;throw jl(t),new Error(t)}function ql(e,t){e||Bl()}function Wl(e,t){return e}const Hl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kl extends P{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Gl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ql{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class $l{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dl.UNAUTHENTICATED)))}shutdown(){}}class Yl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Xl{constructor(e){this.t=e,this.currentUser=Dl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Gl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Gl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ul("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ul("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Gl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ul("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ql("string"==typeof t.accessToken),new Ql(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ql(null===e||"string"==typeof e),new Dl(e)}}class Jl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Dl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Zl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Jl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Dl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ec{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ul("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ul("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ul("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ul("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ql("string"==typeof e.token),this.R=e.token,new ec(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class rc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=nc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ic(e,t){return e<t?-1:e>t?1:0}function sc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class oc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kl(Hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return oc.fromMillis(Date.now())}static fromDate(e){return oc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new oc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ic(this.nanoseconds,e.nanoseconds):ic(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ac{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ac(e)}static min(){return new ac(new oc(0,0))}static max(){return new ac(new oc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Bl(),void 0===n?n=e.length-t:n>e.length-t&&Bl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cc extends lc{construct(e,t,n){return new cc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Kl(Hl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new cc(e)}static emptyPath(){return new cc([])}}const uc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hc extends lc{construct(e,t,n){return new hc(e,t,n)}static isValidIdentifier(e){return uc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hc.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Kl(Hl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Kl(Hl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Kl(Hl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Kl(Hl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hc(t)}static emptyPath(){return new hc([])}}class dc{constructor(e){this.path=e}static fromPath(e){return new dc(cc.fromString(e))}static fromName(e){return new dc(cc.fromString(e).popFirst(5))}static empty(){return new dc(cc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dc(new cc(e.slice()))}}class fc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fc.UNKNOWN_ID=-1;function pc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ac.fromTimestamp(1e9===r?new oc(n+1,0):new oc(n,r));return new mc(i,dc.empty(),t)}function gc(e){return new mc(e.readTime,e.key,-1)}class mc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new mc(ac.min(),dc.empty(),-1)}static max(){return new mc(ac.max(),dc.empty(),-1)}}function yc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=dc.comparator(e.documentKey,t.documentKey),0!==n?n:ic(e.largestBatchId,t.largestBatchId))}const vc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _c{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bc(e){if(e.code!==Hl.FAILED_PRECONDITION||e.message!==vc)throw e;Ul("LocalStore","Unexpectedly lost primary lease")}class wc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof wc?t:wc.resolve(t)}catch(e){return wc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):wc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):wc.reject(t)}static resolve(e){return new wc(((t,n)=>{t(e)}))}static reject(e){return new wc(((t,n)=>{n(e)}))}static waitFor(e){return new wc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=wc.resolve(!1);for(const n of e)t=t.next((e=>e?wc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new wc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new wc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Sc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Gl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new kc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Nc(t.target.error);this.V.reject(new kc(e,n))}}static open(e,t,n,r){try{return new Sc(t,e.transaction(r,n))}catch(e){throw new kc(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ul("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new xc(t)}}class Cc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Cc.S(k())&&jl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ul("SimpleDb","Removing database:",e),Ic(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!N())return!1;if(Cc.C())return!0;const e=k(),t=Cc.S(e),n=0<t&&t<10,r=Cc.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Ul("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new kc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Kl(Hl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Kl(Hl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new kc(e,r))},r.onupgradeneeded=e=>{Ul("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Ul("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Sc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),wc.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ul("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ec{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ic(this.k.delete())}}class kc extends Kl{constructor(e,t){super(Hl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Tc(e){return"IndexedDbTransactionError"===e.name}class xc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ul("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ul("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ic(n)}add(e){return Ul("SimpleDb","ADD",this.store.name,e,e),Ic(this.store.add(e))}get(e){return Ic(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ul("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ul("SimpleDb","DELETE",this.store.name,e),Ic(this.store.delete(e))}count(){return Ul("SimpleDb","COUNT",this.store.name),Ic(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new wc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new wc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Ul("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new wc(((n,r)=>{t.onerror=e=>{const t=Nc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new wc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ec(i),o=t(i.primaryKey,i.value,s);if(o instanceof wc){const e=o.catch((e=>(s.done(),wc.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>wc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ic(e){return new wc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Nc(e.target.error);n(t)}}))}let Rc=!1;function Nc(e){const t=Cc.S(k());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Kl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Rc||(Rc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Pc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ac(e){return null==e}function Oc(e){return 0===e&&1/e==-1/0}function Dc(e){return"number"==typeof e&&Number.isInteger(e)&&!Oc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Pc._e=-1;const Lc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Mc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fc=Mc;function Uc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class zc{constructor(e,t){this.comparator=e,this.root=t||qc.EMPTY}insert(e,t){return new zc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qc.BLACK,null,null))}remove(e){return new zc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:qc.RED,this.left=null!=r?r:qc.EMPTY,this.right=null!=i?i:qc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new qc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return qc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bl();if(this.right.isRed())throw Bl();const e=this.left.check();if(e!==this.right.check())throw Bl();return e+(this.isRed()?0:1)}}qc.EMPTY=null,qc.RED=!0,qc.BLACK=!1,qc.EMPTY=new class{constructor(){this.size=0}get key(){throw Bl()}get value(){throw Bl()}get color(){throw Bl()}get left(){throw Bl()}get right(){throw Bl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new qc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wc{constructor(e){this.comparator=e,this.data=new zc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hc(this.data.getIterator())}getIteratorFrom(e){return new Hc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Wc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Wc(this.comparator);return t.data=e,t}}class Hc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kc{constructor(e){this.fields=e,e.sort(hc.comparator)}static empty(){return new Kc([])}unionWith(e){let t=new Wc(hc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Kc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Gc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gc("Invalid base64 string: "+e):e}}(e);return new Qc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Qc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ic(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qc.EMPTY_BYTE_STRING=new Qc("");const $c=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yc(e){if(ql(!!e),"string"==typeof e){let t=0;const n=$c.exec(e);if(ql(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Xc(e.seconds),nanos:Xc(e.nanos)}}function Xc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jc(e){return"string"==typeof e?Qc.fromBase64String(e):Qc.fromUint8Array(e)}function Zc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function eu(e){const t=e.mapValue.fields.__previous_value__;return Zc(t)?eu(t):t}function tu(e){const t=Yc(e.mapValue.fields.__local_write_time__.timestampValue);return new oc(t.seconds,t.nanos)}class nu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class ru{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ru("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}const iu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function su(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zc(e)?4:_u(e)?9007199254740991:10:Bl()}function ou(e,t){if(e===t)return!0;const n=su(e);if(n!==su(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tu(e).isEqual(tu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Yc(e.timestampValue),r=Yc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jc(e.bytesValue).isEqual(Jc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xc(e.geoPointValue.latitude)===Xc(t.geoPointValue.latitude)&&Xc(e.geoPointValue.longitude)===Xc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xc(e.integerValue)===Xc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Xc(e.doubleValue),r=Xc(t.doubleValue);return n===r?Oc(n)===Oc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sc(e.arrayValue.values||[],t.arrayValue.values||[],ou);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uc(n)!==Uc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ou(n[i],r[i])))return!1;return!0}(e,t);default:return Bl()}}function au(e,t){return void 0!==(e.values||[]).find((e=>ou(e,t)))}function lu(e,t){if(e===t)return 0;const n=su(e),r=su(t);if(n!==r)return ic(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ic(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Xc(e.integerValue||e.doubleValue),r=Xc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return cu(e.timestampValue,t.timestampValue);case 4:return cu(tu(e),tu(t));case 5:return ic(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Jc(e),r=Jc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ic(n[i],r[i]);if(0!==e)return e}return ic(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ic(Xc(e.latitude),Xc(t.latitude));return 0!==n?n:ic(Xc(e.longitude),Xc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=lu(n[i],r[i]);if(e)return e}return ic(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===iu.mapValue&&t===iu.mapValue)return 0;if(e===iu.mapValue)return 1;if(t===iu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ic(r[o],s[o]);if(0!==e)return e;const t=lu(n[r[o]],i[s[o]]);if(0!==t)return t}return ic(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Bl()}}function cu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ic(e,t);const n=Yc(e),r=Yc(t),i=ic(n.seconds,r.seconds);return 0!==i?i:ic(n.nanos,r.nanos)}function uu(e){return hu(e)}function hu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Yc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Jc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return dc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=hu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(hu(e.fields[i]));return n+"}"}(e.mapValue):Bl()}function du(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fu(e){return!!e&&"integerValue"in e}function pu(e){return!!e&&"arrayValue"in e}function gu(e){return!!e&&"nullValue"in e}function mu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yu(e){return!!e&&"mapValue"in e}function vu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=vu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _u(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class bu{constructor(e){this.value=e}static empty(){return new bu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=hc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=vu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());yu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ou(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){jc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new bu(vu(this.value))}}function wu(e){const t=[];return jc(e.fields,((e,n)=>{const r=new hc([e]);if(yu(n)){const e=wu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Kc(t)}class Su{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Su(e,0,ac.min(),ac.min(),ac.min(),bu.empty(),0)}static newFoundDocument(e,t,n,r){return new Su(e,1,t,ac.min(),n,r,0)}static newNoDocument(e,t){return new Su(e,2,t,ac.min(),ac.min(),bu.empty(),0)}static newUnknownDocument(e,t){return new Su(e,3,t,ac.min(),ac.min(),bu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ac.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ac.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Su&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Su(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Cu{constructor(e,t){this.position=e,this.inclusive=t}}function Eu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?dc.comparator(dc.fromName(o.referenceValue),n.key):lu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ku(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ou(e.position[n],t.position[n]))return!1;return!0}class Tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function xu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Iu{}class Ru extends Iu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fu(e,t,n):"array-contains"===t?new zu(e,n):"in"===t?new Bu(e,n):"not-in"===t?new qu(e,n):"array-contains-any"===t?new Wu(e,n):new Ru(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Uu(e,n):new ju(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lu(t,this.value)):null!==t&&su(this.value)===su(t)&&this.matchesComparison(lu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nu extends Iu{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Nu(e,t)}matches(e){return Pu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Pu(e){return"and"===e.op}function Au(e){return Ou(e)&&Pu(e)}function Ou(e){for(const t of e.filters)if(t instanceof Nu)return!1;return!0}function Du(e){if(e instanceof Ru)return e.field.canonicalString()+e.op.toString()+uu(e.value);if(Au(e))return e.filters.map((e=>Du(e))).join(",");{const t=e.filters.map((e=>Du(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Lu(e,t){return e instanceof Ru?function(e,t){return t instanceof Ru&&e.op===t.op&&e.field.isEqual(t.field)&&ou(e.value,t.value)}(e,t):e instanceof Nu?function(e,t){return t instanceof Nu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Lu(n,t.filters[r])),!0)}(e,t):void Bl()}function Mu(e){return e instanceof Ru?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(uu(e.value))}(e):e instanceof Nu?function(e){return e.op.toString()+" {"+e.getFilters().map(Mu).join(" ,")+"}"}(e):"Filter"}class Fu extends Ru{constructor(e,t,n){super(e,t,n),this.key=dc.fromName(n.referenceValue)}matches(e){const t=dc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Uu extends Ru{constructor(e,t){super(e,"in",t),this.keys=Vu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ju extends Ru{constructor(e,t){super(e,"not-in",t),this.keys=Vu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Vu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>dc.fromName(e.referenceValue)))}class zu extends Ru{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pu(t)&&au(t.arrayValue,this.value)}}class Bu extends Ru{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&au(this.value.arrayValue,t)}}class qu extends Ru{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!au(this.value.arrayValue,t)}}class Wu extends Ru{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>au(this.value.arrayValue,e)))}}class Hu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Ku(e){return new Hu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Gu(e){const t=Wl(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Du(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ac(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>uu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>uu(e))).join(",")),t.ce=e}return t.ce}function Qu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!xu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Lu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ku(e.startAt,t.startAt)&&ku(e.endAt,t.endAt)}function $u(e){return dc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Yu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Xu(e,t,n,r,i,s,o,a){return new Yu(e,t,n,r,i,s,o,a)}function Ju(e){return new Yu(e)}function Zu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function eh(e){return null!==e.collectionGroup}function th(e){const t=Wl(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Wc(hc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Tu(r,n))})),e.has(hc.keyField().canonicalString())||t.le.push(new Tu(hc.keyField(),n))}return t.le}function nh(e){const t=Wl(e);return t.he||(t.he=rh(t,th(e))),t.he}function rh(e,t){if("F"===e.limitType)return Ku(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Tu(e.field,t)}));const n=e.endAt?new Cu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Cu(e.startAt.position,e.startAt.inclusive):null;return Ku(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ih(e,t){const n=e.filters.concat([t]);return new Yu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function sh(e,t,n){return new Yu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oh(e,t){return Qu(nh(e),nh(t))&&e.limitType===t.limitType}function ah(e){return"".concat(Gu(nh(e)),"|lt:").concat(e.limitType)}function lh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Mu(e))).join(", "),"]")),Ac(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>uu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>uu(e))).join(",")),"Target(".concat(t,")")}(nh(e)),"; limitType=").concat(e.limitType,")")}function ch(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of th(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Eu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,th(e),t))&&!(e.endAt&&!function(e,t,n){const r=Eu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,th(e),t))}(e,t)}function uh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hh(e){return(t,n)=>{let r=!1;for(const i of th(e)){const e=dh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function dh(e,t,n){const r=e.field.isKeyField()?dc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lu(r,i):Bl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bl()}}class fh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){jc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Vc(this.inner)}size(){return this.innerSize}}const ph=new zc(dc.comparator);function gh(){return ph}const mh=new zc(dc.comparator);function yh(){let e=mh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function vh(e){let t=mh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function _h(){return wh()}function bh(){return wh()}function wh(){return new fh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Sh=new zc(dc.comparator),Ch=new Wc(dc.comparator);function Eh(){let e=Ch;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const kh=new Wc(ic);function Th(){return kh}function xh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(t)?"-0":t}}function Ih(e){return{integerValue:""+e}}function Rh(e,t){return Dc(t)?Ih(t):xh(e,t)}class Nh{constructor(){this._=void 0}}function Ph(e,t,n){return e instanceof Dh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zc(t)&&(t=eu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Lh?Mh(e,t):e instanceof Fh?Uh(e,t):function(e,t){const n=Oh(e,t),r=Vh(n)+Vh(e.Ie);return fu(n)&&fu(e.Ie)?Ih(r):xh(e.serializer,r)}(e,t)}function Ah(e,t,n){return e instanceof Lh?Mh(e,t):e instanceof Fh?Uh(e,t):n}function Oh(e,t){return e instanceof jh?function(e){return fu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Dh extends Nh{}class Lh extends Nh{constructor(e){super(),this.elements=e}}function Mh(e,t){const n=zh(t);for(const r of e.elements)n.some((e=>ou(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Fh extends Nh{constructor(e){super(),this.elements=e}}function Uh(e,t){let n=zh(t);for(const r of e.elements)n=n.filter((e=>!ou(e,r)));return{arrayValue:{values:n}}}class jh extends Nh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Vh(e){return Xc(e.integerValue||e.doubleValue)}function zh(e){return pu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Bh{constructor(e,t){this.version=e,this.transformResults=t}}class qh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qh}static exists(e){return new qh(void 0,e)}static updateTime(e){return new qh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Hh{}function Kh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new nd(e.key,qh.none()):new Xh(e.key,e.data,qh.none());{const n=e.data,r=bu.empty();let i=new Wc(hc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Jh(e.key,r,new Kc(i.toArray()),qh.none())}}function Gh(e,t,n){e instanceof Xh?function(e,t,n){const r=e.value.clone(),i=ed(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Jh?function(e,t,n){if(!Wh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ed(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Zh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qh(e,t,n,r){return e instanceof Xh?function(e,t,n,r){if(!Wh(e.precondition,t))return n;const i=e.value.clone(),s=td(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Jh?function(e,t,n,r){if(!Wh(e.precondition,t))return n;const i=td(e.fieldTransforms,r,t),s=t.data;return s.setAll(Zh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Wh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function $h(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Oh(r.transform,e||null);null!=i&&(null===n&&(n=bu.empty()),n.set(r.field,i))}return n||null}function Yh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Lh&&t instanceof Lh||e instanceof Fh&&t instanceof Fh?sc(e.elements,t.elements,ou):e instanceof jh&&t instanceof jh?ou(e.Ie,t.Ie):e instanceof Dh&&t instanceof Dh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xh extends Hh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Jh extends Hh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Zh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ed(e,t,n){const r=new Map;ql(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ah(o,a,n[i]))}return r}function td(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ph(e,s,t))}return r}class nd extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rd extends Hh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class id{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=bh();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Kh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ac.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Eh())}isEqual(e){return this.batchId===e.batchId&&sc(this.mutations,e.mutations,((e,t)=>Yh(e,t)))&&sc(this.baseMutations,e.baseMutations,((e,t)=>Yh(e,t)))}}class sd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ql(e.mutations.length===n.length);let r=Sh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new sd(e,t,n,r)}}class od{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ad{constructor(e,t){this.count=e,this.unchangedNames=t}}var ld,cd;function ud(e){switch(e){default:return Bl();case Hl.CANCELLED:case Hl.UNKNOWN:case Hl.DEADLINE_EXCEEDED:case Hl.RESOURCE_EXHAUSTED:case Hl.INTERNAL:case Hl.UNAVAILABLE:case Hl.UNAUTHENTICATED:return!1;case Hl.INVALID_ARGUMENT:case Hl.NOT_FOUND:case Hl.ALREADY_EXISTS:case Hl.PERMISSION_DENIED:case Hl.FAILED_PRECONDITION:case Hl.ABORTED:case Hl.OUT_OF_RANGE:case Hl.UNIMPLEMENTED:case Hl.DATA_LOSS:return!0}}function hd(e){if(void 0===e)return jl("GRPC error has no .code"),Hl.UNKNOWN;switch(e){case ld.OK:return Hl.OK;case ld.CANCELLED:return Hl.CANCELLED;case ld.UNKNOWN:return Hl.UNKNOWN;case ld.DEADLINE_EXCEEDED:return Hl.DEADLINE_EXCEEDED;case ld.RESOURCE_EXHAUSTED:return Hl.RESOURCE_EXHAUSTED;case ld.INTERNAL:return Hl.INTERNAL;case ld.UNAVAILABLE:return Hl.UNAVAILABLE;case ld.UNAUTHENTICATED:return Hl.UNAUTHENTICATED;case ld.INVALID_ARGUMENT:return Hl.INVALID_ARGUMENT;case ld.NOT_FOUND:return Hl.NOT_FOUND;case ld.ALREADY_EXISTS:return Hl.ALREADY_EXISTS;case ld.PERMISSION_DENIED:return Hl.PERMISSION_DENIED;case ld.FAILED_PRECONDITION:return Hl.FAILED_PRECONDITION;case ld.ABORTED:return Hl.ABORTED;case ld.OUT_OF_RANGE:return Hl.OUT_OF_RANGE;case ld.UNIMPLEMENTED:return Hl.UNIMPLEMENTED;case ld.DATA_LOSS:return Hl.DATA_LOSS;default:return Bl()}}(cd=ld||(ld={}))[cd.OK=0]="OK",cd[cd.CANCELLED=1]="CANCELLED",cd[cd.UNKNOWN=2]="UNKNOWN",cd[cd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cd[cd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cd[cd.NOT_FOUND=5]="NOT_FOUND",cd[cd.ALREADY_EXISTS=6]="ALREADY_EXISTS",cd[cd.PERMISSION_DENIED=7]="PERMISSION_DENIED",cd[cd.UNAUTHENTICATED=16]="UNAUTHENTICATED",cd[cd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cd[cd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cd[cd.ABORTED=10]="ABORTED",cd[cd.OUT_OF_RANGE=11]="OUT_OF_RANGE",cd[cd.UNIMPLEMENTED=12]="UNIMPLEMENTED",cd[cd.INTERNAL=13]="INTERNAL",cd[cd.UNAVAILABLE=14]="UNAVAILABLE",cd[cd.DATA_LOSS=15]="DATA_LOSS";let dd=null;function fd(){return new TextEncoder}const pd=new Al([4294967295,4294967295],0);function gd(e){const t=fd().encode(e),n=new Pl;return n.update(t),new Uint8Array(n.digest())}function md(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Al([n,r],0),new Al([i,s],0)]}class yd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vd("Invalid padding: ".concat(t));if(n<0)throw new vd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new vd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new vd("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Al.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Al.fromNumber(n)));return 1===r.compare(pd)&&(r=new Al([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=gd(e),[n,r]=md(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new yd(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=gd(e),[n,r]=md(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class vd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _d{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,bd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new _d(ac.min(),r,new zc(ic),gh(),Eh())}}class bd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new bd(n,t,Eh(),Eh(),Eh())}}class wd{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Sd{constructor(e,t){this.targetId=e,this.fe=t}}class Cd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ed{constructor(){this.ge=0,this.pe=xd(),this.ye=Qc.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Eh(),t=Eh(),n=Eh();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bl()}})),new bd(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=xd()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ql(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class kd{constructor(e){this.Le=e,this.ke=new Map,this.qe=gh(),this.Qe=Td(),this.Ke=new zc(ic)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Bl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if($u(i))if(0===n){const e=new dc(i.path);this.We(t,e,Su.newNoDocument(e,ac.min()))}else ql(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==dd||dd.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Jc(n).toUint8Array()}catch(e){if(e instanceof Gc)return Vl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new yd(s,r,i)}catch(e){return Vl(e instanceof vd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&$u(i.target)){const t=new dc(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Su.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Eh();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new _d(e,t,this.Ke,this.qe,n);return this.qe=gh(),this.Qe=Td(),this.Ke=new zc(ic),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Ed,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Wc(ic),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ul("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Ed),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Td(){return new zc(dc.comparator)}function xd(){return new zc(dc.comparator)}const Id={asc:"ASCENDING",desc:"DESCENDING"},Rd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nd={and:"AND",or:"OR"};class Pd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ad(e,t){return e.useProto3Json||Ac(t)?t:{value:t}}function Od(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ld(e,t){return Od(e,t.toTimestamp())}function Md(e){return ql(!!e),ac.fromTimestamp(function(e){const t=Yc(e);return new oc(t.seconds,t.nanos)}(e))}function Fd(e,t){return Ud(e,t).canonicalString()}function Ud(e,t){const n=function(e){return new cc(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function jd(e){const t=cc.fromString(e);return ql(of(t)),t}function Vd(e,t){return Fd(e.databaseId,t.path)}function zd(e,t){const n=jd(t);if(n.get(1)!==e.databaseId.projectId)throw new Kl(Hl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Kl(Hl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new dc(Hd(n))}function Bd(e,t){return Fd(e.databaseId,t)}function qd(e){const t=jd(e);return 4===t.length?cc.emptyPath():Hd(t)}function Wd(e){return new cc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hd(e){return ql(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kd(e,t,n){return{name:Vd(e,t),fields:n.value.mapValue.fields}}function Gd(e,t){let n;if(t instanceof Xh)n={update:Kd(e,t.key,t.value)};else if(t instanceof nd)n={delete:Vd(e,t.key)};else if(t instanceof Jh)n={update:Kd(e,t.key,t.data),updateMask:sf(t.fieldMask)};else{if(!(t instanceof rd))return Bl();n={verify:Vd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Dh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jh)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Bl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ld(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bl()}(e,t.precondition)),n}function Qd(e,t){return{documents:[Bd(e,t.path)]}}function $d(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bd(e,i);const s=function(e){if(0!==e.length)return rf(Nu.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:tf(e.field),direction:Jd(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ad(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Yd(e){let t=qd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ql(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Xd(e);return t instanceof Nu&&Au(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Tu(nf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ac(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Cu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Cu(n,t)}(n.endAt)),Xu(t,i,o,s,a,"F",l,c)}function Xd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=nf(e.unaryFilter.field);return Ru.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=nf(e.unaryFilter.field);return Ru.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=nf(e.unaryFilter.field);return Ru.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=nf(e.unaryFilter.field);return Ru.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Bl()}}(e):void 0!==e.fieldFilter?function(e){return Ru.create(nf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Nu.create(e.compositeFilter.filters.map((e=>Xd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Bl()}}(e.compositeFilter.op))}(e):Bl()}function Jd(e){return Id[e]}function Zd(e){return Rd[e]}function ef(e){return Nd[e]}function tf(e){return{fieldPath:e.canonicalString()}}function nf(e){return hc.fromServerFormat(e.fieldPath)}function rf(e){return e instanceof Ru?function(e){if("=="===e.op){if(mu(e.value))return{unaryFilter:{field:tf(e.field),op:"IS_NAN"}};if(gu(e.value))return{unaryFilter:{field:tf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(mu(e.value))return{unaryFilter:{field:tf(e.field),op:"IS_NOT_NAN"}};if(gu(e.value))return{unaryFilter:{field:tf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tf(e.field),op:Zd(e.op),value:e.value}}}(e):e instanceof Nu?function(e){const t=e.getFilters().map((e=>rf(e)));return 1===t.length?t[0]:{compositeFilter:{op:ef(e.op),filters:t}}}(e):Bl()}function sf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function of(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class af{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ac.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ac.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qc.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new af(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new af(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lf{constructor(e){this.ct=e}}function cf(e){const t=Yd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?sh(t,t.limit,"L"):t}class uf{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Xc(e.integerValue));else if("doubleValue"in e){const n=Xc(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Oc(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Jc(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?_u(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Bl()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),dc.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}uf.bt=new uf;class hf{constructor(){this._n=new df}addToCollectionParentIndex(e,t){return this._n.add(t),wc.resolve()}getCollectionParents(e,t){return wc.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return wc.resolve()}deleteFieldIndex(e,t){return wc.resolve()}deleteAllFieldIndexes(e){return wc.resolve()}createTargetIndexes(e,t){return wc.resolve()}getDocumentsMatchingTarget(e,t){return wc.resolve(null)}getIndexType(e,t){return wc.resolve(0)}getFieldIndexes(e,t){return wc.resolve([])}getNextCollectionGroupToUpdate(e){return wc.resolve(null)}getMinOffset(e,t){return wc.resolve(mc.min())}getMinOffsetFromCollectionGroup(e,t){return wc.resolve(mc.min())}updateCollectionGroup(e,t,n){return wc.resolve()}updateIndexEntries(e,t){return wc.resolve()}}class df{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wc(cc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Wc(cc.comparator)).toArray()}}new Uint8Array(0);class ff{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ff(e,ff.DEFAULT_COLLECTION_PERCENTILE,ff.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ff.DEFAULT_COLLECTION_PERCENTILE=10,ff.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ff.DEFAULT=new ff(41943040,ff.DEFAULT_COLLECTION_PERCENTILE,ff.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ff.DISABLED=new ff(-1,0,0);class pf{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new pf(0)}static Bn(){return new pf(-1)}}class gf{constructor(){this.changes=new fh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Su.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Qh(n.mutation,e,Kc.empty(),oc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Eh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eh();const r=_h();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=yh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=_h();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Eh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=gh();const s=wh(),o=wh();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Jh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Qh(o.mutation,t,o.mutation.getFieldMask(),oc.now())):s.set(t.key,Kc.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new mf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=wh();let r=new zc(((e,t)=>e-t)),i=Eh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Kc.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Eh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=bh();l.forEach((e=>{if(!i.has(e)){const r=Kh(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return wc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return dc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):wc.resolve(_h());let o=-1,a=i;return s.next((t=>wc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?wc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Eh()))).next((e=>({batchId:o,changes:vh(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dc(t)).next((e=>{let t=yh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=yh();return this.indexManager.getCollectionParents(e,i).next((o=>wc.forEach(o,(o=>{const a=function(e,t){return new Yu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Su.newInvalidDocument(r)))}));let n=yh();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Qh(s.mutation,r,Kc.empty(),oc.now()),ch(t,r)&&(n=n.insert(e,r))})),n}))}}class vf{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return wc.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Md(e.createTime)}}(t)),wc.resolve()}getNamedQuery(e,t){return wc.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:cf(e.bundledQuery),readTime:Md(e.readTime)}}(t)),wc.resolve()}}class _f{constructor(){this.overlays=new zc(dc.comparator),this.hr=new Map}getOverlay(e,t){return wc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_h();return wc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),wc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),wc.resolve()}getOverlaysForCollection(e,t,n){const r=_h(),i=t.length+1,s=new dc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return wc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new zc(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=_h(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=_h(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return wc.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new od(t,n));let i=this.hr.get(t);void 0===i&&(i=Eh(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class bf{constructor(){this.Pr=new Wc(wf.Ir),this.Tr=new Wc(wf.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new wf(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new wf(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new dc(new cc([])),n=new wf(t,e),r=new wf(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new dc(new cc([])),n=new wf(t,e),r=new wf(t,e+1);let i=Eh();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wf(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wf{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return dc.comparator(e.key,t.key)||ic(e.pr,t.pr)}static Er(e,t){return ic(e.pr,t.pr)||dc.comparator(e.key,t.key)}}class Sf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Wc(wf.Ir)}checkEmpty(e){return wc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new id(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new wf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return wc.resolve(s)}lookupMutationBatch(e,t){return wc.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return wc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return wc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return wc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wf(t,0),r=new wf(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),wc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wc(ic);return t.forEach((e=>{const t=new wf(e,0),r=new wf(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),wc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;dc.isDocumentKey(i)||(i=i.child(""));const s=new wf(new dc(i),0);let o=new Wc(ic);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),wc.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ql(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return wc.forEach(t.mutations,(r=>{const i=new wf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new wf(t,0),r=this.wr.firstAfterOrEqual(n);return wc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,wc.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Cf{constructor(e){this.vr=e,this.docs=new zc(dc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wc.resolve(n?n.document.mutableCopy():Su.newInvalidDocument(t))}getEntries(e,t){let n=gh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Su.newInvalidDocument(e))})),wc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=gh();const s=t.path,o=new dc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||yc(gc(o),n)<=0||(r.has(o.key)||ch(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return wc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Bl()}Fr(e,t){return wc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ef(this)}getSize(e){return wc.resolve(this.size)}}class Ef extends gf{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),wc.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class kf{constructor(e){this.persistence=e,this.Mr=new fh((e=>Gu(e)),Qu),this.lastRemoteSnapshotVersion=ac.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bf,this.targetCount=0,this.Br=pf.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),wc.resolve()}getLastRemoteSnapshotVersion(e){return wc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wc.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),wc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),wc.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new pf(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,wc.resolve()}updateTargetData(e,t){return this.qn(t),wc.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,wc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),wc.waitFor(i).next((()=>r))}getTargetCount(e){return wc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return wc.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),wc.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),wc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),wc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return wc.resolve(n)}containsKey(e,t){return wc.resolve(this.Nr.containsKey(t))}}class Tf{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Pc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new kf(this),this.indexManager=new hf,this.remoteDocumentCache=function(e){return new Cf(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new lf(t),this.$r=new vf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _f,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Sf(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ul("MemoryPersistence","Starting transaction:",e);const r=new xf(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return wc.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class xf extends _c{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.zr=new bf,this.jr=null}static Hr(e){return new If(e)}get Jr(){if(this.jr)return this.jr;throw Bl()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),wc.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),wc.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),wc.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wc.forEach(this.Jr,(n=>{const r=dc.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ac.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return wc.or([()=>wc.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Rf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Eh(),r=Eh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Rf(e,t.fromCache,n,r)}}class Nf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Pf{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=R()?8:Cc.v(k())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Nf;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Fl()<=re.DEBUG&&Ul("QueryEngine","SDK will not create cache indexes for query:",lh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),wc.resolve()):(Fl()<=re.DEBUG&&Ul("QueryEngine","Query:",lh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Fl()<=re.DEBUG&&Ul("QueryEngine","The SDK decides to create cache indexes for query:",lh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nh(t))):wc.resolve())}ji(e,t){if(Zu(t))return wc.resolve(null);let n=nh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=sh(t,null,"F"),n=nh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Eh(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,sh(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Zu(t)||r.isEqual(ac.min())?wc.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?wc.resolve(null):(Fl()<=re.DEBUG&&Ul("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lh(t)),this.es(e,s,t,pc(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Wc(hh(e));return t.forEach(((t,r)=>{ch(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Fl()<=re.DEBUG&&Ul("QueryEngine","Using full collection scan to execute query:",lh(t)),this.zi.getDocumentsMatchingQuery(e,t,mc.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Af{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new zc(ic),this.rs=new fh((e=>Gu(e)),Qu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Of(e,t,n,r){return new Af(e,t,n,r)}async function Df(e,t){const n=Wl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Eh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Lf(e){const t=Wl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Mf(e,t,n){let r=Eh(),i=Eh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=gh();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ac.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ul("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Ff(e,t){const n=Wl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Uf(e,t){const n=Wl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,wc.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new af(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function jf(e,t,n){const r=Wl(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Tc(e))throw e;Ul("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Vf(e,t,n){const r=Wl(e);let i=ac.min(),s=Eh();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Wl(e),i=r.rs.get(n);return void 0!==i?wc.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,nh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ac.min(),n?s:Eh()))).next((e=>(zf(r,uh(t),e),{documents:e,hs:s})))))}function zf(e,t,n){let r=e.ss.get(t)||ac.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}class Bf{constructor(){this.activeTargetIds=Th()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qf{constructor(){this.no=new Bf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Bf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wf{io(e){}shutdown(){}}class Hf{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ul("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ul("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Kf=null;function Gf(){return null===Kf?Kf=268435456+Math.round(2147483648*Math.random()):Kf++,"0x"+Kf.toString(16)}const Qf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $f{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Yf="WebChannelConnection";class Xf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Gf(),o=this.bo(e,t.toUriEncodedString());Ul("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Ul("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Vl("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ll,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Qf[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Gf();return new Promise(((s,o)=>{const a=new Nl;a.setWithCredentials(!0),a.listenOnce(Tl.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case kl.NO_ERROR:const t=a.getResponseJson();Ul(Yf,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case kl.TIMEOUT:Ul(Yf,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Kl(Hl.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const n=a.getStatus();if(Ul(Yf,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Hl).indexOf(t)>=0?t:Hl.UNKNOWN}(t.status);o(new Kl(e,t.message))}else o(new Kl(Hl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Kl(Hl.UNAVAILABLE,"Connection failed."));break;default:Bl()}}finally{Ul(Yf,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Ul(Yf,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Gf(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Cl(),o=El(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ul(Yf,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new $f({lo:t=>{d?Ul(Yf,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ul(Yf,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ul(Yf,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Rl.EventType.OPEN,(()=>{d||Ul(Yf,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Rl.EventType.CLOSE,(()=>{d||(d=!0,Ul(Yf,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Rl.EventType.ERROR,(t=>{d||(d=!0,Vl(Yf,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Kl(Hl.UNAVAILABLE,"The operation could not be completed")))})),p(u,Rl.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];ql(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ul(Yf,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=ld[e];if(void 0!==t)return hd(t)}(t),i=o.message;void 0===n&&(n=Hl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Kl(n,i)),u.close()}else Ul(Yf,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,xl.STAT_EVENT,(t=>{t.stat===Il.PROXY?Ul(Yf,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Il.NOPROXY&&Ul(Yf,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function Jf(){return"undefined"!=typeof document?document:null}function Zf(e){return new Pd(e,!0)}class ep{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Ul("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class tp{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new ep(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Hl.RESOURCE_EXHAUSTED?(jl(t.toString()),jl("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Hl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Kl(Hl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Ul("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Ul("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class np extends tp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ql(void 0===t||"string"==typeof t),Qc.fromBase64String(t||"")):(ql(void 0===t||t instanceof Uint8Array),Qc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Hl.UNKNOWN:hd(e.code);return new Kl(t,e.message||"")}(o);n=new Cd(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=zd(e,r.document.name),s=Md(r.document.updateTime),o=r.document.createTime?Md(r.document.createTime):ac.min(),a=new bu({mapValue:{fields:r.document.fields}}),l=Su.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new wd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=zd(e,r.document),s=r.readTime?Md(r.readTime):ac.min(),o=Su.newNoDocument(i,s),a=r.removedTargetIds||[];n=new wd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=zd(e,r.document),s=r.removedTargetIds||[];n=new wd([],s,i,null)}else{if(!("filter"in t))return Bl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ad(r,i),o=e.targetId;n=new Sd(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ac.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ac.min():t.readTime?Md(t.readTime):ac.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Wd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=$u(r)?{documents:Qd(e,r)}:{query:$d(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Dd(e,t.resumeToken);const r=Ad(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ac.min())>0){n.readTime=Od(e,t.snapshotVersion.toTimestamp());const r=Ad(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Wd(this.serializer),t.removeTarget=e,this.t_(t)}}class rp extends tp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(ql(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(ql(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Md(e.updateTime):Md(t);return n.isEqual(ac.min())&&(n=Md(t)),new Bh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Md(e.commitTime);return this.listener.T_(n,t)}return ql(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Wd(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Gd(this.serializer,e)))};this.t_(t)}}class ip extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Kl(Hl.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Ud(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Hl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Hl.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Ud(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Hl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Hl.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class sp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(jl(t),this.g_=!1):Ul("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class op{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{gp(this)&&(Ul("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Wl(e);t.v_.add(4),await lp(t),t.x_.set("Unknown"),t.v_.delete(4),await ap(t)}(this))}))})),this.x_=new sp(n,r)}}async function ap(e){if(gp(e))for(const t of e.F_)await t(!0)}async function lp(e){for(const t of e.F_)await t(!1)}function cp(e,t){const n=Wl(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),pp(n)?fp(n):Op(n).Jo()&&hp(n,t))}function up(e,t){const n=Wl(e),r=Op(n);n.C_.delete(t),r.Jo()&&dp(n,t),0===n.C_.size&&(r.Jo()?r.Xo():gp(n)&&n.x_.set("Unknown"))}function hp(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ac.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Op(e).c_(t)}function dp(e,t){e.O_.Oe(t),Op(e).l_(t)}function fp(e){e.O_=new kd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Op(e).start(),e.x_.p_()}function pp(e){return gp(e)&&!Op(e).Ho()&&e.C_.size>0}function gp(e){return 0===Wl(e).v_.size}function mp(e){e.O_=void 0}async function yp(e){e.C_.forEach(((t,n)=>{hp(e,t)}))}async function vp(e,t){mp(e),pp(e)?(e.x_.S_(t),fp(e)):e.x_.set("Unknown")}async function _p(e,t,n){if(e.x_.set("Online"),t instanceof Cd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Ul("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await bp(e,n)}else if(t instanceof wd?e.O_.$e(t):t instanceof Sd?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(ac.min()))try{const t=await Lf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Qc.EMPTY_BYTE_STRING,r.snapshotVersion)),dp(e,t);const i=new af(r.target,t,n,r.sequenceNumber);hp(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ul("RemoteStore","Failed to raise snapshot:",t),await bp(e,t)}}async function bp(e,t,n){if(!Tc(t))throw t;e.v_.add(1),await lp(e),e.x_.set("Offline"),n||(n=()=>Lf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ul("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await ap(e)}))}function wp(e,t){return t().catch((n=>bp(e,n,t)))}async function Sp(e){const t=Wl(e),n=Dp(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Cp(t);)try{const e=await Ff(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Ep(t,e)}catch(e){await bp(t,e)}kp(t)&&Tp(t)}function Cp(e){return gp(e)&&e.D_.length<10}function Ep(e,t){e.D_.push(t);const n=Dp(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function kp(e){return gp(e)&&!Dp(e).Ho()&&e.D_.length>0}function Tp(e){Dp(e).start()}async function xp(e){Dp(e).d_()}async function Ip(e){const t=Dp(e);for(const n of e.D_)t.I_(n.mutations)}async function Rp(e,t,n){const r=e.D_.shift(),i=sd.from(r,t,n);await wp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Sp(e)}async function Np(e,t){t&&Dp(e).P_&&await async function(e,t){if(function(e){return ud(e)&&e!==Hl.ABORTED}(t.code)){const n=e.D_.shift();Dp(e).Zo(),await wp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Sp(e)}}(e,t),kp(e)&&Tp(e)}async function Pp(e,t){const n=Wl(e);n.asyncQueue.verifyOperationInProgress(),Ul("RemoteStore","RemoteStore received new credentials");const r=gp(n);n.v_.add(3),await lp(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await ap(n)}async function Ap(e,t){const n=Wl(e);t?(n.v_.delete(2),await ap(n)):t||(n.v_.add(2),await lp(n),n.x_.set("Unknown"))}function Op(e){return e.N_||(e.N_=function(e,t,n){const r=Wl(e);return r.R_(),new np(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:yp.bind(null,e),To:vp.bind(null,e),u_:_p.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),pp(e)?fp(e):e.x_.set("Unknown")):(await e.N_.stop(),mp(e))}))),e.N_}function Dp(e){return e.B_||(e.B_=function(e,t,n){const r=Wl(e);return r.R_(),new rp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:xp.bind(null,e),To:Np.bind(null,e),E_:Ip.bind(null,e),T_:Rp.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Sp(e)):(await e.B_.stop(),e.D_.length>0&&(Ul("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class Lp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Gl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Lp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kl(Hl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(e,t){if(jl("AsyncQueue","".concat(t,": ").concat(e)),Tc(e))return new Kl(Hl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Fp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||dc.comparator(t.key,n.key):(e,t)=>dc.comparator(e.key,t.key),this.keyedMap=yh(),this.sortedSet=new zc(this.comparator)}static emptySet(e){return new Fp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Fp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Up{constructor(){this.L_=new zc(dc.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Bl():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class jp{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new jp(e,t,Fp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Vp{constructor(){this.q_=void 0,this.Q_=[]}}class zp{constructor(){this.queries=new fh((e=>ah(e)),oh),this.onlineState="Unknown",this.K_=new Set}}async function Bp(e,t){const n=Wl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Vp),i)try{s.q_=await n.onListen(r)}catch(e){const n=Mp(e,"Initialization of query '".concat(lh(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&Kp(n)}async function qp(e,t){const n=Wl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Wp(e,t){const n=Wl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Kp(n)}function Hp(e,t,n){const r=Wl(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Kp(e){e.K_.forEach((e=>{e.next()}))}class Gp{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new jp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Qp{constructor(e){this.key=e}}class $p{constructor(e){this.key=e}}class Yp{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Eh(),this.mutatedKeys=Eh(),this.ua=hh(e),this.ca=new Fp(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new Up,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=ch(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||l&&this.ua(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bl()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new jp(this.query,e.ca,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Up,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Eh(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new $p(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new Qp(n))})),t}Ra(e){this.oa=e.hs,this.aa=Eh();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return jp.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Xp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Jp{constructor(e){this.key=e,this.ma=!1}}class Zp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new fh((e=>ah(e)),oh),this.pa=new Map,this.ya=new Set,this.wa=new zc(dc.comparator),this.Sa=new Map,this.ba=new bf,this.Da={},this.Ca=new Map,this.va=pf.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function eg(e,t){const n=vg(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Uf(n.localStore,nh(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await tg(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&cp(n.remoteStore,e)}return i}async function tg(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Vf(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return dg(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await Vf(e.localStore,t,!0),o=new Yp(t,s.hs),a=o.ha(s.documents),l=bd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);dg(e,n,c.da);const u=new Xp(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),c.snapshot}async function ng(e,t){const n=Wl(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!oh(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await jf(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),up(n.remoteStore,r.targetId),ug(n,r.targetId)})).catch(bc)):(ug(n,r.targetId),await jf(n.localStore,r.targetId,!0))}async function rg(e,t){const n=Wl(e);try{const e=await function(e,t){const n=Wl(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Qc.EMPTY_BYTE_STRING,ac.min()).withLastLimboFreeSnapshotVersion(ac.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=gh(),l=Eh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Mf(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(ac.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return wc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(ql(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?ql(r.ma):e.removedDocuments.size>0&&(ql(r.ma),r.ma=!1))})),await gg(n,e,t)}catch(e){await bc(e)}}function ig(e,t,n){const r=Wl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Wl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Kp(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sg(e,t,n){const r=Wl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new zc(dc.comparator);e=e.insert(s,Su.newNoDocument(s,ac.min()));const n=Eh().add(s),i=new _d(ac.min(),new Map,new zc(ic),e,n);await rg(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),pg(r)}else await jf(r.localStore,t,!1).then((()=>ug(r,t,n))).catch(bc)}async function og(e,t){const n=Wl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Wl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=wc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ql(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Eh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);cg(n,r,null),lg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gg(n,e)}catch(e){await bc(e)}}async function ag(e,t,n){const r=Wl(e);try{const e=await function(e,t){const n=Wl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ql(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);cg(r,t,n),lg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await gg(r,e)}catch(n){await bc(n)}}function lg(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function cg(e,t,n){const r=Wl(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function ug(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||hg(e,t)}))}function hg(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(up(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),pg(e))}function dg(e,t,n){for(const r of n)r instanceof Qp?(e.ba.addReference(r.key,t),fg(e,r)):r instanceof $p?(Ul("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||hg(e,r.key)):Bl()}function fg(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Ul("SyncEngine","New document in limbo: "+n),e.ya.add(r),pg(e))}function pg(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new dc(cc.fromString(t)),r=e.va.next();e.Sa.set(r,new Jp(n)),e.wa=e.wa.insert(n,r),cp(e.remoteStore,new af(nh(Ju(n.path)),r,"TargetPurposeLimboResolution",Pc._e))}}async function gg(e,t,n){const r=Wl(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Rf.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Wl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>wc.forEach(t,(t=>wc.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>wc.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Tc(e))throw e;Ul("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function mg(e,t){const n=Wl(e);if(!n.currentUser.isEqual(t)){Ul("SyncEngine","User change. New user:",t.toKey());const e=await Df(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Kl(Hl.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await gg(n,e.us)}}function yg(e,t){const n=Wl(e),r=n.Sa.get(t);if(r&&r.ma)return Eh().add(r.key);{let e=Eh();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}function vg(e){const t=Wl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sg.bind(null,t),t.fa.u_=Wp.bind(null,t.eventManager),t.fa.xa=Hp.bind(null,t.eventManager),t}function _g(e){const t=Wl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=og.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ag.bind(null,t),t}class bg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Zf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Of(this.persistence,new Pf,e.initialUser,this.serializer)}createPersistence(e){return new Tf(If.Hr,this.serializer)}createSharedClientState(e){return new qf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ig(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=mg.bind(null,this.syncEngine),await Ap(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zp}createDatastore(e){const t=Zf(e.databaseInfo.databaseId),n=function(e){return new Xf(e)}(e.databaseInfo);return function(e,t,n,r){return new ip(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new op(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>ig(this.syncEngine,e,0)),Hf.D()?new Hf:new Wf)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Zp(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Wl(e);Ul("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await lp(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Sg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):jl("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Cg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Dl.UNAUTHENTICATED,this.clientId=rc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ul("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ul("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Kl(Hl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Mp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Eg(e,t){e.asyncQueue.verifyOperationInProgress(),Ul("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Df(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function kg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xg(e);Ul("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Pp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Pp(t.remoteStore,n))),e._onlineComponents=t}function Tg(e){return"FirebaseError"===e.name?e.code===Hl.FAILED_PRECONDITION||e.code===Hl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function xg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ul("FirestoreClient","Using user provided OfflineComponentProvider");try{await Eg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Tg(n))throw n;Vl("Error using user provided cache. Falling back to memory cache: "+n),await Eg(e,new bg)}}else Ul("FirestoreClient","Using default OfflineComponentProvider"),await Eg(e,new bg);return e._offlineComponents}async function Ig(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ul("FirestoreClient","Using user provided OnlineComponentProvider"),await kg(e,e._uninitializedComponentsProvider._online)):(Ul("FirestoreClient","Using default OnlineComponentProvider"),await kg(e,new wg))),e._onlineComponents}function Rg(e){return Ig(e).then((e=>e.syncEngine))}async function Ng(e){const t=await Ig(e),n=t.eventManager;return n.onListen=eg.bind(null,t.syncEngine),n.onUnlisten=ng.bind(null,t.syncEngine),n}function Pg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Gl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Sg({next:s=>{t.enqueueAndForget((()=>qp(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Kl(Hl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Kl(Hl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Gp(Ju(n.path),s,{includeMetadataChanges:!0,Z_:!0});return Bp(e,o)}(await Ng(e),e.asyncQueue,t,n,r))),r.promise}function Ag(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Gl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Sg({next:n=>{t.enqueueAndForget((()=>qp(e,o))),n.fromCache&&"server"===r.source?i.reject(new Kl(Hl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Gp(n,s,{includeMetadataChanges:!0,Z_:!0});return Bp(e,o)}(await Ng(e),e.asyncQueue,t,n,r))),r.promise}function Og(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Dg=new Map;function Lg(e,t,n){if(!n)throw new Kl(Hl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Mg(e){if(!dc.isDocumentKey(e))throw new Kl(Hl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fg(e){if(dc.isDocumentKey(e))throw new Kl(Hl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ug(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Bl()}function jg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Kl(Hl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ug(e);throw new Kl(Hl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Vg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Kl(Hl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Kl(Hl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Kl(Hl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Og(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Kl(Hl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Kl(Hl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Kl(Hl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Kl(Hl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Kl(Hl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $l;switch(e.type){case"firstParty":return new Zl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Kl(Hl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Dg.get(e);t&&(Ul("ComponentProvider","Removing Datastore"),Dg.delete(e),t.terminate())}(this),Promise.resolve()}}class Bg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bg(this.firestore,e,this._query)}}class qg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qg(this.firestore,e,this._key)}}class Wg extends Bg{constructor(e,t,n){super(e,t,Ju(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qg(this.firestore,null,new dc(e))}withConverter(e){return new Wg(this.firestore,e,this._path)}}function Hg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=X(e),Lg("collection","path",t),e instanceof zg){const n=cc.fromString(t,...r);return Fg(n),new Wg(e,null,n)}{if(!(e instanceof qg||e instanceof Wg))throw new Kl(Hl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...r));return Fg(n),new Wg(e.firestore,null,n)}}function Kg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=X(e),1===arguments.length&&(t=rc.newId()),Lg("doc","path",t),e instanceof zg){const n=cc.fromString(t,...r);return Mg(n),new qg(e,null,new dc(n))}{if(!(e instanceof qg||e instanceof Wg))throw new Kl(Hl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...r));return Mg(n),new qg(e.firestore,e instanceof Wg?e.converter:null,new dc(n))}}class Gg{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new ep(this,"async_queue_retry"),this._u=()=>{const e=Jf();e&&Ul("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Jf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Jf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Gl;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Tc(e))throw e;Ul("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw jl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=Lp.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Bl()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Qg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class $g extends zg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xg(this),this._firestoreClient.terminate()}}function Yg(e){return e._firestoreClient||Xg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Xg(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new nu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Og(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Cg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Jg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jg(Qc.fromBase64String(e))}catch(e){throw new Kl(Hl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Jg(Qc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Kl(Hl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class em{constructor(e){this._methodName=e}}class tm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Kl(Hl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Kl(Hl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ic(this._lat,e._lat)||ic(this._long,e._long)}}const nm=/^__.*__$/;class rm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Jh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xh(e,this.data,t,this.fieldTransforms)}}class im{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Jh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bl()}}class om{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new om(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return wm(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(sm(this.du)&&nm.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class am{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Zf(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new om({du:e,methodName:t,wu:n,path:hc.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lm(e){const t=e._freezeSettings(),n=Zf(e._databaseId);return new am(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cm(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);ym("Data must be an object, but it was:",o,r);const a=gm(r,o);let l,c;if(s.merge)l=new Kc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=vm(t,r,n);if(!o.contains(i))throw new Kl(Hl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Sm(e,i)||e.push(i)}l=new Kc(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new rm(new bu(a),l,c)}class um extends em{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof um}}function hm(e,t,n,r){const i=e.Su(1,t,n);ym("Data must be an object, but it was:",i,r);const s=[],o=bu.empty();jc(r,((e,r)=>{const a=bm(t,e,n);r=X(r);const l=i.fu(a);if(r instanceof um)s.push(a);else{const e=pm(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Kc(s);return new im(o,a,i.fieldTransforms)}function dm(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[vm(t,r,n)],l=[i];if(s.length%2!=0)throw new Kl(Hl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(vm(t,s[d])),l.push(s[d+1]);const c=[],u=bu.empty();for(let d=a.length-1;d>=0;--d)if(!Sm(c,a[d])){const e=a[d];let t=l[d];t=X(t);const n=o.fu(e);if(t instanceof um)c.push(e);else{const r=pm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Kc(c);return new im(u,h,o.fieldTransforms)}function fm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return pm(n,e.Su(r?4:3,t))}function pm(e,t){if(mm(e=X(e)))return ym("Unsupported field value:",t,e),gm(e,t);if(e instanceof em)return function(e,t){if(!sm(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=pm(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=X(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Rh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=oc.fromDate(e);return{timestampValue:Od(t.serializer,n)}}if(e instanceof oc){const n=new oc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Od(t.serializer,n)}}if(e instanceof tm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Jg)return{bytesValue:Dd(t.serializer,e._byteString)};if(e instanceof qg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Fd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Ug(e)))}(e,t)}function gm(e,t){const n={};return Vc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jc(e,((e,r)=>{const i=pm(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function mm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof oc||e instanceof tm||e instanceof Jg||e instanceof qg||e instanceof em)}function ym(e,t,n){if(!mm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ug(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function vm(e,t,n){if((t=X(t))instanceof Zg)return t._internalPath;if("string"==typeof t)return bm(e,t);throw wm("Field path arguments must be of type string or ",e,!1,void 0,n)}const _m=new RegExp("[~\\*/\\[\\]]");function bm(e,t,n){if(t.search(_m)>=0)throw wm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Zg(...t.split("."))._internalPath}catch(Ti){throw wm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function wm(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Kl(Hl.INVALID_ARGUMENT,a+e+l)}function Sm(e,t){return e.some((e=>e.isEqual(t)))}class Cm{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Em(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(km("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Em extends Cm{data(){return super.data()}}function km(e,t){return"string"==typeof t?bm(e,t):t instanceof Zg?t._internalPath:t._delegate._internalPath}function Tm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Kl(Hl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xm{}class Im extends xm{}function Rm(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof xm&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Am)).length,n=e.filter((e=>e instanceof Nm)).length;if(t>1||t>0&&n>0)throw new Kl(Hl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Nm extends Im{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Nm(e,t,n)}_apply(e){const t=this._parse(e);return Lm(e._query,t),new Bg(e.firestore,e.converter,ih(e._query,t))}_parse(e){const t=lm(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Kl(Hl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Dm(o,s);const t=[];for(const n of o)t.push(Om(r,e,n));a={arrayValue:{values:t}}}else a=Om(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Dm(o,s),a=fm(n,t,o,"in"===s||"not-in"===s);return Ru.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Pm(e,t,n){const r=t,i=km("where",e);return Nm._create(i,r,n)}class Am extends xm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Am(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Nu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Lm(n,i),n=ih(n,i)}(e._query,t),new Bg(e.firestore,e.converter,ih(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Om(e,t,n){if("string"==typeof(n=X(n))){if(""===n)throw new Kl(Hl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eh(t)&&-1!==n.indexOf("/"))throw new Kl(Hl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(cc.fromString(n));if(!dc.isDocumentKey(r))throw new Kl(Hl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return du(e,new dc(r))}if(n instanceof qg)return du(e,n._key);throw new Kl(Hl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ug(n),"."))}function Dm(e,t){if(!Array.isArray(e)||0===e.length)throw new Kl(Hl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Lm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Kl(Hl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Kl(Hl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Mm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return jc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new tm(Xc(e.latitude),Xc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=eu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=Yc(e);return new oc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cc.fromString(e);ql(of(n));const r=new ru(n.get(1),n.get(3)),i=new dc(n.popFirst(5));return r.isEqual(t)||jl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Fm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Um{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jm extends Cm{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(km("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Vm extends jm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class zm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Um(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Vm(this._firestore,this._userDataWriter,n.key,n,new Um(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Kl(Hl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Vm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Um(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Vm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Um(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Bm(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Bm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bl()}}class qm extends Mm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qg(this.firestore,null,t)}}function Wm(e){e=jg(e,Bg);const t=jg(e.firestore,$g),n=Yg(t),r=new qm(t);return Tm(e._query),Ag(n,e._query).then((n=>new zm(t,r,e,n)))}function Hm(e,t,n){e=jg(e,qg);const r=jg(e.firestore,$g),i=lm(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=X(t))||t instanceof Zg?dm(i,"updateDoc",e._key,t,n,a):hm(i,"updateDoc",e._key,t),$m(r,[s.toMutation(e._key,qh.exists(!0))])}function Km(e){return $m(jg(e.firestore,$g),[new nd(e._key,qh.none())])}function Gm(e,t){const n=jg(e.firestore,$g),r=Kg(e),i=Fm(e.converter,t);return $m(n,[cm(lm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,qh.exists(!1))]).then((()=>r))}function Qm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=X(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Qg(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Qg(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof qg)h=jg(e.firestore,$g),d=Ju(e._key.path),u={next:t=>{n[l]&&n[l](Ym(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=jg(e,Bg);h=jg(t.firestore,$g),d=t._query;const r=new qm(h);u={next:e=>{n[l]&&n[l](new zm(h,r,t,e))},error:n[l+1],complete:n[l+2]},Tm(e._query)}return function(e,t,n,r){const i=new Sg(r),s=new Gp(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Bp(await Ng(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>qp(await Ng(e),s)))}}(Yg(h),d,c,u)}function $m(e,t){return function(e,t){const n=new Gl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=_g(e);try{const e=await function(e,t){const n=Wl(e),r=oc.now(),i=t.reduce(((e,t)=>e.add(t.key)),Eh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=gh(),l=Eh();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=$h(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Jh(e.key,t,wu(t.value.mapValue),qh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:vh(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new zc(ic)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await gg(r,e.changes),await Sp(r.remoteStore)}catch(e){const t=Mp(e,"Failed to persist write");n.reject(t)}}(await Rg(e),t,n))),n.promise}(Yg(e),t)}function Ym(e,t,n){const r=n.docs.get(t._key),i=new qm(e);return new jm(e,i,t._key,r,new Um(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ll=e}(je),Le(new J("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new $g(new Xl(e.getProvider("auth-internal")),new tc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Kl(Hl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Be(Ol,"4.4.2",e),Be(Ol,"4.4.2","esm2017")}();const Xm=Ve({apiKey:"AIzaSyAE3JMfEt5_8vQLBh0SYYi7T48KJ31_bLk",authDomain:"rent-clothes-project.firebaseapp.com",projectId:"rent-clothes-project",storageBucket:"rent-clothes-project.appspot.com",messagingSenderId:"935494970261",appId:"1:935494970261:web:d4728823ca3d4d1db0e49c",measurementId:"G-MJ86Y83C8B"}),Jm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze();const t=Me(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Me(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(z(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;at(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:oi,persistence:[gr,Jn,er]}),r=S("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ui)return;const r=null===t||void 0===t?void 0:t.token;hi!==r&&(hi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){X(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){X(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=_("auth");return s&&bn(n,"http://".concat(s)),n}(Xm),Zm=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Me("object"==typeof e?e:ze(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=b("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=jg(e,zg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dl.MOCK_USER;else{t=E(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Kl(Hl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dl(s)}e._authCredentials=new Yl(new Ql(t,n))}}(r,...e)}return r}(Xm);var ey=n(184);const ty=()=>{const[t,n]=(0,e.useState)(null);(0,e.useEffect)((()=>{const e=Jm.onAuthStateChanged((e=>{n(e||null)}));return()=>{e()}}),[]);const r={name:"T-shirt",price:20.99,size:"M",gender:"Male",rent_address:"123 Main St, Anytown, USA",renter:"John Doe",date:new Date,rented:!1};return(0,ey.jsxs)("div",{children:[(0,ey.jsx)("h1",{children:"HomePage"}),(0,ey.jsxs)("div",{children:[(0,ey.jsx)("h1",{children:"React Firebase App"}),t?(0,ey.jsxs)("div",{children:[(0,ey.jsxs)("p",{children:["Welcome, ",t.email,"!"]}),(0,ey.jsx)("button",{onClick:()=>{Jm.signOut()},children:"Sign Out"})]}):(0,ey.jsxs)("div",{children:[(0,ey.jsx)("p",{children:"Please sign in to continue."}),(0,ey.jsx)("button",{onClick:async()=>{try{const e=await function(e,t,n){return Gn(X(e),An.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qn(e),t}))}(Jm,"ssss93dddda3s3@gmail.com","ssss2233323"),t=e.user;console.log(t)}catch(Cy){console.error(Cy.message)}},children:"Sign In"})]}),(0,ey.jsx)("div",{children:(0,ey.jsx)("button",{onClick:async()=>{try{const e=await async function(e,t,n){const r=dn(e),i=_n(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jn),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qn(e),t})),o=await Vn._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(Jm,"ssss93dddda3s3@gmail.com","ssss2233323"),t=e.user;console.log(t)}catch(Cy){console.error(Cy.message)}},children:"Create New User"})}),(0,ey.jsx)("div",{children:(0,ey.jsx)("button",{onClick:()=>{(async e=>{try{const t=Hg(Zm,"clothes"),n=await Gm(t,e);return console.log("Clothing item added with ID: ",n.id),n.id}catch(Cy){console.error("Error adding clothing item: ",Cy.message)}})(r)},children:"Add Clothing Item"})})]})]})};var ny=n(340),ry=n(948),iy=n.n(ry);const sy="@firebase/database",oy="1.0.3";let ay="";function ly(e){ay=e}class cy{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),L(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:D(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class uy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return F(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const hy=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new cy(t)}}catch(t){}return new uy},dy=hy("localStorage"),fy=hy("sessionStorage"),py=new le("@firebase/database"),gy=function(){let e=1;return function(){return e++}}(),my=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,a(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new K;n.update(t);const r=n.digest();return u.encodeByteArray(r)},yy=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=yy.apply(null,n):e+="object"===typeof n?L(n):n,e+=" "}return e};let vy=null,_y=!0;const by=function(e,t){a(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(py.logLevel=re.VERBOSE,vy=py.log.bind(py),t&&fy.set("logging_enabled",!0)):"function"===typeof e?vy=e:(vy=null,fy.remove("logging_enabled"))},wy=function(){if(!0===_y&&(_y=!1,null===vy&&!0===fy.get("logging_enabled")&&by(!0)),vy){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=yy.apply(null,t);vy(r)}},Sy=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];wy(e,...n)}},Cy=function(){const e="FIREBASE INTERNAL ERROR: "+yy(...arguments);py.error(e)},Ey=function(){const e="FIREBASE FATAL ERROR: ".concat(yy(...arguments));throw py.error(e),new Error(e)},ky=function(){const e="FIREBASE WARNING: "+yy(...arguments);py.warn(e)},Ty=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},xy="[MIN_NAME]",Iy="[MAX_NAME]",Ry=function(e,t){if(e===t)return 0;if(e===xy||t===Iy)return-1;if(t===xy||e===Iy)return 1;{const n=Fy(e),r=Fy(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Ny=function(e,t){return e===t?0:e<t?-1:1},Py=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+L(t))},Ay=function(e){if("object"!==typeof e||null===e)return L(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=L(t[r]),n+=":",n+=Ay(e[t[r]]);return n+="}",n},Oy=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Dy(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ly=function(e){a(!Ty(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const l=[];for(o=52;o;o-=1)l.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)l.push(r%2?1:0),r=Math.floor(r/2);l.push(n?1:0),l.reverse();const c=l.join("");let u="";for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const My=new RegExp("^-?(0*)\\d{1,10}$"),Fy=function(e){if(My.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Uy=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw ky("Exception was thrown by user callback.",e),t}),Math.floor(0))}},jy=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Vy{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){ky('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class zy{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(wy("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ky(e)}}class By{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}By.OWNER="owner";const qy="5",Wy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Hy="ac",Ky="websocket",Gy="long_polling";class Qy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dy.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&dy.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function $y(e,t,n){let r;if(a("string"===typeof t,"typeof type must == string"),a("object"===typeof n,"typeof params must == object"),t===Ky)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Gy)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Dy(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Yy{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;F(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return g(this.counters_)}}const Xy={},Jy={};function Zy(e){const t=e.toString();return Xy[t]||(Xy[t]=new Yy),Xy[t]}class ev{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Uy((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const tv="start";class nv{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sy(e),this.stats_=Zy(t),this.urlFn=e=>(this.appCheckToken&&(e[Hy]=this.appCheckToken),$y(t,Gy,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ev(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(I()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new rv((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tv)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[tv]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=qy,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Hy]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Wy.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nv.forceAllow_=!0}static forceDisallow(){nv.forceDisallow_=!0}static isAvailable(){return!I()&&(!!nv.forceAllow_||!nv.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=L(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=d(t),r=Oy(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(I())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=L(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class rv{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,I())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=gy(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=rv.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){wy("frame writing exception"),i.stack&&wy(i.stack),wy(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||wy("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){I()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{wy("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let iv=null;"undefined"!==typeof MozWebSocket?iv=MozWebSocket:"undefined"!==typeof WebSocket&&(iv=WebSocket);class sv{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sy(this.connId),this.stats_=Zy(t),this.connURL=sv.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=qy,!I()&&"undefined"!==typeof location&&location.hostname&&Wy.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Hy]=r),i&&(s.p=i),$y(e,Ky,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dy.set("previous_websocket_failure",!0);try{let e;if(I()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(qy,"/").concat(ay,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new iv(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){sv.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==iv&&!sv.forceDisallow_}static previouslyFailed(){return dy.isInMemoryStorage||!0===dy.get("previous_websocket_failure")}markConnectionHealthy(){dy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=D(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(a(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=L(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Oy(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}sv.responsesRequiredToBeHealthy=2,sv.healthyTimeout=3e4;class ov{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nv,sv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=sv&&sv.isAvailable();let n=t&&!sv.previouslyFailed();if(e.webSocketOnly&&(t||ky("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[sv];else{const e=this.transports_=[];for(const t of ov.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ov.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ov.globalTransportInitialized_=!1;class av{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sy("c:"+this.id+":"),this.transportManager_=new ov(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=jy((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Py("t",e),n=Py("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Py("t",e),n=Py("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Py("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Cy("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),qy!==n&&ky("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),jy((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jy((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class lv{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class cv{constructor(e){this.allowedEvents_=e,this.listeners_={},a(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){a(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class uv extends cv{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||T()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new uv}getInitialEvent(e){return a("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const hv=32,dv=768;class fv{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function pv(){return new fv("")}function gv(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function mv(e){return e.pieces_.length-e.pieceNum_}function yv(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new fv(e.pieces_,t)}function vv(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function _v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function bv(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new fv(t,0)}function wv(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof fv)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new fv(n,0)}function Sv(e){return e.pieceNum_>=e.pieces_.length}function Cv(e,t){const n=gv(e),r=gv(t);if(null===n)return t;if(n===r)return Cv(yv(e),yv(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ev(e,t){if(mv(e)!==mv(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function kv(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(mv(e)>mv(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Tv{constructor(e,t){this.errorPrefix_=t,this.parts_=_v(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Y(this.parts_[n]);xv(this)}}function xv(e){if(e.byteLength_>dv)throw new Error(e.errorPrefix_+"has a key path longer than "+dv+" bytes ("+e.byteLength_+").");if(e.parts_.length>hv)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hv+") or object contains a cycle "+Iv(e))}function Iv(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Rv extends cv{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Rv}getInitialEvent(e){return a("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Nv=1e3;class Pv extends lv{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Pv.nextPersistentConnectionId_++,this.log_=Sy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nv,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!I())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Rv.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&uv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(L(i)),a(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new C,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),a(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),a(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Pv.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&F(e,"w")){const n=U(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();ky("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=M(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=M(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),a(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+L(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Cy("Unrecognized action received from server: "+L(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){a(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nv,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Nv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nv),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Pv.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const l=function(){o?o.close():(s=!0,n())},c=function(e){a(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?wy("getToken() completed but was canceled"):(wy("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new av(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{ky(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Cy){this.log_("Failed to get token: "+Cy),s||(this.repoInfo_.nodeAdmin&&ky(Cy),l())}}}interrupt(e){wy("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){wy("Resuming connection for reason: "+e),delete this.interruptReasons_[e],j(this.interruptReasons_)&&(this.reconnectDelay_=Nv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ay(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new fv(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){wy("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){wy("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";I()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ay.replace(/\./g,"-")]=1,T()?e["framework.cordova"]=1:x()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=uv.getInstance().currentlyOnline();return j(this.interruptReasons_)&&e}}Pv.nextPersistentConnectionId_=0,Pv.nextConnectionId_=0;class Av{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Av(e,t)}}class Ov{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Av(xy,e),r=new Av(xy,t);return 0!==this.compare(n,r)}minPost(){return Av.MIN}}let Dv;class Lv extends Ov{static get __EMPTY_NODE(){return Dv}static set __EMPTY_NODE(e){Dv=e}compare(e,t){return Ry(e.name,t.name)}isDefinedOn(e){throw l("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Av.MIN}maxPost(){return new Av(Iy,Dv)}makePost(e,t){return a("string"===typeof e,"KeyIndex indexValue must always be a string."),new Av(e,Dv)}toString(){return".key"}}const Mv=new Lv;class Fv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Uv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Uv.RED,this.left=null!=r?r:jv.EMPTY_NODE,this.right=null!=i?i:jv.EMPTY_NODE}copy(e,t,n,r,i){return new Uv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return jv.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return jv.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Uv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Uv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Uv.RED=!0,Uv.BLACK=!1;class jv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jv.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new jv(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Uv.BLACK,null,null))}remove(e){return new jv(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Uv.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Fv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Fv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Fv(this.root_,null,this.comparator_,!0,e)}}function Vv(e,t){return Ry(e.name,t.name)}function zv(e,t){return Ry(e,t)}let Bv;jv.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Uv(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qv=function(e){return"number"===typeof e?"number:"+Ly(e):"string:"+e},Wv=function(e){if(e.isLeafNode()){const t=e.val();a("string"===typeof t||"number"===typeof t||"object"===typeof t&&F(t,".sv"),"Priority must be a string or number.")}else a(e===Bv||e.isEmpty(),"priority of unexpected type.");a(e===Bv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Hv,Kv,Gv;class Qv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qv.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,a(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Wv(this.priorityNode_)}static set __childrenNodeConstructor(e){Hv=e}static get __childrenNodeConstructor(){return Hv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qv(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Qv.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Sv(e)?this:".priority"===gv(e)?this.priorityNode_:Qv.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Qv.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=gv(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(a(".priority"!==n||1===mv(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Qv.__childrenNodeConstructor.EMPTY_NODE.updateChild(yv(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qv(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Ly(this.value_):this.value_,this.lazyHash_=my(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qv.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qv.__childrenNodeConstructor?-1:(a(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Qv.VALUE_TYPE_ORDER.indexOf(t),i=Qv.VALUE_TYPE_ORDER.indexOf(n);return a(r>=0,"Unknown leaf type: "+t),a(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Qv.VALUE_TYPE_ORDER=["object","boolean","number","string"];const $v=new class extends Ov{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ry(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Av.MIN}maxPost(){return new Av(Iy,new Qv("[PRIORITY-POST]",Gv))}makePost(e,t){const n=Kv(e);return new Av(t,new Qv("[PRIORITY-POST]",n))}toString(){return".priority"}},Yv=Math.log(2);class Xv{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Yv,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Jv=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Uv(a,o.node,Uv.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Uv(a,o.node,Uv.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Uv(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Uv.BLACK):(a(r,Uv.BLACK),a(r,Uv.RED))}return s}(new Xv(e.length));return new jv(r||t,s)};let Zv;const e_={};class t_{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return a(e_&&$v,"ChildrenNode.ts has not been loaded"),Zv=Zv||new t_({".priority":e_},{".priority":$v}),Zv}get(e){const t=U(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof jv?t:null}hasIndex(e){return F(this.indexSet_,e.toString())}addIndex(e,t){a(e!==Mv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Av.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?Jv(n,e.getCompare()):e_;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=s,new t_(u,c)}addToIndexes(e,t){const n=V(this.indexes_,((n,r)=>{const i=U(this.indexSet_,r);if(a(i,"Missing index implementation for "+r),n===e_){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Av.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Jv(n,i.getCompare())}return e_}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Av(e.name,r))),i.insert(e,e.node)}}));return new t_(n,this.indexSet_)}removeFromIndexes(e,t){const n=V(this.indexes_,(n=>{if(n===e_)return n;{const r=t.get(e.name);return r?n.remove(new Av(e.name,r)):n}}));return new t_(n,this.indexSet_)}}let n_;class r_{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Wv(this.priorityNode_),this.children_.isEmpty()&&a(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return n_||(n_=new r_(new jv(zv),null,t_.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||n_}updatePriority(e){return this.children_.isEmpty()?this:new r_(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?n_:t}}getChild(e){const t=gv(e);return null===t?this:this.getImmediateChild(t).getChild(yv(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(a(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Av(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?n_:this.priorityNode_;return new r_(r,s,i)}}updateChild(e,t){const n=gv(e);if(null===n)return t;{a(".priority"!==gv(e)||1===mv(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(yv(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild($v,((s,o)=>{t[s]=o.val(e),n++,i&&r_.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+qv(this.getPriority().val())+":"),this.forEachChild($v,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":my(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Av(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Av(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Av(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Av.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Av.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===i_?-1:0}withIndex(e){if(e===Mv||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new r_(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Mv||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator($v),n=t.getIterator($v);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Mv?null:this.indexMap_.get(e.toString())}}r_.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const i_=new class extends r_{constructor(){super(new jv(zv),r_.EMPTY_NODE,t_.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return r_.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Av,{MIN:{value:new Av(xy,r_.EMPTY_NODE)},MAX:{value:new Av(Iy,i_)}}),Lv.__EMPTY_NODE=r_.EMPTY_NODE,Qv.__childrenNodeConstructor=r_,Bv=i_,function(e){Gv=e}(i_);const s_=!0;function o_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return r_.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),a(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Qv(e,o_(t))}if(e instanceof Array||!s_){let n=r_.EMPTY_NODE;return Dy(e,((t,r)=>{if(F(e,t)&&"."!==t.substring(0,1)){const e=o_(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(o_(t))}{const n=[];let r=!1;if(Dy(e,((e,t)=>{if("."!==e.substring(0,1)){const i=o_(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Av(e,i)))}})),0===n.length)return r_.EMPTY_NODE;const i=Jv(n,Vv,(e=>e.name),zv);if(r){const e=Jv(n,$v.getCompare());return new r_(i,o_(t),new t_({".priority":e},{".priority":$v}))}return new r_(i,o_(t),t_.Default)}}!function(e){Kv=e}(o_);class a_ extends Ov{constructor(e){super(),this.indexPath_=e,a(!Sv(e)&&".priority"!==gv(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ry(e.name,t.name):i}makePost(e,t){const n=o_(e),r=r_.EMPTY_NODE.updateChild(this.indexPath_,n);return new Av(t,r)}maxPost(){const e=r_.EMPTY_NODE.updateChild(this.indexPath_,i_);return new Av(Iy,e)}toString(){return _v(this.indexPath_,0).join("/")}}const l_=new class extends Ov{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Ry(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Av.MIN}maxPost(){return Av.MAX}makePost(e,t){const n=o_(e);return new Av(t,n)}toString(){return".value"}};function c_(e){return{type:"value",snapshotNode:e}}function u_(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function h_(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function d_(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class f_{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){a(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(h_(t,o)):a(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(u_(t,n)):s.trackChildChange(d_(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild($v,((e,r)=>{t.hasChild(e)||n.trackChildChange(h_(e,r))})),t.isLeafNode()||t.forEachChild($v,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(d_(t,r,i))}else n.trackChildChange(u_(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?r_.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class p_{constructor(e){this.indexedFilter_=new f_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=p_.getStartPost_(e),this.endPost_=p_.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Av(t,n))||(n=r_.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=r_.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(r_.EMPTY_NODE);const i=this;return t.forEachChild($v,((e,t)=>{i.matches(new Av(e,t))||(r=r.updateImmediateChild(e,r_.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class g_{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new p_(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Av(t,n))||(n=r_.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=r_.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=r_.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(r_.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,r_.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;a(o.numChildren()===this.limit_,"");const l=new Av(t,n),c=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(o.hasChild(t)){const e=o.getImmediateChild(t);let a=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=a&&(a.name===t||o.hasChild(a.name));)a=r.getChildAfterChild(this.index_,a,this.reverse_);const h=null==a?1:s(a,l);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(d_(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(h_(t,e));const n=o.updateImmediateChild(t,r_.EMPTY_NODE);return null!=a&&this.rangedFilter_.matches(a)?(null!=i&&i.trackChildChange(u_(a.name,a.node)),n.updateImmediateChild(a.name,a.node)):n}}return n.isEmpty()?e:u&&s(c,l)>=0?(null!=i&&(i.trackChildChange(h_(c.name,c.node)),i.trackChildChange(u_(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(c.name,r_.EMPTY_NODE)):e}}class m_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$v}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return a(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return a(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xy}hasEnd(){return this.endSet_}getIndexEndValue(){return a(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return a(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Iy}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return a(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$v}copy(){const e=new m_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function y_(e){const t={};if(e.isDefault())return t;let n;if(e.index_===$v?n="$priority":e.index_===l_?n="$value":e.index_===Mv?n="$key":(a(e.index_ instanceof a_,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=L(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=L(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+L(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=L(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+L(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function v_(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==$v&&(t.i=e.index_.toString()),t}class __ extends lv{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Sy("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(a(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=__.getListenId_(e,n),o={};this.listens_[s]=o;const a=y_(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),U(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=__.getListenId_(e,t);delete this.listens_[n]}get(e){const t=y_(e._queryParams),n=e._path.toString(),r=new C;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+q(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=D(a.responseText)}catch(e){ky("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&ky("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class b_{constructor(){this.rootNode_=r_.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function w_(){return{value:null,children:new Map}}function S_(e,t,n){if(Sv(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=gv(t);e.children.has(r)||e.children.set(r,w_());S_(e.children.get(r),t=yv(t),n)}}function C_(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{C_(r,new fv(t.toString()+"/"+e),n)}))}class E_{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Dy(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class k_{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new E_(e);const n=1e4+2e4*Math.random();jy(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Dy(e,((e,r)=>{r>0&&F(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),jy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var T_;function x_(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(T_||(T_={}));class I_{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=T_.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Sv(this.path)){if(null!=this.affectedTree.value)return a(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new fv(e));return new I_(pv(),t,this.revert)}}return a(gv(this.path)===e,"operationForChild called for unrelated child."),new I_(yv(this.path),this.affectedTree,this.revert)}}class R_{constructor(e,t){this.source=e,this.path=t,this.type=T_.LISTEN_COMPLETE}operationForChild(e){return Sv(this.path)?new R_(this.source,pv()):new R_(this.source,yv(this.path))}}class N_{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=T_.OVERWRITE}operationForChild(e){return Sv(this.path)?new N_(this.source,pv(),this.snap.getImmediateChild(e)):new N_(this.source,yv(this.path),this.snap)}}class P_{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=T_.MERGE}operationForChild(e){if(Sv(this.path)){const t=this.children.subtree(new fv(e));return t.isEmpty()?null:t.value?new N_(this.source,pv(),t.value):new P_(this.source,pv(),t)}return a(gv(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new P_(this.source,yv(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class A_{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Sv(e))return this.isFullyInitialized()&&!this.filtered_;const t=gv(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class O_{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function D_(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw l("Should only compare child_ events.");const r=new Av(t.childName,t.snapshotNode),i=new Av(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function L_(e,t){return{eventCache:e,serverCache:t}}function M_(e,t,n,r){return L_(new A_(t,n,r),e.serverCache)}function F_(e,t,n,r){return L_(e.eventCache,new A_(t,n,r))}function U_(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function j_(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let V_;class z_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(V_||(V_=new jv(Ny)),V_);this.value=e,this.children=t}static fromObject(e){let t=new z_(null);return Dy(e,((e,n)=>{t=t.set(new fv(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:pv(),value:this.value};if(Sv(e))return null;{const n=gv(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(yv(e),t);if(null!=i){return{path:wv(new fv(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Sv(e))return this;{const t=gv(e),n=this.children.get(t);return null!==n?n.subtree(yv(e)):new z_(null)}}set(e,t){if(Sv(e))return new z_(t,this.children);{const n=gv(e),r=(this.children.get(n)||new z_(null)).set(yv(e),t),i=this.children.insert(n,r);return new z_(this.value,i)}}remove(e){if(Sv(e))return this.children.isEmpty()?new z_(null):new z_(null,this.children);{const t=gv(e),n=this.children.get(t);if(n){const r=n.remove(yv(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new z_(null):new z_(this.value,i)}return this}}get(e){if(Sv(e))return this.value;{const t=gv(e),n=this.children.get(t);return n?n.get(yv(e)):null}}setTree(e,t){if(Sv(e))return t;{const n=gv(e),r=(this.children.get(n)||new z_(null)).setTree(yv(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new z_(this.value,i)}}fold(e){return this.fold_(pv(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(wv(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,pv(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Sv(e))return null;{const r=gv(e),i=this.children.get(r);return i?i.findOnPath_(yv(e),wv(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pv(),t)}foreachOnPath_(e,t,n){if(Sv(e))return this;{this.value&&n(t,this.value);const r=gv(e),i=this.children.get(r);return i?i.foreachOnPath_(yv(e),wv(t,r),n):new z_(null)}}foreach(e){this.foreach_(pv(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(wv(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class B_{constructor(e){this.writeTree_=e}static empty(){return new B_(new z_(null))}}function q_(e,t,n){if(Sv(t))return new B_(new z_(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=Cv(i,t);return s=s.updateChild(o,n),new B_(e.writeTree_.set(i,s))}{const r=new z_(n),i=e.writeTree_.setTree(t,r);return new B_(i)}}}function W_(e,t,n){let r=e;return Dy(n,((e,n)=>{r=q_(r,wv(t,e),n)})),r}function H_(e,t){if(Sv(t))return B_.empty();{const n=e.writeTree_.setTree(t,new z_(null));return new B_(n)}}function K_(e,t){return null!=G_(e,t)}function G_(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Cv(n.path,t)):null}function Q_(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild($v,((e,n)=>{t.push(new Av(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Av(e,n.value))})),t}function $_(e,t){if(Sv(t))return e;{const n=G_(e,t);return new B_(null!=n?new z_(n):e.writeTree_.subtree(t))}}function Y_(e){return e.writeTree_.isEmpty()}function X_(e,t){return J_(pv(),e.writeTree_,t)}function J_(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(a(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=J_(wv(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(wv(e,".priority"),r)),n}}function Z_(e,t){return db(t,e)}function eb(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));a(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&tb(t,r.path)?i=!1:kv(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=rb(e.allWrites,nb,pv()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=H_(e.visibleWrites,r.path);else{Dy(r.children,(t=>{e.visibleWrites=H_(e.visibleWrites,wv(r.path,t))}))}return!0}return!1}function tb(e,t){if(e.snap)return kv(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&kv(wv(e.path,n),t))return!0;return!1}function nb(e){return e.visible}function rb(e,t,n){let r=B_.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)kv(n,e)?(t=Cv(n,e),r=q_(r,t,s.snap)):kv(e,n)&&(t=Cv(e,n),r=q_(r,pv(),s.snap.getChild(t)));else{if(!s.children)throw l("WriteRecord should have .snap or .children");if(kv(n,e))t=Cv(n,e),r=W_(r,t,s.children);else if(kv(e,n))if(t=Cv(e,n),Sv(t))r=W_(r,pv(),s.children);else{const e=U(s.children,gv(t));if(e){const n=e.getChild(yv(t));r=q_(r,pv(),n)}}}}}return r}function ib(e,t,n,r,i){if(r||i){const s=$_(e.visibleWrites,t);if(!i&&Y_(s))return n;if(i||null!=n||K_(s,pv())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(kv(e.path,t)||kv(t,e.path))};return X_(rb(e.allWrites,s,t),n||r_.EMPTY_NODE)}return null}{const r=G_(e.visibleWrites,t);if(null!=r)return r;{const r=$_(e.visibleWrites,t);if(Y_(r))return n;if(null!=n||K_(r,pv())){return X_(r,n||r_.EMPTY_NODE)}return null}}}function sb(e,t,n,r){return ib(e.writeTree,e.treePath,t,n,r)}function ob(e,t){return function(e,t,n){let r=r_.EMPTY_NODE;const i=G_(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild($v,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=$_(e.visibleWrites,t);return n.forEachChild($v,((e,t)=>{const n=X_($_(i,new fv(e)),t);r=r.updateImmediateChild(e,n)})),Q_(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Q_($_(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ab(e,t,n,r){return function(e,t,n,r,i){a(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=wv(t,n);if(K_(e.visibleWrites,s))return null;{const t=$_(e.visibleWrites,s);return Y_(t)?i.getChild(n):X_(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function lb(e,t){return function(e,t){return G_(e.visibleWrites,t)}(e.writeTree,wv(e.treePath,t))}function cb(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=$_(e.visibleWrites,t),c=G_(l,pv());if(null!=c)a=c;else{if(null==n)return[];a=X_(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function ub(e,t,n){return function(e,t,n,r){const i=wv(t,n),s=G_(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return X_($_(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function hb(e,t){return db(wv(e.treePath,t),e.writeTree)}function db(e,t){return{treePath:e,writeTree:t}}class fb{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;a("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),a(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,d_(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,h_(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,u_(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw l("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,d_(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const pb=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class gb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new A_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ub(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:j_(this.viewCache_),i=cb(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function mb(e,t,n,r,i){const s=new fb;let o,c;if(n.type===T_.OVERWRITE){const l=n;l.source.fromUser?o=_b(e,t,l.path,l.snap,r,i,s):(a(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!Sv(l.path),o=vb(e,t,l.path,l.snap,r,i,c,s))}else if(n.type===T_.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=wv(n,r);bb(t,gv(c))&&(a=_b(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=wv(n,r);bb(t,gv(c))||(a=_b(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(a(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered(),o=Sb(e,t,l.path,l.children,r,i,c,s))}else if(n.type===T_.ACK_USER_WRITE){const l=n;o=l.revert?function(e,t,n,r,i,s){let o;if(null!=lb(r,n))return t;{const l=new gb(r,t,i),c=t.eventCache.getNode();let u;if(Sv(n)||".priority"===gv(n)){let n;if(t.serverCache.isFullyInitialized())n=sb(r,j_(t));else{const e=t.serverCache.getNode();a(e instanceof r_,"serverChildren would be complete if leaf node"),n=ob(r,e)}u=e.filter.updateFullNode(c,n,s)}else{const i=gv(n);let a=ub(r,i,t.serverCache);null==a&&t.serverCache.isCompleteForChild(i)&&(a=c.getImmediateChild(i)),u=null!=a?e.filter.updateChild(c,i,a,yv(n),l,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,r_.EMPTY_NODE,yv(n),l,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=sb(r,j_(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=lb(r,pv()),M_(t,u,o,e.filter.filtersNodes())}}(e,t,l.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=lb(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Sv(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return vb(e,t,n,l.getNode().getChild(n),i,s,a,o);if(Sv(n)){let r=new z_(null);return l.getNode().forEachChild(Mv,((e,t)=>{r=r.set(new fv(e),t)})),Sb(e,t,n,r,i,s,a,o)}return t}{let c=new z_(null);return r.foreach(((e,t)=>{const r=wv(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Sb(e,t,n,c,i,s,a,o)}}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==T_.LISTEN_COMPLETE)throw l("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=F_(t,s.getNode(),s.isFullyInitialized()||Sv(n),s.isFiltered());return yb(e,o,n,r,pb,i)}(e,t,n.path,r,s)}const u=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=U_(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(c_(U_(t)))}}(t,o,u),{viewCache:o,changes:u}}function yb(e,t,n,r,i,s){const o=t.eventCache;if(null!=lb(r,n))return t;{let l,c;if(Sv(n))if(a(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=j_(t),i=ob(r,n instanceof r_?n:r_.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=sb(r,j_(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=gv(n);if(".priority"===u){a(1===mv(n),"Can't have a priority with additional path components");const i=o.getNode();c=t.serverCache.getNode();const s=ab(r,n,i,c);l=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const a=yv(n);let h;if(o.isCompleteForChild(u)){c=t.serverCache.getNode();const e=ab(r,n,o.getNode(),c);h=null!=e?o.getNode().getImmediateChild(u).updateChild(a,e):o.getNode().getImmediateChild(u)}else h=ub(r,u,t.serverCache);l=null!=h?e.filter.updateChild(o.getNode(),u,h,a,i,s):o.getNode()}}return M_(t,l,o.isFullyInitialized()||Sv(n),e.filter.filtersNodes())}}function vb(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Sv(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=gv(n);if(!l.isCompleteForPath(n)&&mv(n)>1)return t;const i=yv(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,pb,null)}const h=F_(t,c,l.isFullyInitialized()||Sv(n),u.filtersNodes());return yb(e,h,n,i,new gb(i,h,s),a)}function _b(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new gb(i,t,s);if(Sv(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=M_(t,c,!0,e.filter.filtersNodes());else{const i=gv(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=M_(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=yv(n),c=a.getNode().getImmediateChild(i);let h;if(Sv(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===vv(s)&&e.getChild(bv(s)).isEmpty()?e:e.updateChild(s,r):r_.EMPTY_NODE}if(c.equals(h))l=t;else{l=M_(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function bb(e,t){return e.eventCache.isCompleteForChild(t)}function wb(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Sb(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Sv(n)?r:new z_(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=wb(0,t.serverCache.getNode().getImmediateChild(n),r);c=vb(e,c,new fv(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=wb(0,t.serverCache.getNode().getImmediateChild(n),r);c=vb(e,c,new fv(n),l,i,s,o,a)}})),c}class Cb{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new f_(n.getIndex()),i=(s=n).loadsAllData()?new f_(s.getIndex()):s.hasLimit()?new g_(s):new p_(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(r_.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(r_.EMPTY_NODE,a.getNode(),null),u=new A_(l,o.isFullyInitialized(),r.filtersNodes()),h=new A_(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=L_(h,u),this.eventGenerator_=new O_(this.query_)}get query(){return this.query_}}function Eb(e,t){const n=j_(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Sv(t)&&!n.getImmediateChild(gv(t)).isEmpty())?n.getChild(t):null}function kb(e){return 0===e.eventRegistrations_.length}function Tb(e,t,n){const r=[];if(n){a(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function xb(e,t,n,r){t.type===T_.MERGE&&null!==t.source.queryId&&(a(j_(e.viewCache_),"We should always have a full cache before handling merges"),a(U_(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=mb(e.processor_,i,t,n,r);var o,l;return o=e.processor_,l=s.viewCache,a(l.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),a(l.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),a(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Ib(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Ib(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),D_(e,i,"child_removed",t,r,n),D_(e,i,"child_added",t,r,n),D_(e,i,"child_moved",s,r,n),D_(e,i,"child_changed",t,r,n),D_(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Rb,Nb;class Pb{constructor(){this.views=new Map}}function Ab(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return a(null!=s,"SyncTree gave us an op for an invalid query."),xb(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(xb(s,t,n,r));return i}}function Ob(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=sb(n,i?r:null),s=!1;e?s=!0:r instanceof r_?(e=ob(n,r),s=!1):(e=r_.EMPTY_NODE,s=!1);const o=L_(new A_(e,s,!1),new A_(r,i,!1));return new Cb(t,o)}return o}function Db(e,t,n,r,i,s){const o=Ob(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild($v,((e,t)=>{r.push(u_(e,t))}));return n.isFullyInitialized()&&r.push(c_(n.getNode())),Ib(e,r,n.getNode(),t)}(o,n)}function Lb(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const l=Vb(e);if("default"===i)for(const[a,c]of e.views.entries())o=o.concat(Tb(c,n,r)),kb(c)&&(e.views.delete(a),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(Tb(t,n,r)),kb(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return l&&!Vb(e)&&s.push(new(a(Rb,"Reference.ts has not been loaded"),Rb)(t._repo,t._path)),{removed:s,events:o}}function Mb(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Fb(e,t){let n=null;for(const r of e.views.values())n=n||Eb(r,t);return n}function Ub(e,t){if(t._queryParams.loadsAllData())return zb(e);{const n=t._queryIdentifier;return e.views.get(n)}}function jb(e,t){return null!=Ub(e,t)}function Vb(e){return null!=zb(e)}function zb(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Bb=1;class qb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new z_(null),this.pendingWriteTree_={visibleWrites:B_.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wb(e,t,n,r,i){return function(e,t,n,r,i){a(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=q_(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Xb(e,new N_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Hb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(eb(e.pendingWriteTree_,t)){let t=new z_(null);return null!=r.snap?t=t.set(pv(),!0):Dy(r.children,(e=>{t=t.set(new fv(e),!0)})),Xb(e,new I_(r.path,t,n))}return[]}function Kb(e,t,n){return Xb(e,new N_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Gb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||jb(o,t))){const l=Lb(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>Vb(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Vb(t)){return[zb(t)]}{let e=[];return t&&(e=Mb(t)),Dy(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=ew(e,r);e.listenProvider_.startListening(ow(i),tw(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(ow(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(nw(t));e.listenProvider_.stopListening(ow(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=nw(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function Qb(e,t,n,r){const i=rw(e,r);if(null!=i){const r=iw(i),s=r.path,o=r.queryId,a=Cv(s,t);return sw(e,s,new N_(x_(o),a,n))}return[]}function $b(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Cv(e,i);s=s||Fb(t,n),o=o||Vb(t)}));let l,c=e.syncPointTree_.get(i);if(c?(o=o||Vb(c),s=s||Fb(c,pv())):(c=new Pb,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=s)l=!0;else{l=!1,s=r_.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Fb(t,pv());n&&(s=s.updateImmediateChild(e,n))}))}const u=jb(c,t);if(!u&&!t._queryParams.loadsAllData()){const n=nw(t);a(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Bb++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let h=Db(c,t,n,Z_(e.pendingWriteTree_,i),s,l);if(!u&&!o&&!r){const n=Ub(c,t);h=h.concat(function(e,t,n){const r=t._path,i=tw(e,t),s=ew(e,n),o=e.listenProvider_.startListening(ow(t),i,s.hashFn,s.onComplete),l=e.syncPointTree_.subtree(r);if(i)a(!Vb(l.value),"If we're adding a query, it shouldn't be shadowed");else{const t=l.fold(((e,t,n)=>{if(!Sv(e)&&t&&Vb(t))return[zb(t).query];{let e=[];return t&&(e=e.concat(Mb(t).map((e=>e.query)))),Dy(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(ow(r),tw(e,r))}}return o}(e,t,n))}return h}function Yb(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Fb(n,Cv(e,t));if(r)return r}));return ib(r,t,i,n,!0)}function Xb(e,t){return Jb(t,e.syncPointTree_,null,Z_(e.pendingWriteTree_,pv()))}function Jb(e,t,n,r){if(Sv(e.path))return Zb(e,t,n,r);{const i=t.get(pv());null==n&&null!=i&&(n=Fb(i,pv()));let s=[];const o=gv(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=hb(r,o);s=s.concat(Jb(a,l,e,t))}return i&&(s=s.concat(Ab(i,e,r,n))),s}}function Zb(e,t,n,r){const i=t.get(pv());null==n&&null!=i&&(n=Fb(i,pv()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=hb(r,t),l=e.operationForChild(t);l&&(s=s.concat(Zb(l,i,o,a)))})),i&&(s=s.concat(Ab(i,e,r,n))),s}function ew(e,t){const n=t.query,r=tw(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||r_.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=rw(e,n);if(r){const n=iw(r),i=n.path,s=n.queryId,o=Cv(i,t);return sw(e,i,new R_(x_(s),o))}return[]}(e,n._path,r):function(e,t){return Xb(e,new R_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Gb(e,n,null,r)}}}}function tw(e,t){const n=nw(t);return e.queryToTagMap.get(n)}function nw(e){return e._path.toString()+"$"+e._queryIdentifier}function rw(e,t){return e.tagToQueryMap.get(t)}function iw(e){const t=e.indexOf("$");return a(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fv(e.substr(0,t))}}function sw(e,t,n){const r=e.syncPointTree_.get(t);a(r,"Missing sync point for query tag that we're tracking");return Ab(r,n,Z_(e.pendingWriteTree_,t),null)}function ow(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(a(Nb,"Reference.ts has not been loaded"),Nb)(e._repo,e._path):e}class aw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new aw(t)}node(){return this.node_}}class lw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wv(this.path_,e);return new lw(this.syncTree_,t)}node(){return Yb(this.syncTree_,this.path_)}}const cw=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},uw=function(e,t,n){return e&&"object"===typeof e?(a(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?hw(e[".sv"],t,n):"object"===typeof e[".sv"]?dw(e[".sv"],t):void a(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},hw=function(e,t,n){if("timestamp"===e)return n.timestamp;a(!1,"Unexpected server value: "+e)},dw=function(e,t,n){e.hasOwnProperty("increment")||a(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&a(!1,"Unexpected increment value: "+r);const i=t.node();if(a(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},fw=function(e,t,n,r){return gw(t,new lw(n,e),r)},pw=function(e,t,n){return gw(e,new aw(t),n)};function gw(e,t,n){const r=e.getPriority().val(),i=uw(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=uw(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Qv(s,o_(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Qv(i))),r.forEachChild($v,((e,r)=>{const i=gw(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class mw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function yw(e,t){let n=t instanceof fv?t:new fv(t),r=e,i=gv(n);for(;null!==i;){const e=U(r.node.children,i)||{children:{},childCount:0};r=new mw(i,r,e),n=yv(n),i=gv(n)}return r}function vw(e){return e.node.value}function _w(e,t){e.node.value=t,Ew(e)}function bw(e){return e.node.childCount>0}function ww(e,t){Dy(e.node.children,((n,r)=>{t(new mw(n,e,r))}))}function Sw(e,t,n,r){n&&!r&&t(e),ww(e,(e=>{Sw(e,t,!0,r)})),n&&r&&t(e)}function Cw(e){return new fv(null===e.parent?e.name:Cw(e.parent)+"/"+e.name)}function Ew(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===vw(e)&&!bw(e)}(n),i=F(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ew(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ew(e))}(e.parent,e.name,e)}const kw=/[\[\].#$\/\u0000-\u001F\u007F]/,Tw=/[\[\].#$\u0000-\u001F\u007F]/,xw=10485760,Iw=function(e){return"string"===typeof e&&0!==e.length&&!kw.test(e)},Rw=function(e){return"string"===typeof e&&0!==e.length&&!Tw.test(e)},Nw=function(e,t,n){const r=n instanceof fv?new Tv(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Iv(r));if("function"===typeof t)throw new Error(e+"contains a function "+Iv(r)+" with contents = "+t.toString());if(Ty(t))throw new Error(e+"contains "+t.toString()+" "+Iv(r));if("string"===typeof t&&t.length>xw/3&&Y(t)>xw)throw new Error(e+"contains a string greater than "+xw+" utf8 bytes "+Iv(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Dy(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Iw(t)))throw new Error(e+" contains an invalid key ("+t+") "+Iv(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Y(t),xv(e)}(r,t),Nw(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Y(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Iv(r)+" in addition to actual children.")}},Pw=function(e,t,n,r){if((!r||void 0!==n)&&!Rw(n))throw new Error($(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Aw=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Pw(e,t,n,r)},Ow=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Iw(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Rw(e)}(n))throw new Error($(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Dw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lw(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Ev(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Mw(e,t,n){Lw(e,n),Uw(e,(e=>Ev(e,t)))}function Fw(e,t,n){Lw(e,n),Uw(e,(e=>kv(e,t)||kv(t,e)))}function Uw(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(jw(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function jw(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();vy&&wy("event: "+n.toString()),Uy(r)}}}const Vw="repo_interrupt",zw=25;class Bw{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=w_(),this.transactionQueueTree_=new mw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qw(e,t,n){if(e.stats_=Zy(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new __(e.repoInfo_,((t,n,r,i)=>{Kw(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Gw(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{L(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Pv(e.repoInfo_,t,((t,n,r,i)=>{Kw(e,t,n,r,i)}),(t=>{Gw(e,t)}),(t=>{!function(e,t){Dy(t,((t,n)=>{Qw(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Jy[n]||(Jy[n]=t()),Jy[n]}(e.repoInfo_,(()=>new k_(e.stats_,e.server_))),e.infoData_=new b_,e.infoSyncTree_=new qb({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Kb(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Qw(e,"connected",!1),e.serverSyncTree_=new qb({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);Fw(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Ww(e){const t=e.infoData_.getNode(new fv(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Hw(e){return cw({timestamp:Ww(e)})}function Kw(e,t,n,r,i){e.dataUpdateCount++;const s=new fv(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=V(n,(e=>o_(e)));o=function(e,t,n,r){const i=rw(e,r);if(i){const r=iw(i),s=r.path,o=r.queryId,a=Cv(s,t),l=z_.fromObject(n);return sw(e,s,new P_(x_(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=o_(n);o=Qb(e.serverSyncTree_,s,t,i)}else if(r){const t=V(n,(e=>o_(e)));o=function(e,t,n){const r=z_.fromObject(n);return Xb(e,new P_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=o_(n);o=Kb(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=tS(e,s)),Fw(e.eventQueue_,a,o)}function Gw(e,t){Qw(e,"connected",t),!1===t&&function(e){Jw(e,"onDisconnectEvents");const t=Hw(e),n=w_();C_(e.onDisconnect_,pv(),((r,i)=>{const s=fw(r,i,e.serverSyncTree_,t);S_(n,r,s)}));let r=[];C_(n,pv(),((t,n)=>{r=r.concat(Kb(e.serverSyncTree_,t,n));const i=oS(e,t);tS(e,i)})),e.onDisconnect_=w_(),Fw(e.eventQueue_,pv(),r)}(e)}function Qw(e,t,n){const r=new fv("/.info/"+t),i=o_(n);e.infoData_.updateSnapshot(r,i);const s=Kb(e.infoSyncTree_,r,i);Fw(e.eventQueue_,r,s)}function $w(e){return e.nextWriteId_++}function Yw(e,t,n){let r;r=".info"===gv(t._path)?Gb(e.infoSyncTree_,t,n):Gb(e.serverSyncTree_,t,n),Mw(e.eventQueue_,t._path,r)}function Xw(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Vw)}function Jw(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];wy(t,...r)}function Zw(e,t,n){return Yb(e.serverSyncTree_,t,n)||r_.EMPTY_NODE}function eS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||sS(e,t),vw(t)){const n=rS(e,t);a(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=Zw(e,t,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const e=n[u];a(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Cv(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const l=s.val(!0),c=t;e.server_.put(c.toString(),l,(r=>{Jw(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Hb(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();sS(e,yw(e.transactionQueueTree_,t)),eS(e,e.transactionQueueTree_),Fw(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Uy(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{ky("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}tS(e,t)}}),o)}(e,Cw(t),n)}else bw(t)&&ww(t,(t=>{eS(e,t)}))}function tS(e,t){const n=nS(e,t),r=Cw(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const s=t[c],u=Cv(n,s.path);let h,d=!1;if(a(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,h=s.abortReason,i=i.concat(Hb(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=zw)d=!0,h="maxretry",i=i.concat(Hb(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Zw(e,s.path,o);s.currentInputSnapshot=n;const r=t[c].update(n.val());if(void 0!==r){Nw("transaction failed: Data returned ",r,s.path);let t=o_(r);"object"===typeof r&&null!=r&&F(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=Hw(e),c=pw(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=$w(e),o.splice(o.indexOf(a),1),i=i.concat(Wb(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Hb(e.serverSyncTree_,a,!0))}else d=!0,h="nodata",i=i.concat(Hb(e.serverSyncTree_,s.currentWriteId,!0))}Fw(e.eventQueue_,n,i),i=[],d&&(t[c].status=2,l=t[c].unwatcher,setTimeout(l,Math.floor(0)),t[c].onComplete&&("nodata"===h?r.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):r.push((()=>t[c].onComplete(new Error(h),!1,null)))))}var l;sS(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Uy(r[a]);eS(e,e.transactionQueueTree_)}(e,rS(e,n),r),r}function nS(e,t){let n,r=e.transactionQueueTree_;for(n=gv(t);null!==n&&void 0===vw(r);)r=yw(r,n),n=gv(t=yv(t));return r}function rS(e,t){const n=[];return iS(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function iS(e,t,n){const r=vw(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ww(t,(t=>{iS(e,t,n)}))}function sS(e,t){const n=vw(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,_w(t,n.length>0?n:void 0)}ww(t,(t=>{sS(e,t)}))}function oS(e,t){const n=Cw(nS(e,t)),r=yw(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{aS(e,t)})),aS(e,r),Sw(r,(t=>{aS(e,t)})),n}function aS(e,t){const n=vw(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(a(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(a(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Hb(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_w(t,void 0):n.length=s+1,Fw(e.eventQueue_,Cw(t),i);for(let e=0;e<r.length;e++)Uy(r[e])}}const lS=function(e,t){const n=cS(e),r=n.namespace;"firebase.com"===n.domain&&Ey(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ey("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ky("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Qy(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new fv(n.pathString)}},cS=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ky("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},uS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class hS{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+L(this.snapshot.exportVal())}}class dS{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fS{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return a(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class pS{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Sv(this._path)?null:vv(this._path)}get ref(){return new gS(this._repo,this._path)}get _queryIdentifier(){const e=v_(this._queryParams),t=Ay(e);return"{}"===t?"default":t}get _queryObject(){return v_(this._queryParams)}isEqual(e){if(!((e=X(e))instanceof pS))return!1;const t=this._repo===e._repo,n=Ev(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class gS extends pS{constructor(e,t){super(e,t,new m_,!1)}get parent(){const e=bv(this._path);return null===e?null:new gS(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class mS{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new fv(e),n=vS(this.ref,e);return new mS(this._node.getChild(t),n,$v)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new mS(n,vS(this.ref,t),$v))))}hasChild(e){const t=new fv(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yS(e,t){return(e=X(e))._checkNotDeleted("ref"),void 0!==t?vS(e._root,t):e._root}function vS(e,t){return null===gv((e=X(e))._path)?Aw("child","path",t,!1):Pw("child","path",t,!1),new gS(e._repo,wv(e._path,t))}class _S{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new hS("value",this,new mS(e.snapshotNode,new gS(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dS(this,e,t):null}matches(e){return e instanceof _S&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dS(this,e,t):null}createEvent(e,t){a(null!=e.childName,"Child events should have a childName.");const n=vS(new gS(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new hS(e.type,this,new mS(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof bS&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function wS(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{Yw(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new fS(n,s||void 0),a="value"===t?new _S(o):new bS(t,o);return function(e,t,n){let r;r=".info"===gv(t._path)?$b(e.infoSyncTree_,t,n):$b(e.serverSyncTree_,t,n),Mw(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>Yw(e._repo,e,a)}function SS(e,t,n,r){return wS(e,"value",t,n,r)}!function(e){a(!Rb,"__referenceConstructor has already been defined"),Rb=e}(gS),function(e){a(!Nb,"__referenceConstructor has already been defined"),Nb=e}(gS);const CS="FIREBASE_DATABASE_EMULATOR_HOST",ES={};let kS=!1;function TS(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Ey("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wy("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=lS(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[CS]),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=lS(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new By(By.OWNER):new zy(e.name,e.options,t);Ow("Invalid Firebase Database URL",l),Sv(l.path)||Ey("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=ES[t.name];i||(i={},ES[t.name]=i);let s=i[e.toURLString()];s&&Ey("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Bw(e,kS,n,r),i[e.toURLString()]=s,s}(c,e,u,new Vy(e.name,n));return new xS(h,e)}class xS{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qw(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gS(this._repo,pv())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=ES[t];n&&n[e.key]===e||Ey("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Xw(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ey("Cannot call "+e+" on a deleted database.")}}function IS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze(),t=arguments.length>1?arguments[1]:void 0;const n=Me(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=b("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=X(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Ey("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ey('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new By(By.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:E(r.mockUserToken,e.app.options.projectId);s=new By(t)}!function(e,t,n,r){e.repoInfo_=new Qy("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}Pv.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Pv.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){ly(je),Le(new J("database",((e,t)=>{let{instanceIdentifier:n}=t;return TS(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Be(sy,oy,e),Be(sy,oy,"esm2017")}(),iy().setAppElement("#root");const RS=()=>{const[t,n]=(0,e.useState)([]),r=IS(),[i,s]=(0,e.useState)([]),[o,a]=(0,e.useState)(0),[l,c]=(0,e.useState)(!1),[u,h]=(0,e.useState)(0),[d,f]=(0,e.useState)(!1),[p,g]=(0,e.useState)(!1),[m,y]=(0,e.useState)(""),[v,_]=(0,e.useState)(""),[b,w]=(0,e.useState)(""),[S,C]=(0,e.useState)(""),[E,k]=(0,e.useState)(""),[T,x]=(0,e.useState)(""),[I,R]=(0,e.useState)({}),N=async(e,t)=>{console.log(e,t),"sizeFilter"===e?(y(t),console.log(m)):"colorFilter"===e&&(_(t),console.log("Color filter:",t))},P=()=>{c(!1),d&&(s([]),h(0),i.forEach((e=>{const t=document.querySelector('tr[row="row-'.concat(e.id,'"]'));t&&(t.style.backgroundColor="white")}))),f(!1),g(!1)};(0,e.useEffect)((()=>{const e=Qm(Hg(Zm,"clothes"),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));n(t)}));return()=>e()}),[]),(0,e.useEffect)((()=>{console.log(m,v);(async()=>{if(""===m&&""===v){const e=Rm(Hg(Zm,"clothes")),t=(await Wm(e)).docs.map((e=>({id:e.id,...e.data()})));return void n(t)}let e=Hg(Zm,"clothes");""!==m&&(e=Rm(e,Pm("Size","==",m))),""!==v&&(e=Rm(e,Pm("Color","==",v)));const t=(await Wm(e)).docs.map((e=>({id:e.id,...e.data()})));n(t)})()}),[m,v]);const A=()=>{const e=i.reduce(((e,n)=>e+t.find((e=>e.id===n.id)).RentalFee),0)+i.reduce(((e,n)=>e+t.find((e=>e.id===n.id)).Deposit),0);return(0,ey.jsxs)("div",{children:[(0,ey.jsx)("img",{src:"b2.png",alt:"Kalynn.store",style:{width:"25%",float:"right"}}),(0,ey.jsxs)("div",{className:"print-customer-info",style:{display:"none"},children:[(0,ey.jsxs)("p",{children:[(0,ey.jsx)("strong",{children:"T\xean Kh\xe1ch h\xe0ng:"})," ",b," ",(0,ey.jsx)("strong",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"})," ",S]}),(0,ey.jsxs)("p",{children:[(0,ey.jsx)("strong",{children:"\u0110\u1ecba ch\u1ec9:"})," ",E]})]}),(0,ey.jsxs)("table",{children:[(0,ey.jsx)("thead",{children:(0,ey.jsxs)("tr",{children:[(0,ey.jsx)("th",{children:"S\u1ed1 th\u1ee9 t\u1ef1"}),(0,ey.jsx)("th",{children:"M\xe0u s\u1eafc"}),(0,ey.jsx)("th",{children:"S\u1ea3n ph\u1ea9m"}),(0,ey.jsx)("th",{children:"Size"}),(0,ey.jsx)("th",{children:"Ti\u1ec1n Thu\xea"}),(0,ey.jsx)("th",{children:"\u0110\u1eb7t c\u1ecdc"})]})}),(0,ey.jsx)("tbody",{children:i.map(((e,n)=>{const r=t.find((t=>t.id===e.id));return(0,ey.jsxs)("tr",{children:[(0,ey.jsx)("td",{children:n+1}),(0,ey.jsx)("td",{children:r.Color}),(0,ey.jsx)("td",{children:r.Type}),(0,ey.jsx)("td",{children:r.Size}),(0,ey.jsxs)("td",{children:[r.RentalFee," \u0111\u1ed3ng"]}),(0,ey.jsxs)("td",{children:[null===r||void 0===r?void 0:r.Deposit," \u0111\u1ed3ng"]})]},e.id)}))})]}),(0,ey.jsxs)("p",{style:{fontSize:"12px",marginRight:"20px",textAlign:"right"},children:[(0,ey.jsx)("strong",{children:"Total Price:"}),"  ",e.toLocaleString("en-US",{maximumFractionDigits:0})," \u0111\u1ed3ng"]}),(0,ey.jsxs)("div",{className:"print-non-display",style:{display:"none"},children:[(0,ey.jsxs)("table",{style:{borderCollapse:"collapse",width:"50%",margin:"4px"},children:[(0,ey.jsx)("thead",{children:(0,ey.jsxs)("tr",{style:{backgroundColor:"#f"},children:[(0,ey.jsx)("th",{style:{border:"1px solid black",padding:"5px",height:"35px"},children:"Ng\xe0y giao"}),(0,ey.jsx)("th",{style:{border:"1px solid black",padding:"5px",height:"35px"},children:"Ng\xe0y tr\u1ea3"})]})}),(0,ey.jsx)("tbody",{children:(0,ey.jsxs)("tr",{children:[(0,ey.jsx)("td",{style:{border:"1px solid black",padding:"5px",height:"30px"}}),(0,ey.jsx)("td",{style:{border:"1px solid black",padding:"5px",height:"30px"}})]})})]}),(0,ey.jsx)("div",{style:{borderTop:"1px solid black",borderBottom:"1px solid black",fontSize:"8px"},children:(0,ey.jsxs)("ul",{children:[(0,ey.jsx)("li",{children:"L\u01b0u \xfd c\u1ecdc kh\xf4ng h\u1ee7y"}),(0,ey.jsx)("li",{children:"Ch\u1ec9 giao khi nh\u1eadn \u0111\u1ee7 c\u1ecdc"}),(0,ey.jsx)("li",{children:"X\xe1c nh\u1eadn t\xecnh tr\u1ea1ng v\xe1y sau 15 ph\xfat nh\u1eadn \u0111\u1ed3, sau 15 ph\xfat kh\xf4ng nh\u1eadn x\u1eed l\xfd"}),(0,ey.jsx)("li",{children:"Ph\xed thu\xea th\xeam ng\xe0y 10%"})]})})]})]})};return(0,e.useEffect)((()=>{a(i.length)}),[i]),(0,e.useEffect)((()=>{(async()=>{SS(yS(r,"clothes"),(e=>{const t=e.val();console.log(t)}))})()}),[]),(0,ey.jsxs)("div",{children:[(0,ey.jsx)("h1",{children:"Order"}),(0,ey.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[(0,ey.jsxs)("thead",{children:[(0,ey.jsxs)("tr",{children:[(0,ey.jsx)("th",{children:"Image"}),(0,ey.jsx)("th",{children:"Brand"}),(0,ey.jsx)("th",{children:"Color"}),(0,ey.jsx)("th",{children:"Type"}),(0,ey.jsx)("th",{children:"Rental Fee"}),(0,ey.jsx)("th",{children:"Deposit"}),(0,ey.jsx)("th",{children:"Size"}),(0,ey.jsx)("th",{children:"Action"})]}),(0,ey.jsx)("tr",{children:(0,ey.jsxs)("td",{colSpan:"6",style:{backgroundColor:"#f2f2f2",padding:"5px"},children:[(0,ey.jsx)("strong",{children:"Filter:"}),"\xa0","Size:",(0,ey.jsxs)("select",{onChange:e=>N("sizeFilter",e.target.value),children:[(0,ey.jsx)("option",{value:"",children:"All"}),(0,ey.jsx)("option",{value:"S",children:"S"}),(0,ey.jsx)("option",{value:"XS",children:"XS"}),(0,ey.jsx)("option",{value:"M",children:"M"}),(0,ey.jsx)("option",{value:"L",children:"L"}),(0,ey.jsx)("option",{value:"XL",children:"XL"})]}),"Color:",(0,ey.jsxs)("select",{name:"Color",onChange:e=>N("colorFilter",e.target.value),children:[(0,ey.jsx)("option",{value:"",children:"All"}),(0,ey.jsx)("option",{value:"Red",children:"Red"}),(0,ey.jsx)("option",{value:"Blue",children:"Blue"}),(0,ey.jsx)("option",{value:"Green",children:"Green"}),(0,ey.jsx)("option",{value:"Yellow",children:"Yellow"}),(0,ey.jsx)("option",{value:"Black",children:"Black"}),(0,ey.jsx)("option",{value:"White",children:"White"}),(0,ey.jsx)("option",{value:"Grey",children:"Grey"}),(0,ey.jsx)("option",{value:"Brown",children:"Brown"}),(0,ey.jsx)("option",{value:"Purple",children:"Purple"}),(0,ey.jsx)("option",{value:"Pink",children:"Pink"}),(0,ey.jsx)("option",{value:"Orange",children:"Orange"}),(0,ey.jsx)("option",{value:"Cyan",children:"Cyan"}),(0,ey.jsx)("option",{value:"Magenta",children:"Magenta"}),(0,ey.jsx)("option",{value:"Lime",children:"Lime"}),(0,ey.jsx)("option",{value:"Teal",children:"Teal"}),(0,ey.jsx)("option",{value:"Indigo",children:"Indigo"}),(0,ey.jsx)("option",{value:"Violet",children:"Violet"}),(0,ey.jsx)("option",{value:"Fuchsia",children:"Fuchsia"}),(0,ey.jsx)("option",{value:"Gold",children:"Gold"}),(0,ey.jsx)("option",{value:"Silver",children:"Silver"}),(0,ey.jsx)("option",{value:"Bronze",children:"Bronze"}),(0,ey.jsx)("option",{value:"Other",children:"Kh\xe1c"})]})]})})]}),(0,ey.jsx)("tbody",{children:t.map((e=>(0,ey.jsxs)("tr",{row:"row-".concat(e.id),style:{borderBottom:"1px solid #ddd"},children:[(0,ey.jsx)("td",{children:(0,ey.jsx)("img",{src:e.imageUrl,alt:e.Type,style:{width:"100px"}})}),(0,ey.jsx)("td",{children:e.Brand}),(0,ey.jsx)("td",{children:e.Color}),(0,ey.jsx)("td",{children:e.Type}),(0,ey.jsxs)("td",{children:[e.RentalFee," \u0111\u1ed3ng"]}),(0,ey.jsxs)("td",{children:[e.Deposit," \u0111\u1ed3ng"]}),(0,ey.jsx)("td",{children:e.Size}),(0,ey.jsx)("td",{children:e.Available?(0,ey.jsxs)("select",{onChange:n=>((e,n)=>{const r=i.find((t=>t.id===e)),o=document.querySelector('tr[row="row-'.concat(e,'"]'));o&&(o.style.backgroundColor=n?"lightgreen":"white"),r?n?(s(i.map((t=>t.id===e?{...t,option:n}:t))),h(u+t.find((t=>t.id===e)).RentalFee+t.find((t=>t.id===e)).Deposit)):(s(i.filter((t=>t.id!==e))),h(u-t.find((t=>t.id===e)).RentalFee-t.find((t=>t.id===e)).Deposit)):(s([...i,{id:e,option:n}]),console.log(i),h(u+t.find((t=>t.id===e)).RentalFee+t.find((t=>t.id===e)).Deposit))})(e.id,n.target.value),children:[(0,ey.jsx)("option",{value:"",children:"Choose an option"}),(0,ey.jsx)("option",{value:"option1",children:"Choose"})]}):(0,ey.jsx)("button",{disabled:!0,children:"Not Available"})})]},e.id)))})]}),(0,ey.jsxs)("button",{onClick:()=>{i.forEach((e=>{t.find((t=>t.id===e.id))})),c(!0)},children:["Place Order ",o]}),(0,ey.jsxs)(iy(),{isOpen:l,onRequestClose:P,children:[(0,ey.jsx)(A,{}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["H\u1ecd t\xean:",(0,ey.jsx)("input",{type:"text",name:"Name",onChange:e=>{w(e.target.value)}})]}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:",(0,ey.jsx)("input",{type:"number",name:"Number",onChange:e=>{C(e.target.value)}})]}),(0,ey.jsxs)("address",{style:{margin:"5px"},children:["\u0110\u1ecba ch\u1ec9:",(0,ey.jsx)("textarea",{type:"text",name:"Address",onChange:e=>{k(e.target.value)}})]}),(0,ey.jsxs)("p",{children:[(0,ey.jsx)("strong",{children:"T\u1ed5ng s\u1ed1 ti\u1ec1n:"})," ",u.toLocaleString("en-US",{maximumFractionDigits:0})," \u0111\u1ed3ng"]}),(0,ey.jsx)("button",{onClick:async()=>{f(!0),g(!0),console.log("Place Order");const e=Hg(Zm,"clothes");for(const o of i){const t=o.id,n=String(t);try{await Hm(Kg(e,n),{available:!1}),console.log("Clothes with ID ".concat(t," availability updated."))}catch(Cy){console.error("Error updating availability for clothes with ID ".concat(t,": ").concat(Cy))}}const t=Hg(Zm,"bills"),n=i.map((e=>(Hm(Kg(Zm,"clothes",e.id),{Available:!1}),{id:e.id,Returned:!1}))),r=new Date,s={Name:b,Number:S,Address:E,TotalPrice:u,Date:r,clothesRented:n,Returned:!1};try{await Gm(t,s).then((e=>{console.log("Bill written with ID: ",e.id),x(e.id)})),console.log("New bill added")}catch(Cy){console.error("Error adding new bill: ",Cy.message)}},disabled:d,children:"\u0110\u1eb7t H\xe0ng"}),(0,ey.jsx)("button",{onClick:()=>{const e=ny.renderToStaticMarkup((0,ey.jsx)(A,{})),t=window.open("","_blank");t.document.write("\n      <html>\n        <head>\n          <title>Kalynn.store \u260f 070.459.2839</title>\n          <style>\n            /* CSS styles for printing */\n            @page { size: A5 landscape; }\n            table { width: 100%; border-collapse: collapse; }\n            th, td { border: 1px solid black; padding: 5px; font-size: 12px; }\n            ul { display: block; }\n            p { display: block; }\n          </style>\n        </head>\n        <body>\n          <div>\n            ".concat(e,"\n          </div>\n          \x3c!-- Rest of your printing logic... --\x3e\n        </body>\n      </html>\n    "));const n=t.document.querySelector(".print-non-display");n&&(n.style.display="block");const r=t.document.querySelector(".print-customer-info");r&&(r.style.display="block"),t.document.close(),t.print(),t.onafterprint=()=>{t.close()},P(),console.log("Print Bill")},disabled:!p,children:"In Bill"}),(0,ey.jsx)("button",{onClick:P,children:"Close"}),(0,ey.jsx)("button",{onClick:()=>{i.forEach((e=>{const t=document.querySelector('tr[row="row-'.concat(e.id,'"]'));t&&(t.style.backgroundColor="white")}));const e=Hg(Zm,"clothes");i.forEach((t=>{const n=t.id,r=String(n);try{Hm(Kg(e,r),{Available:!0}),console.log("Clothes with ID ".concat(n," availability updated."))}catch(Cy){console.error("Error updating availability for clothes with ID ".concat(n,": ").concat(Cy))}}));const t=Hg(Zm,"bills");try{Km(Kg(t,T)),console.log("Bill deleted")}catch(Cy){console.error("Error deleting bill: ",Cy.message)}s([]),h(0),f(!1),g(!1),c(!1)},disabled:d,children:"Delete Order"})]})]})},NS=e=>{let{onImageChange:t,onInputChange:n,item:r}=e;return(0,ey.jsxs)("form",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,ey.jsxs)("label",{style:{margin:"5px"},children:["Image:",(0,ey.jsx)("input",{type:"file",name:"Image",onChange:t})]}),(0,ey.jsx)("label",{style:{margin:"5px"},children:r.image&&(0,ey.jsx)("img",{src:URL.createObjectURL(r.image),alt:"image",style:{maxWidth:"80px",maxHeight:"80px"}})}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["Brand:",(0,ey.jsx)("input",{type:"text",name:"Brand",value:r.Brand,onChange:n})]}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["Color:",(0,ey.jsxs)("select",{name:"Color",value:r.Color,onChange:n,style:{padding:"5px"},children:[(0,ey.jsx)("option",{value:"Red",children:"Red"}),(0,ey.jsx)("option",{value:"Blue",children:"Blue"}),(0,ey.jsx)("option",{value:"Green",children:"Green"}),(0,ey.jsx)("option",{value:"Yellow",children:"Yellow"}),(0,ey.jsx)("option",{value:"Black",children:"Black"}),(0,ey.jsx)("option",{value:"White",children:"White"}),(0,ey.jsx)("option",{value:"Grey",children:"Grey"}),(0,ey.jsx)("option",{value:"Brown",children:"Brown"}),(0,ey.jsx)("option",{value:"Purple",children:"Purple"}),(0,ey.jsx)("option",{value:"Pink",children:"Pink"}),(0,ey.jsx)("option",{value:"Orange",children:"Orange"}),(0,ey.jsx)("option",{value:"Cyan",children:"Cyan"}),(0,ey.jsx)("option",{value:"Magenta",children:"Magenta"}),(0,ey.jsx)("option",{value:"Lime",children:"Lime"}),(0,ey.jsx)("option",{value:"Teal",children:"Teal"}),(0,ey.jsx)("option",{value:"Indigo",children:"Indigo"}),(0,ey.jsx)("option",{value:"Violet",children:"Violet"}),(0,ey.jsx)("option",{value:"Fuchsia",children:"Fuchsia"}),(0,ey.jsx)("option",{value:"Gold",children:"Gold"}),(0,ey.jsx)("option",{value:"Silver",children:"Silver"}),(0,ey.jsx)("option",{value:"Bronze",children:"Bronze"}),(0,ey.jsx)("option",{value:"Other",children:"Kh\xe1c"})]})]}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["Type:",(0,ey.jsx)("input",{type:"text",name:"Type",value:r.Type,onChange:n})]}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["Size:",(0,ey.jsxs)("select",{name:"Size",value:r.Size,onChange:n,style:{padding:"5px"},children:[(0,ey.jsx)("option",{value:"XS",children:"XS"}),(0,ey.jsx)("option",{value:"S",children:"S"}),(0,ey.jsx)("option",{value:"M",children:"M"}),(0,ey.jsx)("option",{value:"L",children:"L"}),(0,ey.jsx)("option",{value:"XL",children:"XL"}),(0,ey.jsx)("option",{value:"XXL",children:"XXL"})]})]}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["Deposit:",(0,ey.jsx)("input",{type:"number",name:"Deposit",value:r.Deposit,onChange:n,min:"0"})]}),(0,ey.jsxs)("label",{style:{margin:"5px"},children:["Rental Fee:",(0,ey.jsx)("input",{type:"number",name:"RentalFee",value:r.RentalFee,onChange:n,min:"0"})]})]})},PS=t=>{let{addNewClothes:n}=t;const[r,i]=(0,e.useState)([{Brand:"",Color:"Other",Deposit:"",Type:"",Size:"XS",RentalFee:"",Available:!0,Image:"",Gender:"Unisex",InBillId:null,image:null}]);return(0,ey.jsxs)("div",{children:[(0,ey.jsx)("h2",{children:"Add Clothes"}),r.map(((e,t)=>(0,ey.jsxs)("div",{style:{textAlign:"center",margin:"20px",border:"1px solid black",padding:"5px"},children:[(0,ey.jsx)(NS,{item:e,onImageChange:e=>((e,t)=>{const n=t.target.files[0],s=[...r];s[e].image=n,i(s)})(t,e),onInputChange:e=>((e,t)=>{const{name:n,value:s}=t.target;console.log(n,s);const o=[...r];o[e][n]=n&&"RentalFee"===n||n&&"Deposit"===n?Number(s):s,i(o)})(t,e)}),(0,ey.jsx)("button",{onClick:()=>i(r.filter(((e,n)=>n!==t))),children:"X\xf3a"})]},t))),(0,ey.jsx)("button",{onClick:()=>{i([...r,{Brand:"",Color:"Other",Deposit:"",Type:"",Size:"XS",RentalFee:"",Available:!0,Image:"",Gender:"Unisex",InBillId:null,image:null}])},children:"Th\xeam"}),(0,ey.jsx)("button",{type:"submit",style:{padding:"10px",marginTop:"10px"},onClick:e=>{e.preventDefault(),n(r),i([{Brand:"",Deposit:"",Color:"Other",Type:"",Size:"XS",RentalFee:"",Available:!0,Image:"",Gender:"Unisex",InBillId:null,image:null}])},children:" X\xe1c nh\u1eadn th\xeam qu\u1ea7n \xe1o"})]})},AS="firebasestorage.googleapis.com",OS="storageBucket";class DS extends P{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(FS(e),"Firebase Storage: ".concat(t," (").concat(FS(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,DS.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var LS,MS;function FS(e){return"storage/"+e}function US(){return new DS(LS.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function jS(){return new DS(LS.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VS(){return new DS(LS.CANCELED,"User canceled the upload/download.")}function zS(){return new DS(LS.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BS(e){return new DS(LS.INVALID_ARGUMENT,e)}function qS(){return new DS(LS.APP_DELETED,"The Firebase app was deleted.")}function WS(e,t){return new DS(LS.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function HS(e){throw new DS(LS.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(LS||(LS={}));class KS{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=KS.makeFromUrl(e,t)}catch(i){return new KS(e,"")}if(""===n.path)return n;throw r=e,new DS(LS.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===AS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new KS(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new DS(LS.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class GS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function QS(e){return"string"===typeof e||e instanceof String}function $S(e){return YS()&&e instanceof Blob}function YS(){return"undefined"!==typeof Blob}function XS(e,t,n,r){if(r<t)throw BS("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw BS("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function JS(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ZS(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function eC(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(MS||(MS={}));class tC{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new nC(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===MS.NO_ERROR,i=n.getStatus();if(!t||eC(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===MS.ABORT;return void e(!1,new nC(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new nC(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=US();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?qS():VS())}else{r(jS())}};this.canceled_?t(0,new nC(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nC{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function rC(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function iC(){const e=rC();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(YS())return new Blob(n);throw new DS(LS.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function sC(e){if("undefined"===typeof atob)throw t="base-64",new DS(LS.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const oC={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class aC{constructor(e,t){this.data=e,this.contentType=t||null}}function lC(e,t){switch(e){case oC.RAW:return new aC(cC(t));case oC.BASE64:case oC.BASE64URL:return new aC(uC(e,t));case oC.DATA_URL:return new aC(function(e){const t=new hC(e);return t.base64?uC(oC.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw WS(oC.DATA_URL,"Malformed data URL.")}return cC(t)}(t.rest)}(t),new hC(t).contentType)}throw US()}function cC(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function uC(e,t){switch(e){case oC.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw WS(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case oC.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw WS(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=sC(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw WS(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class hC{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw WS(oC.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class dC{constructor(e,t){let n=0,r="";$S(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if($S(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new dC(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new dC(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(YS()){const e=t.map((e=>e instanceof dC?e.data_:e));return new dC(iC.apply(null,e))}{const e=t.map((e=>QS(e)?lC(oC.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new dC(r,!0)}}uploadData(){return this.data_}}function fC(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function pC(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function gC(e,t){return t}class mC{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||gC}}let yC=null;function vC(){if(yC)return yC;const e=[];e.push(new mC("bucket")),e.push(new mC("generation")),e.push(new mC("metageneration")),e.push(new mC("name","fullPath",!0));const t=new mC("name");t.xform=function(e,t){return function(e){return!QS(e)||e.length<2?e:pC(e)}(t)},e.push(t);const n=new mC("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new mC("timeCreated")),e.push(new mC("updated")),e.push(new mC("md5Hash",null,!0)),e.push(new mC("cacheControl",null,!0)),e.push(new mC("contentDisposition",null,!0)),e.push(new mC("contentEncoding",null,!0)),e.push(new mC("contentLanguage",null,!0)),e.push(new mC("contentType",null,!0)),e.push(new mC("metadata","customMetadata",!0)),yC=e,yC}function _C(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new KS(n,r);return t._makeStorageReference(i)}})}(r,e),r}function bC(e,t,n){const r=fC(t);if(null===r)return null;return _C(e,r,n)}function wC(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class SC{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function CC(e){if(!e)throw US()}function EC(e,t){return function(n,r){const i=bC(e,r,t);return CC(null!==i),i}}function kC(e,t){return function(n,r){const i=bC(e,r,t);return CC(null!==i),function(e,t,n,r){const i=fC(t);if(null===i)return null;if(!QS(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return JS("/b/"+o(i)+"/o/"+o(s),n,r)+ZS({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function TC(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new DS(LS.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new DS(LS.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new DS(LS.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new DS(LS.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function xC(e){const t=TC(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new DS(LS.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function IC(e,t,n){const r=JS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new SC(r,"GET",EC(e,n),i);return s.errorHandler=xC(t),s}function RC(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function NC(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=RC(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wC(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=dC.getBlob(c,r,u);if(null===h)throw zS();const d={name:l.fullPath},f=JS(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new SC(f,"POST",EC(e,n),p);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=TC(t),g}class PC{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function AC(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){CC(!1)}return CC(!!n&&-1!==(t||["active"]).indexOf(n)),n}const OC=262144;function DC(e,t,n,r,i,s,o,a){const l=new PC(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new DS(LS.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},g=r.slice(h,d);if(null===g)throw zS();const m=t.maxUploadRetryTime,y=new SC(n,"POST",(function(e,n){const i=AC(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?EC(t,s)(e,n):null,new PC(o,a,"final"===i,c)}),m);return y.headers=p,y.body=g.uploadData(),y.progressCallback=a||null,y.errorHandler=TC(e),y}const LC="running",MC="paused",FC="success",UC="canceled",jC="error";function VC(e){switch(e){case"running":case"pausing":case"canceling":return LC;case"paused":return MC;case"success":return FC;case"canceled":return UC;default:return jC}}class zC{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function BC(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let qC=null;class WC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=MS.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=MS.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=MS.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw HS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw HS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw HS("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw HS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw HS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class HC extends WC{initXhr(){this.xhr_.responseType="text"}}function KC(){return qC?qC():new HC}class GC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=vC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(LS.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(eC(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=jS()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(LS.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=RC(t,r,i),a={name:o.fullPath},l=JS(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=wC(o,n),h=e.maxUploadRetryTime,d=new SC(l,"POST",(function(e){let t;AC(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){CC(!1)}return CC(QS(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=TC(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,KC,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new SC(n,"POST",(function(e){const t=AC(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){CC(!1)}n||CC(!1);const i=Number(n);return CC(!isNaN(i)),new PC(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=TC(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,KC,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=OC*this._chunkMultiplier,t=new PC(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=DC(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,KC,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(OC*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=IC(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,KC,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=NC(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,KC,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=VS(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=VC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new zC(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(VC(this._state)){case FC:BC(this._resolve.bind(null,this.snapshot))();break;case UC:case jC:BC(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(VC(this._state)){case LC:case MC:e.next&&BC(e.next.bind(e,this.snapshot))();break;case FC:e.complete&&BC(e.complete.bind(e))();break;default:e.error&&BC(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class QC{constructor(e,t){this._service=e,this._location=t instanceof KS?t:KS.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new QC(e,t)}get root(){const e=new KS(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pC(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new KS(this._location.bucket,e);return new QC(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new DS(LS.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function $C(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=JS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new SC(r,"GET",kC(e,n),i);return s.errorHandler=xC(t),s}(e.storage,e._location,vC());return e.storage.makeRequestWithTokens(t,KC).then((e=>{if(null===e)throw new DS(LS.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function YC(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new KS(e._location.bucket,n);return new QC(e.storage,r)}function XC(e,t){if(e instanceof eE){const n=e;if(null==n._bucket)throw new DS(LS.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OS+"' property when initializing the app?");const r=new QC(n,n._bucket);return null!=t?XC(r,t):r}return void 0!==t?YC(e,t):e}function JC(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof eE)return new QC(e,t);throw BS("To use ref(service, url), the first argument must be a Storage instance.")}return XC(e,t)}function ZC(e,t){const n=null===t||void 0===t?void 0:t[OS];return null==n?null:KS.makeFromBucketSpec(n,e)}class eE{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=AS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?KS.makeFromBucketSpec(r,this._host):ZC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=KS.makeFromBucketSpec(this._url,e):this._bucket=ZC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new QC(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new GS(qS());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=ZS(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new tC(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const tE="@firebase/storage",nE="0.12.1",rE="storage";function iE(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new GC(e,new dC(t),n)}(e=X(e),t,n)}function sE(e,t){return JC(e=X(e),t)}function oE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze(),t=arguments.length>1?arguments[1]:void 0;e=X(e);const n=Me(e,rE).getImmediate({identifier:t}),r=b("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:E(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function aE(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new eE(r,i,s,n,je)}Le(new J(rE,aE,"PUBLIC").setMultipleInstances(!0)),Be(tE,nE,""),Be(tE,nE,"esm2017");const lE=()=>{const[t,n]=(0,e.useState)(null);(0,e.useEffect)((()=>{const e=Jm.onAuthStateChanged((e=>{n(e||null)}));return()=>{e()}}),[]);const r=async e=>{try{const t=Hg(Zm,"clothes");await Promise.all(e.map((async e=>{const n=sE(oE(),"clothes/"),r=iE(sE(n,e.image.name),e.image);r.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(e=>{console.error("Error uploading image:",e.message)}),(()=>{(function(e){return $C(e=X(e))})(r.snapshot.ref).then((async n=>{console.log("File available at",n),e.imageUrl=n;const r={Brand:e.Brand,Color:e.Color,Type:e.Type,Size:e.Size,Gender:e.Gender,RentalFee:e.RentalFee,Deposit:e.Deposit,Available:e.Available,imageUrl:e.imageUrl,Available:!0};await Gm(t,r)}))}))})))}catch(Cy){console.error("Error adding clothing item: ",Cy.message)}};return(0,ey.jsxs)("div",{children:[(0,ey.jsx)("h1",{children:"Dashboard"}),(0,ey.jsxs)("p",{children:["Welcome ",null===t||void 0===t?void 0:t.email]}),(0,ey.jsx)(PS,{addNewClothes:async e=>{console.log("Clothes data:",e),r(e)}})]})},cE=()=>(0,ey.jsx)("div",{children:(0,ey.jsx)("nav",{children:(0,ey.jsxs)("ul",{children:[(0,ey.jsx)("li",{children:(0,ey.jsx)("a",{href:"/",children:"Home"})}),(0,ey.jsx)("li",{children:(0,ey.jsx)("a",{href:"/order",children:"Order"})}),(0,ey.jsx)("li",{children:(0,ey.jsx)("a",{href:"/dashboard",children:"Dashboard"})}),(0,ey.jsx)("li",{children:(0,ey.jsx)("a",{href:"/bill",children:"Bill"})}),(0,ey.jsx)("li",{children:(0,ey.jsx)("a",{href:"/all-products",children:"All Products"})})]})})});var uE,hE=n(164),dE=n.t(hE,2);function fE(){return fE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fE.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(uE||(uE={}));const pE="popstate";function gE(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function mE(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function yE(e,t){return{usr:e.state,key:e.key,idx:t}}function vE(e,t,n,r){return void 0===n&&(n=null),fE({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?bE(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function _E(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function bE(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function wE(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=uE.Pop,l=null,c=u();function u(){return(o.state||{idx:null}).idx}function h(){a=uE.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:_E(e);return gE(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(fE({},o.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(pE,h),l=e,()=>{i.removeEventListener(pE,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=uE.Push;let r=vE(f.location,e,t);n&&n(r,e),c=u()+1;let h=yE(r,c),d=f.createHref(r);try{o.pushState(h,"",d)}catch(Cy){if(Cy instanceof DOMException&&"DataCloneError"===Cy.name)throw Cy;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=uE.Replace;let r=vE(f.location,e,t);n&&n(r,e),c=u();let i=yE(r,c),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var SE;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(SE||(SE={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function CE(e,t,n){void 0===n&&(n="/");let r=FE(("string"===typeof t?bE(t):t).pathname||"/",n);if(null==r)return null;let i=EE(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=DE(i[o],ME(r));return s}function EE(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(gE(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=UE([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(gE(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),EE(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:OE(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of kE(e.path))i(e,t,r);else i(e,t)})),t}function kE(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=kE(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const TE=/^:[\w-]+$/,xE=3,IE=2,RE=1,NE=10,PE=-2,AE=e=>"*"===e;function OE(e,t){let n=e.split("/"),r=n.length;return n.some(AE)&&(r+=PE),t&&(r+=IE),n.filter((e=>!AE(e))).reduce(((e,t)=>e+(TE.test(t)?xE:""===t?RE:NE)),r)}function DE(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=LE({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:UE([i,c.pathname]),pathnameBase:jE(UE([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=UE([i,c.pathnameBase]))}return s}function LE(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);mE("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(Cy){return mE(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Cy+")."),e}}(l||"",r),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function ME(e){try{return decodeURI(e)}catch(Cy){return mE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Cy+")."),e}}function FE(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const UE=e=>e.join("/").replace(/\/\/+/g,"/"),jE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");Error;function VE(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const zE=["post","put","patch","delete"],BE=(new Set(zE),["get",...zE]);new Set(BE),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qE.apply(this,arguments)}const WE=e.createContext(null);const HE=e.createContext(null);const KE=e.createContext(null);const GE=e.createContext(null);const QE=e.createContext({outlet:null,matches:[],isDataRoute:!1});const $E=e.createContext(null);function YE(){return null!=e.useContext(GE)}function XE(){return YE()||gE(!1),e.useContext(GE).location}function JE(t,n,r,i){YE()||gE(!1);let{navigator:s}=e.useContext(KE),{matches:o}=e.useContext(QE),a=o[o.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,h=XE();if(n){var d;let e="string"===typeof n?bE(n):n;"/"===c||(null==(d=e.pathname)?void 0:d.startsWith(c))||gE(!1),u=e}else u=h;let f=u.pathname||"/",p=CE(t,{pathname:"/"===c?f:f.slice(c.length)||"/"});let g=rk(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:UE([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:UE([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r,i);return n&&g?e.createElement(GE.Provider,{value:{location:qE({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:uE.Pop}},g):g}function ZE(){let t=function(){var t;let n=e.useContext($E),r=sk(ik.UseRouteError),i=ok(ik.UseRouteError);if(void 0!==n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=VE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:s},r):null,null)}const ek=e.createElement(ZE,null);class tk extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(QE.Provider,{value:this.props.routeContext},e.createElement($E.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nk(t){let{routeContext:n,match:r,children:i}=t,s=e.useContext(WE);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(QE.Provider,{value:n},i)}function rk(t,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==t){var o;if(null==(o=r)||!o.errors)return null;t=r.matches}let a=t,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||gE(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((t,i,s)=>{let o,h=!1,d=null,f=null;var p;r&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ek,c&&(u<0&&0===s?(p="route-fallback",!1||ak[p]||(ak[p]=!0),h=!0,f=null):u===s&&(h=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,s+1)),m=()=>{let n;return n=o?d:h?f:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(nk,{match:i,routeContext:{outlet:t,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?e.createElement(tk,{location:r.location,revalidation:r.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ik=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ik||{});function sk(t){let n=e.useContext(HE);return n||gE(!1),n}function ok(t){let n=function(t){let n=e.useContext(QE);return n||gE(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||gE(!1),r.route.id}const ak={};t.startTransition;function lk(e){gE(!1)}function ck(t){let{basename:n="/",children:r=null,location:i,navigationType:s=uE.Pop,navigator:o,static:a=!1,future:l}=t;YE()&&gE(!1);let c=n.replace(/^\/*/,"/"),u=e.useMemo((()=>({basename:c,navigator:o,static:a,future:qE({v7_relativeSplatPath:!1},l)})),[c,l,o,a]);"string"===typeof i&&(i=bE(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:g="default"}=i,m=e.useMemo((()=>{let e=FE(h,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:g},navigationType:s}}),[c,h,d,f,p,g,s]);return null==m?null:e.createElement(KE.Provider,{value:u},e.createElement(GE.Provider,{children:r,value:m}))}function uk(e){let{children:t,location:n}=e;return JE(hk(t),n)}new Promise((()=>{}));e.Component;function hk(t,n){void 0===n&&(n=[]);let r=[];return e.Children.forEach(t,((t,i)=>{if(!e.isValidElement(t))return;let s=[...n,i];if(t.type===e.Fragment)return void r.push.apply(r,hk(t.props.children,s));t.type!==lk&&gE(!1),t.props.index&&t.props.children&&gE(!1);let o={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=hk(t.props.children,s)),r.push(o)})),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const dk=t.startTransition;dE.flushSync,t.useId;function fk(t){let{basename:n,children:r,future:i,window:s}=t,o=e.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),wE((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return vE("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:_E(t)}),null,a)));let l=o.current,[c,u]=e.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=e.useCallback((e=>{h&&dk?dk((()=>u(e))):u(e)}),[u,h]);return e.useLayoutEffect((()=>l.listen(d)),[l,d]),e.createElement(ck,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var pk,gk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pk||(pk={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(gk||(gk={}));const mk=()=>{const[t,n]=(0,e.useState)([]);(0,e.useEffect)((()=>{const e=Qm(Rm(Hg(Zm,"bills"),Pm("Returned","==",!1)),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));n(t)}));return()=>e()}),[]);const r=async(e,t)=>{const n=Kg(Zm,"bills",e);try{const e=(await function(e){e=jg(e,qg);const t=jg(e.firestore,$g);return Pg(Yg(t),e._key).then((n=>Ym(t,e,n)))}(n)).data();let r=[];t.Returned=!0;const i=Kg(Zm,"clothes",t.id);await Hm(i,{Available:!0});const s=e.clothesRented.map((e=>e.id===t.id?t:e));s.every((e=>e.Returned))?(r=s,await Hm(n,{clothesRented:r,Returned:!0}),console.log("Bill returned")):(r=s,await Hm(n,{clothesRented:r}),console.log("Cloth returned"))}catch(Cy){console.error("Error returning cloth or updating bill: ",Cy.message)}};return(0,ey.jsxs)("div",{children:[(0,ey.jsx)("h1",{style:{marginBottom:"20px"},children:"Bills"}),(0,ey.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[(0,ey.jsx)("thead",{children:(0,ey.jsxs)("tr",{children:[(0,ey.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Bill ID"}),(0,ey.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Customer ID"}),(0,ey.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Amount"}),(0,ey.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Actions"})]})}),(0,ey.jsx)("tbody",{children:t.map(((e,t)=>(0,ey.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,ey.jsx)("td",{style:{padding:"10px"},children:e.Address}),(0,ey.jsx)("td",{style:{padding:"10px"},children:e.Name}),(0,ey.jsx)("td",{style:{padding:"10px"},children:e.TotalPrice}),(0,ey.jsx)("td",{style:{padding:"10px"},children:(0,ey.jsx)("div",{children:e.clothesRented.map(((t,n)=>(0,ey.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ey.jsx)("p",{style:{marginRight:"10px"},children:t.id}),t.Returned?(0,ey.jsx)("p",{style:{color:"green"},children:"Returned"}):(0,ey.jsx)("button",{style:{padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:()=>r(e.id,t),children:"Return"})]},n)))})})]},t)))})]})]})};iy().setAppElement("#root");const yk=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(null),[a,l]=(0,e.useState)({Brand:"",Color:"",Type:"",RentalFee:0,Size:"",Deposit:0}),[c,u]=(IS(),(0,e.useState)("")),[h,d]=(0,e.useState)(""),f=async(e,t)=>{"genderFilter"===e?u(t):"sizeFilter"===e&&d(t)};(0,e.useEffect)((()=>{const e=Qm(Hg(Zm,"clothes"),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));n(t)}));return()=>e()}),[]);return(0,ey.jsxs)("div",{children:[(0,ey.jsx)("h1",{children:"T\u1ea5t c\u1ea3 qu\u1ea7n \xe1o c\xf3"}),(0,ey.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[(0,ey.jsxs)("thead",{children:[(0,ey.jsxs)("tr",{children:[(0,ey.jsx)("th",{children:"Image"}),(0,ey.jsx)("th",{children:"Brand"}),(0,ey.jsx)("th",{children:"Color"}),(0,ey.jsx)("th",{children:"Type"}),(0,ey.jsx)("th",{children:"Rental Fee"}),(0,ey.jsx)("th",{children:"Deposit"}),(0,ey.jsx)("th",{children:"Size"}),(0,ey.jsx)("th",{children:"Action"})]}),(0,ey.jsx)("tr",{children:(0,ey.jsxs)("td",{colSpan:"6",style:{backgroundColor:"#f2f2f2",padding:"5px"},children:[(0,ey.jsx)("strong",{children:"Filter:"}),"\xa0 Gender:",(0,ey.jsxs)("select",{onChange:e=>f("genderFilter",e.target.value),children:[(0,ey.jsx)("option",{value:"",children:"All"}),(0,ey.jsx)("option",{value:"Unisex",children:"Unisex"}),(0,ey.jsx)("option",{value:"Male",children:"Male"}),(0,ey.jsx)("option",{value:"Female",children:"Female"})]}),"\xa0 Size:",(0,ey.jsxs)("select",{onChange:e=>f("sizeFilter",e.target.value),children:[(0,ey.jsx)("option",{value:"",children:"All"}),(0,ey.jsx)("option",{value:"S",children:"S"}),(0,ey.jsx)("option",{value:"M",children:"M"}),(0,ey.jsx)("option",{value:"L",children:"L"}),(0,ey.jsx)("option",{value:"XL",children:"XL"})]})]})})]}),(0,ey.jsx)("tbody",{children:t.map((e=>(0,ey.jsxs)("tr",{row:"row-".concat(e.id),style:{borderBottom:"1px solid #ddd"},children:[(0,ey.jsx)("td",{children:(0,ey.jsx)("img",{src:e.imageUrl,alt:e.Type,style:{width:"100px"}})}),(0,ey.jsx)("td",{children:e.Brand}),(0,ey.jsx)("td",{children:e.Color}),(0,ey.jsx)("td",{children:e.Type}),(0,ey.jsxs)("td",{children:[e.RentalFee," \u0111\u1ed3ng"]}),(0,ey.jsxs)("td",{children:[e.Deposit," \u0111\u1ed3ng"]}),(0,ey.jsx)("td",{children:e.Size}),(0,ey.jsxs)("td",{children:[(0,ey.jsx)("button",{onClick:()=>(e=>{i(!0),o(e),l(t.find((t=>t.id===e)));const n=t.find((t=>t.id===e));console.log(n)})(e.id),children:"Edit"}),(0,ey.jsx)("button",{onClick:()=>(e=>{console.log("Delete product with id:",e),Km(Kg(Zm,"clothes",e))})(e.id),children:"Delete"})]})]},e.id)))})]}),(0,ey.jsxs)(iy(),{isOpen:r,onRequestClose:()=>i(!1),children:[" ",s&&(0,ey.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Form submitted:",a),console.log("Update product with id:",s),Hm(Kg(Zm,"clothes",s),a),i(!1)},children:[(0,ey.jsx)("label",{htmlFor:"brand",children:"Brand:"}),(0,ey.jsx)("input",{type:"text",id:"brand",value:a.Brand,onChange:e=>l({...a,Brand:e.target.value})}),(0,ey.jsx)("label",{htmlFor:"color",children:"Color:"}),(0,ey.jsxs)("select",{name:"Color",value:a.Color,onChange:e=>l({...a,Color:e.target.value}),children:[(0,ey.jsx)("option",{value:"Red",children:"Red"}),(0,ey.jsx)("option",{value:"Blue",children:"Blue"}),(0,ey.jsx)("option",{value:"Green",children:"Green"}),(0,ey.jsx)("option",{value:"Yellow",children:"Yellow"}),(0,ey.jsx)("option",{value:"Black",children:"Black"}),(0,ey.jsx)("option",{value:"White",children:"White"}),(0,ey.jsx)("option",{value:"Grey",children:"Grey"}),(0,ey.jsx)("option",{value:"Brown",children:"Brown"}),(0,ey.jsx)("option",{value:"Purple",children:"Purple"}),(0,ey.jsx)("option",{value:"Pink",children:"Pink"}),(0,ey.jsx)("option",{value:"Orange",children:"Orange"}),(0,ey.jsx)("option",{value:"Cyan",children:"Cyan"}),(0,ey.jsx)("option",{value:"Magenta",children:"Magenta"}),(0,ey.jsx)("option",{value:"Lime",children:"Lime"}),(0,ey.jsx)("option",{value:"Teal",children:"Teal"}),(0,ey.jsx)("option",{value:"Indigo",children:"Indigo"}),(0,ey.jsx)("option",{value:"Violet",children:"Violet"}),(0,ey.jsx)("option",{value:"Fuchsia",children:"Fuchsia"}),(0,ey.jsx)("option",{value:"Gold",children:"Gold"}),(0,ey.jsx)("option",{value:"Silver",children:"Silver"}),(0,ey.jsx)("option",{value:"Bronze",children:"Bronze"}),(0,ey.jsx)("option",{value:"Other",children:"Kh\xe1c"})]}),(0,ey.jsx)("label",{htmlFor:"type",children:"Type:"}),(0,ey.jsx)("input",{type:"text",id:"type",value:a.Type,onChange:e=>l({...a,Type:e.target.value})}),(0,ey.jsx)("label",{htmlFor:"rentalFee",children:"Rental Fee:"}),(0,ey.jsx)("input",{type:"number",id:"rentalFee",value:a.RentalFee,onChange:e=>l({...a,RentalFee:e.target.value})}),(0,ey.jsx)("label",{htmlFor:"size",children:"Size:"}),(0,ey.jsxs)("select",{value:a.Size,onChange:e=>l({...a,Size:e.target.value}),children:[(0,ey.jsx)("option",{value:"",children:"All"}),(0,ey.jsx)("option",{value:"S",children:"S"}),(0,ey.jsx)("option",{value:"M",children:"M"}),(0,ey.jsx)("option",{value:"L",children:"L"}),(0,ey.jsx)("option",{value:"XL",children:"XL"})]}),(0,ey.jsx)("button",{type:"submit",children:"Save"}),(0,ey.jsx)("button",{onClick:()=>i(!1),children:"Cancel"})]})]})]})};const vk=function(){return(0,ey.jsx)(fk,{children:(0,ey.jsxs)("div",{className:"App",children:[(0,ey.jsx)(cE,{}),(0,ey.jsxs)(uk,{children:[(0,ey.jsx)(lk,{path:"/",exact:!0,element:(0,ey.jsx)(ty,{})}),(0,ey.jsx)(lk,{path:"/order",element:(0,ey.jsx)(RS,{})}),(0,ey.jsx)(lk,{path:"/dashboard",element:(0,ey.jsx)(lE,{})}),(0,ey.jsx)(lk,{path:"/bill",element:(0,ey.jsx)(mk,{})}),(0,ey.jsx)(lk,{path:"/all-products",element:(0,ey.jsx)(yk,{})})]})]})})},_k=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,ey.jsx)(e.StrictMode,{children:(0,ey.jsx)(vk,{})})),_k()})()})();
//# sourceMappingURL=main.5e524197.js.map